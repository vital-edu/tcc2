# Introdução

A tecnologia é definida como o uso do conhecimento técnico e científico aplicado na transformação de ferramentas, processos e materiais [referência]. A utilização e aperfeiçoamento da tecnologia costuma resultar em uma facilidade maior em realizar tarefas, o que culmina em um maior grau de satisfação humana [referênciaLudwigVonMises]. Uma dessas tecnologias que revolucionou o mundo foi a *prensa de tipos móveis*, inventada pelo alemão Johannes Gutenberg por volta do ano 1450.

A prensa de tipos móveis tornou o processo de impressão mais rápido e barato, o que propiciou a disseminação da informação escrita [referencia] levando a produção de livros em massa, servindo como base para a criação de uma sociedade mais dinâmica, comunicativa, colaborativa e com menos obstáculos ao acesso a informação.

A prensa de tipos móveis tornou a comunicação atemporal, através do registro de conhecimento e histórias em meios que pudessem ser consumidos posteriormente e sem a necessidade de um interlocutor, e o advento da *internet* conseguiu quebrar uma outra grande barreira, a distância. Agora, a informação não apenas é registrada para a posterioridade, mas também é transportada em questão de segundos para qualquer lugar do globo.

Embora a *internet* tenha tornado o acesso a informações mais fácil, amplo e dinâmico, ainda há um controle muito grande de agentes centrais, principalmente do governo, sobre o que um usuário pode fazer. A *internet* no seu estágio inicial representava a liberdade de acesso a informação de forma livre e irrestrita, porém a cada ano novas leis e regulações governamentais ameaçam essa característica fundamental da *internet* como o GDPR (*General Data Protection Regulation* - Regulação de Proteção de Dados Gerais), a ECPA (*Eletric Communications Privacy Act* - Lei de Privacidade das Comunicações Elétricas), a Digital Millennium Copyright Act, a CFAA (*Computer Fraud And Abuse Act* - Lei de Abuso e Fraude de Computador), as leis antitruste, e várias outras regulações mais específicas.

O presente trabalho não tem como objetivo esclarecer ou defender uma visão de livre mercado, porém, parte da premissa de que as liberdades individuais são naturais e absolutas, não necessitando de lei positivada para serem consideradas "certas". A discussão sobre o certo e o errado, quanto a criação e aplicação de leis, faz parte tanto do campo filosófico, no estudo sobre a ética (o estudo sobre o comportamento humano, refletindo sobre o que é o certo e o que é o errado), bem como do campo do direito, em que há um antagonismo entre o *jusnaturalismo* (visão jurídica de que a lei precede o homem, é universal, imutável e inviolável, devendo ser descoberta) e o *juspositivismo* (a visão de que a lei emana das autoridades que possuem o poder político de impô-las, modificá-las e re-interpretá-las a bel-prazer).

Se nos atermos ao *juspositivismo*, não poderemos questionar se as leis são certas ou não, e assim, nenhuma discussão será frutífera, porém, se entendermos que existe um ideal de certo, podemos buscá-lo e questionar se a lei escrita (positivada) é de fato correta.

E partindo do pressuposto de que a liberdade individual bem como a propriedade privada são invioláveis, independente da lei positivada, e também partindo do pressuposto de que a propriedade privada só existe para bens escassos, podemos então chegar a conclusão de que qualquer interferência estatal é prejudicial ao indivíduo. E que a tecnologia deve usar dos seus meios para garantir que agentes centrais, que podem ser nomeados muitas vezes como agentes autoritários, não consigam interferir nas liberdades individuais.

Nesse sentido, assim como a igreja detinha o poder sobre a produção textual e cultural devido a centralização da produção de livros em monastérios, o governo, hoje, detém uma forte influência sobre o que pode ou não pode ser feito e de que forma pode ser feito na *internet*, como as atrocidades que o governo fez e que foram reveladas pelo *WikiLeaks*, e a espionagem e quebra de privacidade que o governo faz constantemente, algumas das quais reveladas por Edward Snowden, sendo tanto ele quanto Julian Assange (fundador do *WikiLeaks*) considerados inimigos do estado e acusados de traição, e, devido ao monopólio da justiça pelo estado, e pelo próprio conflito de interesse do governo, ambos jamais terão um julgamento justo, e o governo, jamais será responsabilizado por nenhuma de suas ações autoritárias e sem limites.

Por conta dessa constante preocupação com o poder que agentes centrais detêm, e os dados que estão sob seu controle, tem aumentado o interesse na adoção de criptografias cada vez mais sofisticadas e de código aberto, e da adoção de outras tecnologias que tentem conter ou tornar nulo o poder estatal, ao menos no mundo digital, e tenta-se aumentar a capacidade das plataformas digitais de sobreviver à coerção de agentes centrais, e também criar alternativas para sistemas controlados atualmente pelo governo, como o sistema jurídico e financeiro, no mundo digital.

Assim, a tecnologia tem evoluído para prover uma *internet* cada vez mais resistente e livre, competindo com governos e empresas que não desejam que o usuário tenha total liberdade e responsabilidade sobre os seus atos digitais. E é neste contexto que está surgindo um novo paradigma na computação, o desenvolvimento de aplicações descentralizadas, que tentam solucionar problemas e preocupações como segurança da informação, garantia de confiabilidade no canal de comunicação, garantia de autenticidade dos dados, ponto único de falha, consenso de informação e, principalmente, tentam proteger uma rede de nós interligados de ataques vindos de agentes mal intencionados que tentem corromper, alterar, deturpar, atrapalhar ou destruir dados de uma rede de informação ou plataforma de serviços.

Este trabalho apresenta um estudo sobre o estado atual das tecnologias descentralizadas no âmbito do desenvolvimento de aplicações focadas no usuário final e que possuam uma experiência de uso similar as aplicações centralizadas existentes atualmente.

## Objetivos

Esse trabalho possui um objetivo geral que é alcançado ao se cumprir três objetivos específicos. Esses objetivos são descritos neste capítulo.

### Objetivo geral

O presente trabalho tem como objetivo verificar a viabilidade da utilização de tecnologias descentralizadas no desenvolvimento de soluções de sistemas virtuais que possam resolver problemas reais de usuários finais.

### Objetivos específicos

Para alcançar o objetivo geral, os seguintes objetivos específicos foram definidos:

1. Estudar a maturidade das tecnologias descentralizadas atuais;
2. Criar uma prova de conceitos utilizando tecnologias descentralizadas.
3. Verificar as particularidades do desenvolvimento em tecnologias descentralizadas;

## Estrutura do trabalho

O trabalho está estruturado em três capítulos principais, o primeiro cumpre com o objetivo específico 1 ao descrever o conceito de aplicações descentralizadas, quais tecnologias descentralizadas estão eminentes atualmente e quais suas vantagens e desvantagens.

O segundo capítulo descreve o problema escolhido para a prova de contexto e como as tecnologias descentralizadas são aderentes à ele, cumprindo parcialmente o objetivo específico 2.

O terceiro capítulo conclui o objetivo específico 2 ao mostrar o processo de engenharia de software utilizando tecnologias descentralizadas aplicado ao problema escolhido, e também cumpre com o objetivo específico 3 ao mostrar como problemas tradicionalmente resolvidos na engenharia de software podem ser abordados ao utilizar tecnologias descentralizadas e quais são as diferenças e desafios envolvidos no processo.

Por fim, há um capítulo com as discussões finais em que está condensado as aprendizagens empíricas descobertas durante o desenvolvimento do trabalho, a conclusão chegada sobre o objetivo do trabalho e quais problemas e desafios permanecem abertos para serem abordados em trabalhos futuros.

# Aplicações Descentralizadas

Este capítulo aborda os conceitos fundamentais das aplicações descentralizadas, suas características, tipos, os fundamentos teóricos por traz dessas tecnologias, suas limitações e por fim um breve estudo sobre as principais opções tecnológicas atuais no desenvolvimento de aplicações descentralizadas.

## Características das Aplicações Descentralizadas

\citeauthoronline{raval} classifica as aplicações de *software* com base no seu nível de centralização (fig. \ref{fig:apptypes}): aplicações centralizadas (fig. \ref{fig:apptypes}.a), caracterizadas como aplicações fornecidas ou controladas por apenas um agente ou organização; aplicações distribuídas (fig. \ref{fig:apptypes}.b), definidas como aplicações que possuem diversas replicas espalhadas geograficamente e que cooperam entre si para garantir consistência e disponibilidade de dados \cite{raval}; aplicações descentralizadas (fig. \ref{fig:apptypes}.c), em que cada nó opera de forma independente, autônoma e autossuficiente, e que portanto, necessita de um algoritmo de consenso para resolver disputas.

\begin{figure}[htbp]
  \caption{\label{fig:apptypes}Tipos de aplicações de \emph{software} utilizando o diagrama de Paul Baran.}
  \begin{center}
  \includegraphics[width=0.9\textwidth]{imagens/apptypes.png}
  \end{center}
  \legend{Fonte: \citeonline[p. 2]{baran}.}
\end{figure}

Essas classificações não são excludentes, sendo possível que uma aplicação seja ao mesmo tempo centralizada e distribuída, o que resolve problemas de disponibilidade, latência de rede, corrupção de dados, porém, não resolve problemas de ordens políticas, sejam eles internos ou externos. Os problemas políticos internos remetem a decisões administrativas tomadas por sócios, conselho diretor, e funcionários do alto escalão da empresa. Já os problemas políticos externos remetem a interferências do governo ou outras entidades com poder coercitivo de impor suas vontades. Os problemas políticos têm potencial de afetarem o usuário final da aplicação ao alterarem o comportamento da aplicação, sua disponibilidade, ou mesmo o nível de segurança e privacidade dos dados dos usuários.

\citeonline{raval} propôs que para que uma aplicação seja considerada descentralizada, e portanto, imune a centralização de poder, ela deva possuir as seguintes características:

1. Ter código aberto: para uma plataforma ser descentralizada, o código fonte da aplicação não pode estar a mercer de apenas um índivíduo ou grupo, e portanto deve estar públicamente disponível para qualquer usuário realizar a auditoria do código, impedindo que haja comportamentos maliciosos na aplicação ou que se desviem do seu propósito inicial. A disponibilização do código também permite que haja inúmeras cópias de segurança da aplicação e que qualquer um possa compilar e/ou executar a apliação diretamente do código fonte, eliminando preocupações quanto a adulteração dos binários, que poderiam ser produzidos a partir de um outro código fonte (pemitindo a inclusão de brechas de segurança ou comportamentos maliciosos);
2. Possuir moeda interna: como não existe a propriedade definitiva da plataforma por ninguém, é preciso encontrar uma maneira de incentivar o desenvolvimento da plataforma por desenvolvedores e custear a infraestrutura da aplicação, e, para essa finalidade, normalmente são criados *tokens*\footnote{\emph{tokens}, segundo \citeonline{token}, são meios de trocas não reconhecidos por lei, emitidos por indivíduos privados ou empresas, e que são utilizados como se fossem dinheiro.} específicos para a plataforma que funcionam de forma similar a ações de empresas (títulos emitidos por sociedades anônimas), garantindo tanto poder de decisão sobre o rumo da empresa, bem como uma forma de captar investimento externo e premiar os fundadores quando há a valorização do valor da organização.
3. Usar um algoritmo de consenso descentralizado: é o algoritmo de consenso descentralizado (que resolva o *Problemas dos Generais Bizantinos*\footnote{\emph{problema dos generais bizantinos}, \citeauthoronline{byzantine} formalizaram em \citeyear{byzantine} uma história fictícia de um exército bizantino acampado ao redor de uma cidade inimiga em que o exército é composto por diversas divisões, cada uma comandada por um general, e em que a comunicação entre os generais só pode ocorrer por meio de troca de mensagens entre si. Nesse problema os generais leais do exército devem utilizar um algorítmo que garanta que (i) todos os generais leais irão adotar o mesmo plano de ação, e (ii) um grupo pequeno de traidores e conspiradores não pode conseguir que os generais leais adotem um plano de ação ruim.}) que permitirá que nós independentes com resultados conflitantes consigam convergir para um único resultado e assim possa-se garantir que a rede funcione sem chegar nunca a um estado permanente de impasse (*deadlock*).
4. Não possuir ponto central de falha: aplicações descentralizadas, em teoria, não podem ser removidas ou derrubadas pois não possuem um único ponto de falha. Por funcionar em um sistema *peer-to-peer*\footnote{\emph{peer-to-peer} (p2p - ponto-a-ponto) é o nome que se dá a uma arquitetura de rede distribuída em que os participantes compartilham parte de seus recursos de \emph{hardware} (poder de processamento, capacidade de armazenamento, etc) para outros \emph{peers} (pontos) diretamente, sem passar por entidades intermediárias. Esses recursos compartilhados são necessários para prover o serviço e/ou conteúdo oferecido pela rede, e cada participante dessa rede é ao mesmo tempo provedor e consumidor de recursos \apud{kellerer}{p2p}.}, todos os participantes da rede teriam que ser desligados simultaneamente para que a aplicação parasse de funcionar. E ainda assim, é facilmente possível que novos nós entrem na rede em uma situação dessa, evitando o seu desligamento permanente. Na prática, porém, isso só é possível quando há o interesse constante de diversos agentes em manter a rede funcionando.

Já para a \citeonline{blockstack}, as aplicações descentralizadas precisam possuir as características abaixo:

1. Usuários possuem a propriedade sobre seus dados: usuários detêm seus dados e escolhem quais aplicações podem ter acesso a eles. Os dados ficam criptografados com uma chave privada de propriedade dos usuário, que decripta os dados para a aplicação sempre que ela precisar consultar ou alterar seus dados.

2. Usuários possuem a propriedade sobre suas identidades: usuários são os únicos administradores de suas identidades, e, dentro de uma aplicação, eles devem ser distinguidos através de um identificador único sem que a aplicação tenha poder de revogar ou alterar a identidade do usuário. Além disso, o usuário deve ser capaz de criar quantas identidades ele achar necessário.

3. Usuários têm liberdade de trocar de aplicação: os dados e identidades do usuário são independentes da aplicação, sendo assim, o usuário pode escolher a qualquer momento revogar acesso de uma aplicação aos seus dados e conceder o acesso a outra aplicação. Assim, o usuário será sempre livre para trocar de aplicação mantendo a propriedade sobre suas identidades e dados, inclusive tendo a possibilidade de gerenciar seus dados por conta própria sem a necessidade de utilizar aplicações de terceiros.

Além dessas três características principais, \citeonline{blockstack} cita outros dois componentes opcionais que uma aplicação descentralizada pode ter:

1. Contratos inteligentes: caracterizado como um estado de máquina replicável, algumas aplicações descentralizadas precisam garantir que cada nó da rede execute a mesma sequência de operações para que uma regra de negócio seja cumprida.

2. Dependência em *tokens* e/ou ativos infungíveis (que possui valor único, não podendo ser trocado por dinheiro): para incentivar desenvolvedores a utilizarem a aplicação e/ou para desincentivar o uso indiscriminado de recursos por usuários.

Além das caracterísiticas acima descritas, as aplicações descentralizadas, sejam elas quais forem, devem ser desenvolvidas utilizando robustas tecnologias criptográficas, pois ao se utilizar de uma rede distribuída, deve-se haver desconfiança total e permanente sobre as intenções de cada nó da rede, que poderá tentar adulterar ou utilizar de forma indevida os dados trafegados por ela. Por isso, os dados dos usuários devem ser sempre criptografados utilizando uma chave criptográfica privada em que apenas o usuário tenha a posse dela.

## A Necessidade de Existência das Aplicações Descentralizadas

A *internet* surgiu como uma rede descentralizada, em que cada computador se conecta a outro computador, dando origem ao termo *World Wide Web* (Rede Mundial de Computadores), e por isso, desde o princípio até hoje, mantém-se como uma estrutura praticamente impossível de ser derrubada, e mesmo páginas *web* consideradas ilegais ou atividades que constantemente são vigiadas ou proibidas por governos, continuam a funcionarem e a estarem disponíveis, no que se denominou *deep web*\footnote{\emph{deep web} (\emph{internet} profunda) é o termo usado para designar a parte da \emph{internet} que não está acessível por meios tradicionais, tais como ferramentas de pesquisa. Segundo \citeauthor{deep}, estima-se que a \emph{deep web} seja 500 vezes maior do que a \emph{internet} de superfície, nome dado a \emph{internet} prontamente acessível por buscadores.}.

Porém, a *internet* comumente acessada pelos usuários, tornou-se cada vez mais centralizada, tendo empresas como Facebook, Google, Amazon, e Microsoft, um gigante volume de dados que são comercializados de forma indiscriminada ou sem o conhecimento de seus usuários. Casos de brechas de segurança ou roubo de informações também têm se tornado constantes e cada vez mais preocupantes, havendo apenas na década de 2010 quase 4 bilhões de registros de usuários roubados \cite{hacks}.

Não só questões de segurança das informações preocupam, mas também questões de privacidade, como o que aconteceu no caso da Cambridge Analytica, que coletou cerca de 87 milhões de dados de usuários do Facebook sem consentimento dos mesmos \cite{cambridge}, mostrando que até companhias gigantes e consolidadas como o Facebook, não podem ser confiadas.

Outro notório problema relacionado com aplicações centralizadas é a facilidade com que governos conseguem obter dados dos seus cidadãos, exigindo secretamente que empresas privadas entreguem informações ou implementem *backdoors*\footnote{\emph{backdoor} (porta dos fundos) é um método inserido de forma intencional no sistema, no algorítmo criptográfico ou no código da aplicação, que permite ignorar a autenticação ou outros controles de segurança de forma a possibilitar o acesso ao sistema ou dados contidos nesse sistema. \cite{backdoor}}(portas dos fundos), como no famoso caso do programa de vigilância do governo americano com codinome PRISM, que coletava dados eletrônicos de usuários de serviços do Google, Facebook, Apple, Microsoft, dentre outros, além de provedores de serviços de telecomunicações como AT&T, Verizon e Sprint \cite{prism1, prism2}.

Além do programa de vigilância PRISM, os governos tendem a realizar constantes violações de liberdades individuais, que são financiadas com dinheiro público, respaldadas por leis criadas pelo próprio governo, e demandadas de forma coercitiva sem possibilidade de serem contestadas. Um dos exemplos mais emblemáticos de violação de liberdades indivíduais, do monopólio do uso da força e do monopólio da justiça, foi o caso de Ross Ulbricht, um jovem pacífico que não cometeu nenhum crime violento e recebeu duas penas de prisão pérpétua mais quarenta anos de prisão, sem direito a liberdade condicional, apenas por ter criado um site de comércio eletrônico que possibilitava a comercialização de drogas ilícitas e que utilizava criptomoedas como meio de pagamento e através de um processo penal e investigativo repleto de violações de direitos individuais \cite{ross}.

O caso de Ross Ulbricht foi construído através de constantes violações de legislação por parte do governo, pelo uso arbitrário da lei e do poder estatal, e com o intuíto de demonstrar que o poder de um governo não tem limites, é implacável, arbitrário e sempre será utilizado com toda a sua força para impedir que o indivíduo tenha a liberdade total sobre a sua vida.

Por todos esses aspectos, apenas através de tecnologias fortemente embasadas em criptografia e que impeçam que agentes centrais imponham seu poder sobre os usuários, é que poderá ser alcançado uma *internet* verdadeiramente livre, segura, e com máxima privacidade, o que claramente é indesejado tanto pelos governos estatais como por empresas privadas que desejam se beneficiar dos dados privados de seus usuários. E são essas características que as aplicações descentralizadas prometem oferecer.

<!-- Para que uma aplicação descentralizada seja possível, é necessário que haja regras, ou contratos, que formalizem a operação da aplicação. \citeauthor{smartcontract} criou a definição de *smart contract* (contrato inteligente), que, segundo ele, é a incorporação de cláusulas contratuais no *hardware* e/ou *software* que utilizamos, que tornem a violação do contrato onerosa, e, no melhor dos casos, proibitiva.

Para \citeauthoronline{smartcontract}, contratos são a base para uma economia livre de mercado, e que por isso, é necessário que os mecanismos do mundo sejam construídos de madeira a criar contratos:

a. robustos contra vandalismo ingênuo;
b. robustos contra violações sofisticadas\footnote{É importante salientar, que um contrato inteligente não se propõe a lidar com um terceiro tipo de ataque, o vandalismo sofisticado, caracterizado como sendo o uso extensivo e desproporcional de força ou poder, tais como ataques militares efetuados por terceiros\cite{smartcontract}. Esse tipo de ataque é raramente utilizado nas relações de livre mercado, e quase invariavelmente são oriundos de uma alocação de recursos obtidos de forma coercitiva por governos ou entidades autoritárias.}.

\citeauthoronline{smartcontract} classifica a forma de seguração contratual em:

- reativa: ação tomada após a quebra de um contrato, como medidas físicas tomadas por agências de segurança, tais quais, prisão e confiscação de propriedade;
- proativa: ação tomada de forma a coibir a quebra de um contrato, como caixas fortes com mecanismos de autenticação que impeçam o acesso não autorizado a um bem de valor.

Nessas classificações, um sistema judicial estatal, bem como a polícia e empresas de seguros, são considerados uma segurança contratual reativa, que embora sejam efetivas, são onerosas e burocráticas, aumentando o custo de transação, o que produz produtos ou serviços mais caros. E por esse motivo, contratos inteligentes, que incorporam em si mecanismos proativos de segurança, oferecem um menor custo de transação e uma segurança suficiente para coibir a violação de contratos.

Com o surgimento do *Bitcoin*, criou-se a possibilidade de incorporar contratos inteligentes em *blockchain*, sendo a moeda *Bitcoin*, uma forma de contrato inteligente incorporado em *software*, já que a moeda em si não possui nenhum componente de segurança reativa, confiando completamente no poder da criptografia e do algoritmo de consenso para garantir que as regras, ou cláusulas, que definem o que é uma transação válida não sejam quebradas, e que qualquer tentativa de fraude da *blockchain* seja punida com a perda de tempo e recursos computacionais, e consequentemente recursos energéticos.

E foi o surgimento da *Ethereum* que culminou na adoção e propagação de contratos inteligentes em diferentes contextos. A *Ethereum*, uma criptomoeda que implementa uma *blockchain* que suporta o uso de uma linguagem *Turing-completa*\footnote{\emph{Turing-completo} é a denominação dada a sistemas de regras capazes de simular um computador primitivo, ou seja, permitir teoricamente, sem levar em consideração capacidade de memória e de processamento, a resolução de qualquer problema computacional, o que no contexto de linguagens de programação, significa ter suporte a estruturas condicionais e de repetição \cite{ethereum}.} foi concebida para permitir a criação de aplicações descentralizadas que fosse além do contexto financeiro \cite{ethereum}.

O desenvolvimento de aplicações descentralizadas permitiu o surgimento de um novo modelo organizacional, o DAO (*Decentralized Autonomous Organization* - Organização Autônoma descentralizada), em que todas as regras de funcionamento da empresa, inclusive divisão de lucros e como é feito decisões de negócio da empresa, são codificadas em contratos inteligentes utilizando *blockchain*. Isso garante que se crie empresas com regras claras, imutáveis, e que haja a garantia de como a empresa vai funcionar durante toda sua existência.

Embora, aplicações descentralizadas sejam interessantes em contextos que envolvem a desconfiança em agentes centrais, é importante salientar que existem problemas intrínsecos relacionados ao uso de *blockchain* na construção de aplicações. Como \citeauthor{safesmart} constataram, o desenvolvimento de contratos inteligentes embora se assemelhe ao desenvolvimento tradicional, possui preocupações muito maiores quanto a segurança, além de não ser nem um pouco trivial.

De forma simplista, um código de contrato inteligente é invocado sempre que recebe uma mensagem, podendo haver vários pontos de entrada, sendo cada ponto de entrada uma função do código a ser executada. Ou seja, uma mensagem recebida é como a chamada de uma função, que deve retornar um resultado para quem enviou a mensagem após a mensagem ser processada pela função do contrato.

A figura \ref{fig:ethcode} mostra um exemplo simplório de contrato inteligente feito para um jogo  de pedra, papel e tesoura. Nesse exemplo, o contrato inicia com nenhum jogador e espera que jogadores iniciem o contrato informando a jogada que desejam fazer. Assim que os jogadores informam suas jogadas, o contrato verifica o ganhador e envia a recompensa para ele.

\begin{figure}[htbp]
  \caption{\label{fig:ethcode}Exemplo de contrato inteligente implementado na linguagem \emph{Serpent}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/ethcode.png}
  \end{center}
  \legend{Fonte: \citeauthor{safesmart}.}
\end{figure}

Em última análise, criar um contrato inteligente é um processo meticuloso e que envolve codificar máquinas de estado muitas vezes complexas, em que qualquer omissão de um estado de transição ou negligência em checar o estado atual, pode causar problemas drásticos \cite{safesmart}, principalmente por serem, a princípio, imutáveis e envolverem contextos atrelados a manipulação de recursos financeiros.

O desenvolvimento de contratos inteligentes, assemelha-se então, muito mais ao desenvolvimento de *software* embarcado (em que o *recall*\footnote{\emph{recall} (devolução) é o termo usado para quando um lote inteiro de uma linha de produto já vendida apresenta defeitos de fabricação e a fabricante convida seus clientes a devolverem o produto seja para reparação do problema ou para troca, sem gerar custos para o cliente por esse serviço.} é indesejado e oneroso financeiramente), do que *software* evolutivo e incremental (em que a atualização do *software* é facilmente realizada e incentivada).

Outra preocupação recorrente em relação ao desenvolvimento de aplicações descentralizadas, é a utilização da tecnologia *blockchain*, que exige que um nó completamente engajado no processo de criação de novos blocos, deve processar cada transação e manter uma cópia completa do estado atual da *blockchain*. Embora isso garanta questões de segurança, neutralidade política e tolerância a falhas, isso tem um alto custo de escalabilidade. Inclusive, cada novo nó que entra na rede, em vez de deixá-la mais performática, acaba por tornar a rede mais fraca, pelo fato de a latência entre nós crescer de forma logarítmica a cada nó adicionado \cite{scale}.

Devido ao aumento do número de transações, e do tamanho total da *blockchain*, a *Prova de Trabalho* acaba por obrigar que os nós tenham cada vez mais capacidade de processamento e de armazenamento, o que pode culminar em um processo de centralização, em que apenas nós com maior infraestrutura conseguem participar da rede. Para exemplificar, \citeauthoronline{scale} relatou que em \citeyear{scale}, a *blockchain* do *Bitcoin* transacionou 7 transações por segundo, tendo na época, um limite teórico de 4000 transações por segundo; e a *blockchain* da *Ethereum* chegou a transacionar 15 transações por segundo.

Embora novas tecnologias e abordagens tenham sido implementadas no protocolo *Bitcoin*, assim como de outras criptomoedas, como a *Ethereum*, e o potencial de escalabilidade esteja aumentando ano a ano, é inegável que esse volume de transações por segundo é irrisório comparado com aplicações centralizadas e distribuídas, que conseguem lidar com milhares de transações por segundo, e que possuem capacidade de escalonamento de acordo com a demanda pelo serviço. -->

## As Tecnologias Descentralizadas da Atualidade

Embora as tecnologias descentralizadas remetam a décadas passadas com o advento das redes *peer-to-peer* (ponto-a-ponto), foi apenas a partir do surgimento do *Bitcoin*\footnote{veja o apêndice \ref{appendix:a} para uma explicação detalhada sobre a tecnologia do \emph{Bitcoin}} que as aplicações descentralizadas ganharam força e começaram a incorporar conceitos de segurança baseados em criptografia, algorítmos de consenso e resolução de disputas, imutabilidade dos dados, e recompensas para participantes da rede a partir da geração de *tokens* de pagamento.

Embora a lista de tecnologias descentralizadas seja muito extensa e carente de estudos acadêmicos aprofundados sobre as mesmas, este capítulo mostra algumas das tecnologias mais proeminentes da atualidade para a contrução de aplicações descentralizadas, que foram estudadas pelo autor.

### Holochain

A *Holochain* é uma alternativa a *blockchain* que ao invés de compartilhar todos os dados de forma idêntica para todos os nós da rede, distribui os dados de uma aplicação de forma aleatória entre os nós criando um número de cópias suficientemente grande de forma a garantir que o dado esteja sempre disponível mesmo quando o detentor original do dado está indisponível na rede.

Por não ter que replicar os dados para todos os nós da rede, a *Holochain* possui uma maior escalabilidade em comparação a aplicações descentralizadas que se utilizam da *blockchain* \citeauthoronline{holo}.

A *Holochain* provê a garantia de integridade de dados para aplicações *peer-to-peer* sem utilizar algoritmos de consenso, o que economiza poder de processamento, sem abandonar a característica de imutabilidade, pois valida as transações sempre que um agente se comunica com outro. \citeonline{holo} denomina essa abordagem como *centrada no agente* e destaca que o custo computacional de gerenciamento de consenso requer uma quantidade desnecessária de processamento de dados que carrega limitações de escalabilidade inerentes a abordagem.

A *Holochain* foi pensada para ter um modo de operação similar ao *git*, em que cada nó não precisa estar sincronizado com outros nós, e que cada nó pode ter sua própria *blockchain* interna, independente das demais. Apenas quando os nós se comunicam, deve haver a validação das informações trocadas e a resolução de conflitos entre os nós \cite{holo2}. Nesse sentido, para \citeauthoronline{holo2} a *blockchain* possui uma estrutura *centrada no dado*, em contraste com a abordagem *centrada no agente*, adotada pela *Holochain*.

A abordagem *centrada no agente* abstrai muito mais o mundo real, ao reconhecer que cada nó tem uma perspectiva, interesse e tempo de interação diferente de outro nó da rede, não havendo uma memória única e idêntica compartilhada por todos os nós. Isso permite que haja o paralelismo no tratamento dos dados por cada nó, o que em última instância permite a escalabilidade da rede.

\begin{figure}[htbp]
  \caption{\label{fig:holoblock}Diferença entre arquitetura cliente/servidor, \emph{blockchain} e \emph{holochain}}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/holoblock.png}
  \end{center}
  \legend{Fonte: \citeauthor{holobasics}.}
\end{figure}

De forma resumida, uma aplicação *Holochain* consiste de uma rede de agentes que mantém uma *blockchain* própria que serve como fonte primária de suas transações, e que são pareadas e verificadas em um espaço compartilhado que implementa uma *DHT* (*Distributed Hash Table* - tabela *hash* distribuída) validadora, *sharded*\footnote{Um \emph{shard} (fragmento) de banco de dados é uma partição horizontal de dados que ocorre com a criação de diversas instâncias fisicamente separadas e distribuídas do banco de dados. Um particionamento horizontal é a separação das informações de um banco de dados em linhas, permitindo que cada instância tenha apenas um subconjunto de todos os elementos guardados na base de dados \cite{shard}.}(fragmentada), monotônica\footnote{\emph{dedução monotônica} é a propriedade que vários sistemas lógicos possuem de a partir de uma hipótese, poder ser livremente adicionadas novas suposições, sem que haja uma violação da hipótese original. De forma simplificada, significa dizer que a incorporação de um novo conhecimento não pode reduzir o conjunto do que é conhecido}, em que vários nós garantam que os dados armazenados na *DHT* obedeceram as regras de validação, além de fornecer a informação sobre a origem do dado \cite{holo2}.

Incluir um novo registro na *DHT* envolve encontrar um nó responsável por cuidar daquele registro, que ao receber o dado do estado de transição, informa aos seus nós vizinhos. Cada um dos nós vizinhos ao receber essa informação do nó responsável pelo dado, deve validá-lo utilizando a lógica da aplicação. Assim, há diversas cópias, igualmente validadas e como a rede é criada para ter os dados uniformemente distribuídos, há a garantia de que o dado seja rapidamente encontrado\footnote{A \meph{DHT} utilizada pela \emph{Holochain} é baseada na \emph{Kademlia}\cite{kademlia}, e o processo de encontrar um nó vizinho é exemplificado pela figura \ref{fig:kademlia}, em que cada nó armazena um subconjunto limitado de nós, chamados de nós vizinhos, e quando precisam encontrar um nó que não seja seu vizinho, é feito uma busca de vizinhos de vizinhos. A parte superior da figura mostra a quantidade de vizinhos que foram perguntados antes de se encontrar o nó desejado.}, mesmo quando o nó original do dado estiver indisponível \cite{holo2}.

\begin{figure}[htbp]
  \caption{\label{fig:kademlia}Processo de procura de um nó na \emph{DHT Kademlia}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/kademlia.png}
  \end{center}
  \legend{Fonte: \citeauthor{kademlia}.}
\end{figure}

Diferentemente da aplicações descentralizadas construídas utilizando tecnologia *blockchain*, a *Holochain* não sofre de problema de escalabilidade, se tornando cada vez mais eficiente a medida que o número de nós aumenta, já que a rede divide o trabalho entre os nós. Por conta dessas caracterísitcas, a *Holochain* se mostra uma excelente opção para aplicações descentralizadas que são utilizadas em grande escala e que não precisam estar com seus dados o tempo todo sincronizados.

A tabela \ref{tab:holo} traz uma breve comparação sobre algumas características da *Holochain* em relação a tecnologias *blockchain*.

\begin{table}[htbp]
\caption{\label{tab:holo}Comparativo entre \emph{blockchain} e \emph{Holochain}.}
\begin{tabular}{m{0.2\linewidth} | m{0.4\linewidth} | m{0.4\linewidth}}
\toprule
                                  & \textbf{Blockchain}                                                                                                                                            & \textbf{Holochain}                                                                                                                                                                                                   \\ \hline
\textbf{Abordagem}                & Centrado em dado, um único conjunto de dados global e uma realidade compartilhada por todos os nós                                                             & Centrado em agente, permite os nós atuarem independentemente ou em estreita colaboração, e então compartilhar realidades independentes e evolutivas sobre os dados e que chegam a um acordo ao longo do tempo       \\ \hline
\textbf{Consumo Energético}       & Bitcoin consome mais que 0,1\% de toda energia elétrica para prover menos de 0,0001\% do processamento financeiro mundial                                      & Como nenhuma mineração é necessária, não é necessário possuir uma CPU ou GPU especializada, tornando factível rodar os nós da rede em computadores com baixo poder de processamento, ou mesmo em celulares       \\ \hline
\textbf{Volume de Transações}     & Neo, uma \emph{blockchain} bastante performática, processa mais de 1000 transações por segundo. Bitcoin e Ethereum processam menos de uma centena por segundo         & Expectativa de ultrapasse o número de transações suportado pela rede VISA, que tem um máximo de 56000 transações por segundo}                                                                                      \\ \hline
\textbf{Escalabilidade}           & Mesmo desconsiderando a Prova de Trabalho, há sérios problemas de limite de escalabilidade pelo fato de requerer a sincronia entre muitos nós da rede        & Utilizando uma DHT compartilhada, o volume de transação carregada por nó se torna menor a medida que a rede cresce                                                                                                  \\ \hline
\textbf{Plataforma}               & Atualmente só pode funcionar de forma efetiva em computadores especializados para mineração                                                                    & Pode ser executado em Raspberry Pi ou em um smartphone                                                                                                                                                               \\ \hline
\textbf{Eficiência Computacional} & O(\(n \times m\)) para validar transações                                                                                                                      & \(O(\frac{n}{m \times log m})\) para validar transações                                                                                                                                                              \\ \hline
\textbf{Efeito de consenso}       & Algoritmos de consenso centralizam o poder e a Prova de Trabalho resulta em um crescimento computacional exorbitante para um conjunto de dados finito        & Não possui mineração nem consenso. Não possui vulnerabilidade ao ataque da maioria. Apenas é necessário confiar no código que roda em seu nó e validar o histórico dos nós com que se comunica
\end{tabular}
\legend{Fonte: \citeauthor{holo3}}
\end{table}

#### Arquitetura da Holochain

A *Holochain* possui conceitos que se relacionam as células dos seres vivos, em que cada aplicação *Holochain* (hApp) possui um DNA, que representa a regra de negócio da aplicação. O DNA é composto de vários *Zomes*, originário de *chromossome* (cromossomo), que seriam equivalentes a módulos da aplicação ou micro-serviços. Esses *Zomes* se comunicam entre si através de uma camada de comunicação externa onde pode ser criada interfaces de aplicação e interfaces gráficas e uma camada de comunicação entre as diferentes instâncias do *hApp*, denominada condutor (fig. \ref{fig:holoarchitecture}).

\begin{figure}[htbp]
    \caption{\label{fig:holoarchitecture}Arquitetura de uma aplicação Holochain (hApp).}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/holodna.png}
    \end{center}
    \legend{Fonte: \citeonline{holoarchitecture}.}
\end{figure}

O condutor possui a lógica responsável por fazer com que a instância da aplicação comporte-se como um nó da rede *Holochain* e se comunique com outras instâncias (nós) daquela mesma aplicação, sendo que cada *hApp* possui uma rede privada própria que possibilita que uma instância de um *hApp* se comunique com outra instância sem precisar interagir com nós da rede que não possuam aquela aplicação. Dessa forma, a *Holochain* é uma coleção de redes privadas, sendo cada rede responsável por coordenar as instâncias de um *hApp*.

Cada nó da rede possui uma instância da aplicação com seus próprios dados, e essa instância se comunica com as demais intâncias na rede (fig. \ref{fig:happnet}). Os dados de cada nó são responsabilidade do próprio nó, porém, são validados segundo o DNA da aplicação por outros nós, sempre verificando se os dados condizem com as regras especificadas no DNA. Caso seja identificado uma fraude na rede, o nó fraudulento é inserido numa lista de nó não confiável, tendo essa informação espalhada pela rede até o ponto em que ninguém na rede confia mais no nó fraudulento.

\begin{figure}[htbp]
    \caption{\label{fig:happnet}Aplicação \emph{Holochain} (\emph{hApp}) comunicando-se na rede \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=0.5\textwidth]{imagens/happnet.png}
    \end{center}
    \legend{Fonte: \citeonline{holoarchitecture}.}
\end{figure}

Essa arquitetura da *Holochain* é denominada arquitetura orientada a agentes, o que significa que é um sistema distribuído que dá ao agente (nó participante da rede) o controle sobre sua identidade e os dados criados por ele, utilizando um sistema de reconhecimento de agentes baseado em criptogragia de chaves públicas e privadas, o que pode ser comparado ao que ocorre com o sistema de controle de versionamento Git.

Para exemplificar a *Holochain*, podemos utilizar a metáfora de uma rosquinha, em que a massa da rosquinha representa a infraestrutura da *Holochain*, a cobertura representa a aplicação, podendo haver diversas aplicações implementadas com a *Holochain*, e em que o *agente* da rede que utiliza a aplicação está contido no interior da rosquinha, se comunicando com o resto da rede através das aplicações *Holochain*, como mostrado na  figura \ref{fig:holochainexplanned}. Cada outra rosquinha na imagem representa uma outra instância de uma mesma aplicação, que se comunicam uma com a outra.

\begin{figure}[htbp]
  \caption{\label{fig:holochainexplanned}\emph{Holochain}: rede centrada no agente.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/holochainexplanned.png}
  \end{center}
  \legend{Fonte: \citeonline{holobasics}.}
\end{figure}

O espaço de comunicação externa a rosquinha, representa a rede *Holochain* que implementa uma DHT, porém, o espaço interno a cada rosquinha representa o agente que possui informações e dados distintos sob seu controle e que são manipulados internamente através das regras implemenetadas na aplicação.

Para que a comunicação entre os nós seja possível, a *Holochain* utiliza uma rede DHT em que cada nó conhece um conjunto limitado e definido de outros nós vizinhos, e em que um nó pergunta ao outro e através do *hash* único do arquivo é possível determinar se o nó perguntado possui aquela informação, e caso não a tenha, consiga-se determinar qual nó possui a maior probabilidade de ter aquela informação ou conhecer o nó que possua aquela informação \ref{fig:dht}. Sendo assim, a *Holochain* possui uma rede de descoberta que se comporta de maneira logarítma, ou seja, a adição de novos dados não impacta de forma significativa o tempo que demora para um nó qualquer encontrar um dado qualquer.

\begin{figure}[htbp]
  \caption{\label{fig:dht}Exemplificação da descoberta de nós na rede DHT da \emph{Holochain}.}
  \begin{center}
  \includegraphics[width=0.5\textwidth]{imagens/dht.png}
  \end{center}
  \legend{Fonte: \citeonline{holobasics}.}
\end{figure}

Para garantir que o dado pertence ao nó correspondente e também para garantir que o dado não foi adulterado, sempre que uma instância do *hApp* cria um registro, ele assina eletrônicamente o registro público com sua chave privada, ele armazena-o internamente e também o compartilha com a rede, conforme mostrado na figura \ref{fig:regholo}.

\begin{figure}[!ht]
    \caption{\label{fig:regholo}Processo de registro de dados públicos na \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=0.8\textwidth]{imagens/regholo.png}
    \end{center}
    \legend{Fonte: \citeonline{holodht}.}
\end{figure}

Caso o registro seja privado, ele realiza a assinatura eletrônica do registro, mas ao invés de compartilhar todo o registro, ele apenas compartilha o cabeçalho do mesmo, guardando o registro internamente apenas, conforme a figura \ref{fig:regholopriv}. Esse processo permite que o dado fique indisponível para os outros nós, mas também permite que sempre que o nó precise compartilhar esse dado com um nó específico, esse nó consiga verificar que o dado compartilhado realmente existe, pertence ao nó que o compartilhou, e que não foi adulterado \cite{holodht}.

\begin{figure}[!ht]
    \caption{\label{fig:regholopriv}Processo de registro de dados privados na \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/regholopriv.png}
    \end{center}
    \legend{Fonte: \citeonline{holodht}.}
\end{figure}

### Blockstack

*Blockstack* é uma tecnologia com o foco em prover uma infraestrutura para o desenvolvimento de aplicações descentralizadas seguras e privadas em que a camada de *blockchain* lida com o gerencimaneto de estado e lógica de negócio mínimos, provendo ao usuário final dessas aplicações o controle total sobre suas identidades e dados digitais \cite{blockstack}.



# Aplicação a um Problema Real

## Mercado Livre

# Implementação

## Processo de Desenvolvimento de Aplicações Descentralizadas

## Resultados e Discussões

# Conclusão

# Projeto

## Oportunidade de Negócio

O crescente endividamento do governo americando \ref{fig:usdebt} em conjunto com a diminuição do poder de compra do dólar \ref{fig:usprice} serve como um indicativo de preocupação sobre uma das principais características necessárias a uma moeda: a reserva de valor \textcolor{red}{[citar Mises]}.

\begin{figure}[htbp]
    \caption{\label{fig:usdebt}Dívida do governo dos EUA entre 1942 e 2019.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/usdebt.png}
    \end{center}
    \legend{Fonte: \citeauthoronline{usdebt}.}
\end{figure}

\begin{figure}[htbp]
    \caption{\label{fig:usprice}Poder de compra do dólar entre 1913 e 2019.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/usprice.png}
    \end{center}
    \legend{Fonte: \citeauthoronline{usprice}.}
\end{figure}

Hayek \textcolor{red}{[citar apropriadamente essa afirmação]} atribui o constante endividamento do governo e a alteração artificial da taxa de juros pelo governo como fatores precursores para grandes crises e depressões mundiais como as que ocorreram em 2007-2008.

O Bitcoin foi criado com a intenção de prover uma moeda decentraalizada que não pudesse ser inflacionada \textcolor{red}{ [definir o conceito de inflação segundo a escola austríaca de economia][citar Satoshi Nakamoto e o seu White Paper] } de forma descontrolada, tendo um limite de 21 milhões de unidades, as quais não podem ser superadas.

Essa característica provê ao Bitcoin uma vantagem sobre o dólar e outras moedas fiduciárias \textcolor{red}{[definir o que é uma moeda fiduciária]}, principalmente em crises e em momentos de grande depreciação das moedas.

Aliado a isso, o crescente aumento do uso de comércio eletrônico para a compra de produtos e serviços \textcolor{red}{[citar dados sobre o crescimento do comércio eletrônico]} cria um ambiete propício para a criação de uma plataforma que una o comércio eletrônico com um meio de pagamento que não sofra interferência de nenhum governo ou entidade central.

Além da desvalorização das moedas fiduciárias, os govenos também coletam impostos sobre os produtos comercializados e impedem que determinadas transações sejam realizadas, por considerá-las ilegais ou legais apenas após serem fiscalizadas por orgãos regulatórios.

O caráter lícito ou ilícito de uma transação pode ser inspecionado sobre a ótica da lei vigente de um país (juspositivismo \textcolor{red}{[definir o que é juspositivismo]}), ou através de meios éticos \textcolor{red}{[definir que a ética é a busca pelo certo e errado]}, derivando a lei através do jusnaturalismo)\textcolor{red}{[explicar]} ou jusracionalismo)\textcolor{red}{[citar a ética argumentativa de Hans-Hermann Hoppe]}.

Olhando pela ótica jusnaturalista, pode-se chegar a conclusões de que tanto o imposto como a proibição e interferência do governo ou qualquer outro agente central em uma transação é inválida, e caracteriza-se como uma violação da liberdade individual dos indivíduos.

Partindo do princípio que não estamos discutindo a licitude dos atos pela ótica da lei do estado e sim pela ótica da lei natural )\textcolor{red}{[citar Frederic Bastiat (a lei foi corrompida)]}, podemos focar em como criar esse ambiente de livre mercado em que a liberdade dos indivíduos é soberana.

Embora existam plataformas de comércio eletrônico na chamada *deep web* )\textcolor{red}{[explicar o que é deep web]} que passam despercebidas das ações governamentais, há uma carência de uma plataforma de comércio eletrônico amplamente acessível e que utilize de moedas não controladas por governos e que sejam resistentes a agentes centrais.

Até pouco tempo atrás, tais plataformas eram inconcebíveis de serem criadas, porém, com o advento do Bitcoin, da *blockchain* e dos chamados *smart contracts* )\textcolor{red}{[definir o que é blockchain e smart contracts]}, passou a ser viável tais plataformas.

Porém, as plataformas existentes são desconhecidas ou inexistentes. Tal constatação pode ser explicada, embora sem rigor técnico, pelo modelo de negócio de tais plataformas, que no geral, criam novos *tokens* \textcolor{red}{[explicar o que são tokens]} ao invés de se basearem nas criptomoedas já consolidadas do mercado, além de utilizarem da mesma *blockchain* do Bitcoin, que conforme mostrado na \textcolor{red}{figura X [citar dados de performance da blockchain]} não consegue escalar.

O problema de performance da *blockchain* é devido a necessidade de todos os agentes da rede terem que possuir o mesmo dado \textcolor{red}{[explicar melhor]}, assim, a adição de mais um nó na rede, não aumenta sua performance.

## Escopo da Aplicação

A aplicação conterá 3 Zomes:

- Zome de Usuário: responsável pelo registro do usuário, autenticação, perfil do usuário
- Zome de Produto: responsável pelo registro de produtos a serem anunciados, pesquisa e filtro de produtos
- Zome de Transação: responsável pelo sistema de carrinho de compras, pagamento e histórico de transações

### Funcionalidades do Sistema

- Cadastrar usuário
- Entrar com usuário
- Cadastrar produto
- Exibir produto
- Adicionar produto ao carrinho
- Comprar produto
- Ver histórico de compras
