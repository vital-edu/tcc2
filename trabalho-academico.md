# Introdução

A tecnologia é definida como o uso do conhecimento técnico e científico aplicado na transformação de ferramentas, processos e materiais. A utilização e aperfeiçoamento da tecnologia costuma resultar em uma facilidade maior em realizar tarefas, o que culmina em um maior grau de satisfação humana. Uma dessas tecnologias que revolucionou o mundo foi a *prensa de tipos móveis*, inventada pelo alemão Johannes Gutenberg por volta do ano 1450.

A prensa de tipos móveis tornou o processo de impressão mais rápido e barato, o que propiciou a disseminação da informação escrita levando a produção de livros em massa, servindo como base para a criação de uma sociedade mais dinâmica, comunicativa, colaborativa e com menos obstáculos ao acesso a informação.

A prensa de tipos móveis tornou a comunicação atemporal, através do registro de conhecimento e histórias em meios que pudessem ser consumidos posteriormente e sem a necessidade de um interlocutor, e o advento da *internet* conseguiu quebrar uma outra grande barreira, a distância. Agora, a informação não apenas é registrada para a posterioridade, mas também é transportada em questão de segundos para qualquer lugar do globo.

Embora a *internet* tenha tornado o acesso a informações mais fácil, amplo e dinâmico, ainda há um controle muito grande de agentes centrais, principalmente do governo, sobre o que um usuário pode fazer. A *internet* no seu estágio inicial representava a liberdade de acesso a informação de forma livre e irrestrita, porém a cada ano novas leis e regulações governamentais ameaçam essa característica fundamental da *internet* como o GDPR (*General Data Protection Regulation* - Regulação de Proteção de Dados Gerais), a ECPA (*Eletric Communications Privacy Act* - Lei de Privacidade das Comunicações Elétricas), a Digital Millennium Copyright Act, a CFAA (*Computer Fraud And Abuse Act* - Lei de Abuso e Fraude de Computador), as leis antitruste, e várias outras regulações mais específicas.

O presente trabalho não tem como objetivo esclarecer ou defender uma visão de livre mercado, porém, parte da premissa de que as liberdades individuais são naturais e absolutas, não necessitando de lei positivada para serem consideradas "certas". A discussão sobre o certo e o errado, quanto a criação e aplicação de leis, faz parte tanto do campo filosófico, no estudo sobre a ética (o estudo sobre o comportamento humano, refletindo sobre o que é o certo e o que é o errado), bem como do campo do direito, em que há um antagonismo entre o *jusnaturalismo* (visão jurídica de que a lei precede o homem, é universal, imutável e inviolável, devendo ser descoberta) e o *juspositivismo* (a visão de que a lei emana das autoridades que possuem o poder político de impô-las, modificá-las e re-interpretá-las a bel-prazer).

Se nos atermos ao *juspositivismo*, não poderemos questionar se as leis são certas ou não, e assim, nenhuma discussão será frutífera, porém, se entendermos que existe um ideal de certo, podemos buscá-lo e questionar se a lei escrita (positivada) é de fato correta.

E partindo do pressuposto de que a liberdade individual bem como a propriedade privada são invioláveis, independente da lei positivada, e também partindo do pressuposto de que a propriedade privada só existe para bens escassos, podemos então chegar a conclusão de que qualquer interferência estatal é prejudicial ao indivíduo. E que a tecnologia deve usar dos seus meios para garantir que agentes centrais, que podem ser nomeados muitas vezes como agentes autoritários, não consigam interferir nas liberdades individuais.

Nesse sentido, assim como a igreja detinha o poder sobre a produção textual e cultural devido a centralização da produção de livros em monastérios, o governo, hoje, detém uma forte influência sobre o que pode ou não pode ser feito e de que forma pode ser feito na *internet*, como as atrocidades que o governo fez e que foram reveladas pelo *WikiLeaks*, e a espionagem e quebra de privacidade que o governo faz constantemente, algumas das quais reveladas por Edward Snowden, sendo tanto ele quanto Julian Assange (fundador do *WikiLeaks*) considerados inimigos do estado e acusados de traição, e, devido ao monopólio da justiça pelo estado, e pelo próprio conflito de interesse do governo, ambos jamais terão um julgamento justo, e o governo, jamais será responsabilizado por nenhuma de suas ações autoritárias e sem limites.

Por conta dessa constante preocupação com o poder que agentes centrais detêm, e os dados que estão sob seu controle, tem aumentado o interesse na adoção de criptografias cada vez mais sofisticadas e de código aberto, e da adoção de outras tecnologias que tentem conter ou tornar nulo o poder estatal, ao menos no mundo digital, e tenta-se aumentar a capacidade das plataformas digitais de sobreviver à coerção de agentes centrais, e também criar alternativas para sistemas controlados atualmente pelo governo, como o sistema jurídico e financeiro, no mundo digital.

Assim, a tecnologia tem evoluído para prover uma *internet* cada vez mais resistente e livre, competindo com governos e empresas que não desejam que o usuário tenha total liberdade e responsabilidade sobre os seus atos digitais. E é neste contexto que está surgindo um novo paradigma na computação, o desenvolvimento de aplicações descentralizadas, que tentam solucionar problemas e preocupações como segurança da informação, garantia de confiabilidade no canal de comunicação, garantia de autenticidade dos dados, ponto único de falha, consenso de informação e, principalmente, tentam proteger uma rede de nós interligados de ataques vindos de agentes mal intencionados que tentem corromper, alterar, deturpar, atrapalhar ou destruir dados de uma rede de informação ou plataforma de serviços.

Este trabalho apresenta um estudo sobre o estado atual das tecnologias descentralizadas no âmbito do desenvolvimento de aplicações focadas no usuário final e que possuam uma experiência de uso similar as aplicações centralizadas existentes atualmente.

## Objetivos

Esse trabalho possui um objetivo geral que é alcançado ao se cumprir três objetivos específicos. Esses objetivos são descritos neste capítulo.

### Objetivo geral

O presente trabalho tem como objetivo verificar a viabilidade da utilização de tecnologias descentralizadas no desenvolvimento de soluções de sistemas virtuais que possam resolver problemas reais de usuários finais.

### Objetivos específicos

Para alcançar o objetivo geral, os seguintes objetivos específicos foram definidos:

1. Estudar a maturidade das tecnologias descentralizadas atuais;
2. Criar uma prova de conceitos utilizando tecnologias descentralizadas.
3. Verificar as particularidades do desenvolvimento em tecnologias descentralizadas;

## Estrutura do trabalho

O trabalho está estruturado em dois capítulos principais, o primeiro cumpre com o objetivo específico 1 ao descrever o conceito de aplicações descentralizadas, quais tecnologias descentralizadas estão iminentes atualmente e quais suas vantagens e desvantagens.

O segundo capítulo em sua primeira parte descreve o problema escolhido para a prova de contexto e como as tecnologias descentralizadas são aderentes à ele, cumprindo com o objetivo específico 2. Já a parte final do segundo capítulo conclui o objetivo específico 3 ao mostrar como problemas tradicionalmente resolvidos na engenharia de software podem ser abordados ao utilizar tecnologias descentralizadas e quais são os desafios envolvidos no processo.

Por fim, há um capítulo com as discussões finais em que está condensado as aprendizagens empíricas descobertas durante o desenvolvimento do trabalho, a conclusão chegada sobre o objetivo do trabalho e quais problemas e desafios permanecem abertos para serem abordados em trabalhos futuros.

# Aplicações descentralizadas

Este capítulo aborda os conceitos fundamentais das aplicações descentralizadas, suas características, tipos, os fundamentos teóricos por traz dessas tecnologias, suas limitações e por fim um breve estudo sobre as principais opções tecnológicas atuais no desenvolvimento de aplicações descentralizadas.

## Características das aplicações descentralizadas

\citeauthoronline{raval} classifica as aplicações de *software* com base no seu nível de centralização (fig. \ref{fig:apptypes}): aplicações centralizadas (fig. \ref{fig:apptypes}.a), caracterizadas como aplicações fornecidas ou controladas por apenas um agente ou organização; aplicações distribuídas (fig. \ref{fig:apptypes}.b), definidas como aplicações que possuem diversas replicas espalhadas geograficamente e que cooperam entre si para garantir consistência e disponibilidade de dados \cite{raval}; aplicações descentralizadas (fig. \ref{fig:apptypes}.c), em que cada nó opera de forma independente, autônoma e autossuficiente, e que portanto, necessita de um algoritmo de consenso para resolver disputas.

\begin{figure}[htbp]
  \caption{\label{fig:apptypes}Tipos de aplicações de \emph{software} utilizando o diagrama de Paul Baran.}
  \begin{center}
  \includegraphics[width=0.9\textwidth]{imagens/apptypes.png}
  \end{center}
  \legend{Fonte: \citeonline[p. 2]{baran}.}
\end{figure}

Essas classificações não são excludentes, sendo possível que uma aplicação seja ao mesmo tempo centralizada e distribuída, o que resolve problemas de disponibilidade, latência de rede, corrupção de dados, porém, não resolve problemas de ordens políticas, sejam eles internos ou externos. Os problemas políticos internos remetem a decisões administrativas tomadas por sócios, conselho diretor, e funcionários do alto escalão da empresa. Já os problemas políticos externos remetem a interferências do governo ou outras entidades com poder coercitivo de impor suas vontades. Os problemas políticos têm potencial de afetarem o usuário final da aplicação ao alterarem o comportamento da aplicação, sua disponibilidade, ou mesmo o nível de segurança e privacidade dos dados dos usuários.

\citeonline{raval} propôs que para que uma aplicação seja considerada descentralizada, e portanto, imune a centralização de poder, ela deva possuir as seguintes características:

1. Ter código aberto: para uma plataforma ser descentralizada, o código fonte da aplicação não pode estar a mercer de apenas um índivíduo ou grupo, e portanto deve estar publicamente disponível para qualquer usuário realizar a auditoria do código, impedindo que haja comportamentos maliciosos na aplicação ou que se desviem do seu propósito inicial. A disponibilização do código também permite que haja inúmeras cópias de segurança da aplicação e que qualquer um possa compilar e/ou executar a aplicação diretamente do código fonte, eliminando preocupações quanto a adulteração dos binários, que poderiam ser produzidos a partir de um outro código fonte (pemitindo a inclusão de brechas de segurança ou comportamentos maliciosos);

2. Possuir moeda interna: como não existe a propriedade definitiva da plataforma por ninguém, é preciso encontrar uma maneira de incentivar o desenvolvimento da plataforma por desenvolvedores e custear a infraestrutura da aplicação, e, para essa finalidade, normalmente são criados *tokens*\footnote{\emph{tokens}, segundo \citeonline{token}, são meios de trocas não reconhecidos por lei, emitidos por indivíduos privados ou empresas, e que são utilizados como se fossem dinheiro.} específicos para a plataforma que funcionam de forma similar a ações de empresas (títulos emitidos por sociedades anônimas), garantindo tanto poder de decisão sobre o rumo da empresa, bem como uma forma de captar investimento externo e premiar os fundadores quando ocorre a valorização financeira da organização.

3. Usar um algoritmo de consenso descentralizado: é o algoritmo de consenso descentralizado (que resolva o *Problemas dos Generais Bizantinos*\footnote{\emph{problema dos generais bizantinos}, \citeonline{byzantine} formalizaram a história fictícia de um exército bizantino acampado ao redor de uma cidade inimiga em que o exército é composto por diversas divisões, cada uma comandada por um general, e em que a comunicação entre os generais só pode ocorrer por meio de troca de mensagens entre si. Nesse problema os generais leais do exército devem utilizar um algorítmo que garanta que (i) todos os generais leais irão adotar o mesmo plano de ação, e (ii) um grupo pequeno de traidores e conspiradores não pode conseguir que os generais leais adotem um plano de ação ruim.}) que permitirá que nós independentes com resultados conflitantes consigam convergir para um único resultado e assim possa-se garantir que a rede funcione sem chegar nunca a um estado permanente de impasse (*deadlock*).

4. Não possuir ponto central de falha: aplicações descentralizadas, em teoria, não podem ser removidas ou derrubadas pois não possuem um único ponto de falha. Por funcionar em uma rede *peer-to-peer*\footnote{\emph{rede peer-to-peer} (p2p - ponto-a-ponto) é o nome que se dá a uma arquitetura de rede distribuída em que os participantes compartilham parte de seus recursos de \emph{hardware} (poder de processamento, capacidade de armazenamento, etc) para outros \emph{peers} (pontos, pares) diretamente, sem passar por entidades intermediárias. Esses recursos compartilhados são necessários para prover o serviço e/ou conteúdo oferecido pela rede, e cada participante dessa rede é ao mesmo tempo provedor e consumidor de recursos \apud{kellerer}{p2p}.}, todos os participantes da rede teriam que ser desligados simultaneamente para que a aplicação parasse de funcionar. E ainda assim, é facilmente possível que novos nós entrem na rede em uma situação dessa, evitando o seu desligamento permanente. Na prática, porém, isso só é possível quando há o interesse constante de diversos agentes em manter a rede funcionando.

Já para a \citeonline{blockstack}, as aplicações descentralizadas precisam possuir as características abaixo:

1. Usuários possuem a propriedade sobre seus dados: usuários detêm seus dados e escolhem quais aplicações podem ter acesso a eles. Os dados ficam criptografados com uma chave privada de propriedade dos usuário, que decripta os dados para a aplicação sempre que ela precisar consultar ou alterar seus dados.

2. Usuários possuem a propriedade sobre suas identidades: usuários são os únicos administradores de suas identidades, e, dentro de uma aplicação, eles devem ser distinguidos através de um identificador único sem que a aplicação tenha poder de revogar ou alterar a identidade do usuário. Além disso, o usuário deve ser capaz de criar quantas identidades ele achar necessário.

3. Usuários têm liberdade de trocar de aplicação: os dados e identidades do usuário são independentes da aplicação, sendo assim, o usuário pode escolher a qualquer momento revogar acesso de uma aplicação aos seus dados e conceder o acesso a outra aplicação. Portanto, o usuário será sempre livre para trocar de aplicação mantendo a propriedade sobre suas identidades e dados, inclusive tendo a possibilidade de gerenciar seus dados por conta própria sem a necessidade de utilizar aplicações de terceiros.

Além dessas três características principais, \citeonline{blockstack} cita outros dois componentes opcionais que uma aplicação descentralizada pode ter:

1. Contratos inteligentes: caracterizado como um estado de máquina replicável, algumas aplicações descentralizadas precisam garantir que cada nó da rede execute a mesma sequência de operações para que uma regra de negócio seja cumprida.

2. Dependência em *tokens* e/ou ativos infungíveis (que possui valor único, não podendo ser trocado por dinheiro): para incentivar desenvolvedores a utilizarem a aplicação e/ou para desincentivar o uso indiscriminado de recursos por usuários.

Além das caracterísiticas acima descritas, as aplicações descentralizadas, sejam elas quais forem, devem ser desenvolvidas utilizando robustas tecnologias criptográficas, pois ao se utilizar de uma rede distribuída, deve-se haver desconfiança total e permanente sobre as intenções de cada nó da rede, que poderá tentar adulterar ou utilizar de forma indevida os dados trafegados por ela. Por isso, os dados dos usuários devem ser sempre criptografados utilizando uma chave criptográfica privada em que apenas o usuário tenha a posse dela.

### Contratos Inteligentes
\label{subsec:smartcontract}

Algumas das tecnologias descentralizadas, por serem utilizadas na contrução de diferentes escopos de aplicações, precisam ter um mecanismo de definição de regras de negócio que também sejam descentralizadas e imutáveis, o que possibilita que diferentes *peers* (pontos, pares) tenham um consenso sobre o funcionamento de determinada aplicação executada na rede. Esse sistema de regras de negócio, imutáveis, e distríbuidas, foi nomeado como *smart contract* (contrato inteligente) \cite{smartcontract}, que, pela definição original, é a incorporação de cláusulas contratuais no *hardware* e/ou *software* que utilizamos, que tornem a violação do contrato onerosa, e, no melhor dos casos, proibitiva.

Para \citeonline{smartcontract}, contratos são a base para uma economia livre de mercado, e que por isso, é necessário que os mecanismos do mundo sejam construídos de madeira a criar contratos:

a. robustos contra vandalismo ingênuo;
b. robustos contra violações sofisticadas\footnote{É importante salientar, que um contrato inteligente não se propõe a lidar com um terceiro tipo de ataque, o vandalismo sofisticado, caracterizado como sendo o uso extensivo e desproporcional de força ou poder, tais como ataques militares efetuados por terceiros \cite{smartcontract}. Esse tipo de ataque é raramente utilizado nas relações de livre mercado, e quase invariavelmente são oriundos de uma alocação de recursos obtidos de forma coercitiva por governos ou entidades autoritárias.}.

\citeauthoronline{smartcontract} classifica a forma de seguração contratual em:

- reativa: ação tomada após a quebra de um contrato, como medidas físicas tomadas por agências de segurança, tais quais, prisão e confiscação de propriedade;
- proativa: ação tomada de forma a coibir a quebra de um contrato, como caixas fortes com mecanismos de autenticação que impeçam o acesso não autorizado a um bem de valor.

Nessas classificações, um sistema judicial estatal, bem como a polícia e empresas de seguros, são considerados uma segurança contratual reativa, que embora sejam efetivas, são onerosas e burocráticas, aumentando o custo de transação, o que produz produtos ou serviços mais caros. E por esse motivo, contratos inteligentes, que incorporam em si mecanismos proativos de segurança, oferecem um menor custo de transação e uma segurança suficiente para coibir a violação de contratos.

<!-- Com o surgimento do *Bitcoin*, criou-se a possibilidade de incorporar contratos inteligentes em *blockchain*, sendo a moeda *Bitcoin*, uma forma de contrato inteligente incorporado em *software*, já que a moeda em si não possui nenhum componente de segurança reativa, confiando completamente no poder da criptografia e do algoritmo de consenso para garantir que as regras, ou cláusulas, que definem o que é uma transação válida não sejam quebradas, e que qualquer tentativa de fraude da *blockchain* seja punida com a perda de tempo e recursos computacionais, e consequentemente recursos energéticos. -->


O desenvolvimento de aplicações descentralizadas que utilizam contratos inteligentes permitiu o surgimento de um novo modelo organizacional, o DAO (*Decentralized Autonomous Organization* - Organização Autônoma descentralizada), em que todas as regras de funcionamento da empresa, inclusive divisão de lucros e como é feito decisões de negócio da empresa, são codificadas em contratos inteligentes utilizando *blockchain*. Isso garante que se crie empresas com regras claras, imutáveis, e que haja a garantia de como a empresa vai funcionar durante toda sua existência.

Embora, aplicações descentralizadas sejam interessantes em contextos que envolvem a desconfiança em agentes centrais, é importante salientar que existem problemas intrínsecos relacionados ao uso de *blockchain* na construção de aplicações. Como \citeauthor{safesmart} constataram, o desenvolvimento de contratos inteligentes embora se assemelhe ao desenvolvimento tradicional, possui preocupações muito maiores quanto a segurança, além de não ser nem um pouco trivial.

De forma simplista, um código de contrato inteligente é invocado sempre que recebe uma mensagem, podendo haver vários pontos de entrada, sendo cada ponto de entrada uma função do código a ser executada. Ou seja, uma mensagem recebida é como a chamada de uma função, que deve retornar um resultado para quem enviou a mensagem após a mensagem ser processada pela função do contrato.

A figura \ref{fig:ethcode} mostra um exemplo simplório de contrato inteligente feito para um jogo  de pedra, papel e tesoura. Nesse exemplo, o contrato inicia com nenhum jogador e espera que jogadores iniciem o contrato informando a jogada que desejam fazer. Assim que os jogadores informam suas jogadas, o contrato verifica o ganhador e envia a recompensa para ele.

\begin{figure}[htbp]
  \caption{\label{fig:ethcode}Exemplo de contrato inteligente implementado na linguagem \emph{Serpent}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/ethcode.png}
  \end{center}
  \legend{Fonte: \citeauthor{safesmart}.}
\end{figure}

Em última análise, criar um contrato inteligente é um processo meticuloso e que envolve codificar máquinas de estado muitas vezes complexas, em que qualquer omissão de um estado de transição ou negligência em conferir o estado atual, pode causar problemas drásticos \cite{safesmart}, principalmente por serem, a princípio, imutáveis e envolverem contextos atrelados a manipulação de recursos financeiros.

O desenvolvimento de contratos inteligentes, assemelha-se então, muito mais ao desenvolvimento de *software* embarcado (em que o *recall*\footnote{\emph{recall} (devolução) é o termo usado para quando um lote inteiro de uma linha de produto já vendida apresenta defeitos de fabricação e a fabricante convida seus clientes a devolverem o produto seja para reparação do problema ou para troca, sem gerar custos para o cliente por esse serviço.} é indesejado e oneroso financeiramente), do que *software* evolutivo e incremental (em que a atualização do *software* é facilmente realizada e incentivada).

<!-- Outra preocupação recorrente em relação ao desenvolvimento de aplicações descentralizadas, é a utilização da tecnologia *blockchain*, que exige que um nó completamente engajado no processo de criação de novos blocos, deve processar cada transação e manter uma cópia completa do estado atual da *blockchain*. Embora isso garanta questões de segurança, neutralidade política e tolerância a falhas, isso tem um alto custo de escalabilidade. Inclusive, cada novo nó que entra na rede, em vez de deixá-la mais performática, acaba por tornar a rede mais fraca, pelo fato de a latência entre nós crescer de forma logarítmica a cada nó adicionado \cite{scale}.

Devido ao aumento do número de transações, e do tamanho total da *blockchain*, a *Prova de Trabalho* acaba por obrigar que os nós tenham cada vez mais capacidade de processamento e de armazenamento, o que pode culminar em um processo de centralização, em que apenas nós com maior infraestrutura conseguem participar da rede. Para exemplificar, \citeauthoronline{scale} relatou que em \citeyear{scale}, a *blockchain* do *Bitcoin* transacionou 7 transações por segundo, tendo na época, um limite teórico de 4000 transações por segundo; e a *blockchain* da *Ethereum* chegou a transacionar 15 transações por segundo.

Embora novas tecnologias e abordagens tenham sido implementadas no protocolo *Bitcoin*, assim como de outras criptomoedas, como a *Ethereum*, e o potencial de escalabilidade esteja aumentando ano a ano, é inegável que esse volume de transações por segundo é irrisório comparado com aplicações centralizadas e distribuídas, que conseguem lidar com milhares de transações por segundo, e que possuem capacidade de escalonamento de acordo com a demanda pelo serviço. -->

## A Necessidade de existência das aplicações descentralizadas

A *internet* surgiu como uma rede descentralizada, em que cada computador se conecta a outro computador, dando origem ao termo *World Wide Web* (Rede Mundial de Computadores), e por isso, desde o princípio até hoje, mantém-se como uma estrutura praticamente impossível de ser derrubada, e mesmo páginas *web* consideradas ilegais ou atividades que constantemente são vigiadas ou proibidas por governos, continuam a funcionarem e a estarem disponíveis, no que se denominou *deep web*\footnote{\emph{deep web} (\emph{internet} profunda) é o termo usado para designar a parte da \emph{internet} que não está acessível por meios tradicionais, tais como ferramentas de pesquisa. Segundo \citeauthor{deep}, estima-se que a \emph{deep web} seja 500 vezes maior do que a \emph{internet} de superfície, nome dado a \emph{internet} prontamente acessível por buscadores.}.

Porém, a *internet* comumente acessada pelos usuários, tornou-se cada vez mais centralizada, tendo empresas como Facebook, Google, Amazon, e Microsoft, um gigante volume de dados que são comercializados de forma indiscriminada ou sem o conhecimento de seus usuários. Casos de brechas de segurança ou roubo de informações também têm se tornado constantes e cada vez mais preocupantes, havendo apenas na década de 2010 quase 4 bilhões de registros de usuários roubados \cite{hacks}.

Não só questões de segurança das informações preocupam, mas também questões de privacidade, como o que aconteceu no caso da Cambridge Analytica, que coletou cerca de 87 milhões de dados de usuários do Facebook sem consentimento dos mesmos \cite{cambridge}, mostrando que até companhias gigantes e consolidadas como o Facebook, não podem ser confiadas.

Outro notório problema relacionado com aplicações centralizadas é a facilidade com que governos conseguem obter dados dos seus cidadãos, exigindo secretamente que empresas privadas entreguem informações ou implementem *backdoors*\footnote{\emph{backdoor} (porta dos fundos) é um método inserido de forma intencional no sistema, no algorítmo criptográfico ou no código da aplicação, que permite ignorar a autenticação ou outros controles de segurança de forma a possibilitar o acesso ao sistema ou dados contidos nesse sistema. \cite{backdoor}}(portas dos fundos), como no famoso caso do programa de vigilância do governo americano com codinome PRISM, que coletava dados eletrônicos de usuários de serviços do Google, Facebook, Apple, Microsoft, dentre outros, além de provedores de serviços de telecomunicações como AT&T, Verizon e Sprint \cite{prism1, prism2}.

Além do programa de vigilância PRISM, os governos tendem a realizar constantes violações de liberdades individuais, que são financiadas com dinheiro público, respaldadas por leis criadas pelo próprio governo, e demandadas de forma coercitiva sem possibilidade de serem contestadas. Um dos exemplos mais emblemáticos de violação de liberdades indivíduais, do monopólio do uso da força e do monopólio da justiça, foi o caso de Ross Ulbricht, um jovem pacífico que não cometeu nenhum crime violento e recebeu uma senteça de duas vidas mais quarenta anos de prisão, sem direito a liberdade condicional, por ter criado um site de comércio eletrônico que possibilitava a comercialização de drogas ilícitas e que utilizava criptomoedas como meio de pagamento. Ross Ulbricht foi condenado em um processo penal e investigativo repleto de indícios de violações de direitos individuais e da própria legislação norte-americana \cite{ross}.

Ross Ulbricht, mesmo sem ter cometido nenhum crime violento, recebeu uma pena maior do que o \emph{serial killer} Robert Bendella, que foi senteciado a uma vida de prisão sem liberdade condicional por ter assassinado 6 homens, e maior que a do chefão das drogas e assassino El Chapo, que foi sentenciado a uma vida e 30 anos de prisão sem liberdade condicional.

Embora o poder do estado não possa ser contestado ou combatido, principalmente por índividuos que são fortemente desconstruídos pela mídia e que portanto são ignorados pela grande população, as tecnologias fortemente embasadas em criptografia, tem o poder de impedir ou ao menos dificultar que agentes centrais tenham controle sobre os usuários, e com a evolução dessas tecnologias, talvez possamos alcançar uma *internet* verdadeiramente livre, segura, e com máxima privacidade, o que, como o caso de Ross Ulbricht exemplifica, não será facilmente aceito pelos governos estatais ou por empresas privadas que exploram os dados privados de seus usuários. As aplicações descentralizadas são mais um passo nessa direção.

## Bitcoin

Embora as tecnologias descentralizadas remetam a décadas passadas com o advento das redes *peer-to-peer* (ponto-a-ponto), foi apenas a partir do surgimento do *Bitcoin* que as aplicações descentralizadas ganharam força e começaram a incorporar conceitos de segurança baseados em criptografia, algorítmos de consenso e resolução de disputas, imutabilidade dos dados, e recompensas para participantes da rede a partir da geração de *tokens* de pagamento.

Embora não possa ser utilizado diretamente para a construção de aplicativos descentralizados (já que ele é por si só uma aplicação descentralizada e que lida apenas com o escopo de moeda digital), serviu como base para outras tecnologias descentralizadas que podem ser utilizadas na construção de aplicações de contextos diversos, generalistas e que se utilizam de uma arquitetura similar ou baseada no *Bitcoin*.

Portanto, é fundamental estudar a sua história e seu funcionamento para conseguir entender como outras tecnologias descentralizadas baseadas nele funcionam.

### A história por trás do Bitcoin

O *Bitcoin* teve sua história moldada por pequenos e progressivos avanços na área da criptografia. Portanto, é importante entender a contribuição de diferentes autores que culminaram no seu advento.

#### O problema da privacidade nas transações virtuais

Embora já houvessem soluções de pagamento envolvendo dinheiro virtual em \citeyear{blindsignature}, \citeauthoronline{blindsignature} preocupou-se com uma importante característica das transações no mundo real que não estava presente nas transações virtuais: a privacidade.

No mundo real, o dinheiro pode ser passado de Alice para Carlos sem que Bob ou qualquer outro agente saiba disso. Embora isso permita a utilização do dinheiro para fins ilícitos, essa característica também permite que os indivíduos possam realizar transações que caso fossem descobertas por terceiros lhe causariam constrangimento, humilhação, retaliação, e em último causo poderia servir como meio de coerção, repressão, censura e controle político por governos ou instituições privadas que tivessem o interesse de impedir a livre manifestação de opiniões e o direito a livre associação.

Com essa preocupação, \citeonline{blindsignature} descreveu as características que um sistema automatizado de pagamento virtual deveria ter:

1. Impossibilidade de terceiros determinarem o recebedor do pagamento, a data e hora que o pagamento foi realizado bem como a quantia que foi paga pelo indivíduo;
2. Capacidade dos indivíduos provarem que um pagamento foi efetuado ou determinar a identidade do beneficiário do pagamento sob circunstâncias excepcionais;
3. Capacidade de se negar o uso de meios de pagamentos reportados como roubados.

O sistema proposto baseava-se na utilização de assinaturas digitais e funcionaria da seguinte forma:

1. Um indivíduo, aqui chamado de Alice, utilizaria uma chave privada escolhida aleatoriamente e assinaria um documento digital;
2. Cada documento digital representa uma unidade de valor monetário;
3. Alice enviaria o documento digital assinado para um banco, aqui descrito como Bob;
4. Bob assinaria o documento recebido com sua chave privada e o devolveria a Alice;
5. Alice, com sua chave privada conseguiria verificar que o conteúdo do documento não foi alterado e que foi assinado por Bob. Caso fosse constatado uma fraude o processo seria interrompido;
6. Alice então teria um documento validado por Bob e poderia dar o documento posteriormente para o beneficiário do pagamento;
7. O beneficiário, aqui descrito como Carlos, enviaria o documento a Bob, que conseguiria verificar que a nota foi assinada com sua assinatura digital;
8. Bob então registraria que a nota foi utilizada e depositaria uma unidade de valor para o beneficiário. Caso a nota já tivesse sido marcada como utilizada, a operação seria interrompida, por ser uma fraude;

Com essa solução, Bob não conseguiria saber que Alice fez um pagamento para Carlos, já que o documento que Carlos apresentou a Bob poderia ter sido assinado por qualquer outra pessoa, e tampouco conseguiria saber a data do pagamento, já que Alice poderia demorar um tempo indefinido entre os passos 6 e 7.

A figura \ref{fig:blind-signature} ilustra o processo de assinatura do documento em alto nível e a figura \ref{fig:blind-signature-rsa} ilustra o processo utilizando o algoritmo Rivest–Shamir–Adleman (RSA).

\begin{figure}[htbp]
  \centering
  \caption{\label{fig:blind-signature}Exemplo em alto nível de uso de assinatura cega.}
  \includegraphics[width=1.0\textwidth]{imagens/blind-signature.jpg}
  \legend{Fonte: \citeonline{blindsignaturewiki}.}
\end{figure}

\begin{figure}[htbp]
  \centering
  \caption{\label{fig:blind-signature-rsa}Implementação da assinatura cega utilizando o algoritmo RSA.}
  \includegraphics[width=1.0\textwidth]{imagens/blind-signature-rsa.jpg}
  \legend{Fonte: \citeonline{blindsignaturewiki}.}
\end{figure}

#### O problema da dependência de um agente central

Embora o processo descrito por \citeonline{blindsignature} garanta que Bob não conheça o conteúdo do documento e por isso não consiga saber quem emitiu originalmente o documento, ele ainda requer que um agente central (Bob) registre as operações de entrada e saída de valor e garanta o valor monetário do documento, e por isso pode apenas ser considerado como uma camada de privacidade que complementa o sistema bancário vigente, trazendo o anonimato das operações transacionadas através de dinheiro em espécie para o mundo das transações virtuais.

Foi apenas em \citeyear{timestamp} que surgiu uma solução com potencial de resolver o problema da dependência de um agente central para registro de informações importantes. \citeonline{timestamp} pensando na facilidade em modificar e copiar documentos digitais, e no problema que isso causa ao tentar determinar quando um documento digital é criado ou modificado, criaram uma maneira de registrar documentos eletrônicos de forma a garantir a autenticidade, a data de registro, bem como a imutabilidade de seu conteúdo, e impossibilitando a adulteração dessas informações por quem os armazenassem.

Essa solução, que viria a ser conhecida como *blockchain*, consistia de um algoritmo de encadeamento de dados em que o elemento seguinte da cadeia é criado a partir de informações contidas no documento anteriormente registrado, e que seria armazenada e validado de forma descentralizada por seus utilizadores, garantindo que mesmo que um grupo de utilizadores tentassem corromper os dados, ou outros teriam como identificar a fraude.

A solução de \citeauthoronline{timestamp} foi concebida para funcionar com qualquer documento digital, independente do formato ou tamanho, e para garantir isso ele propôs o uso de uma família de funções criptograficamente segura e livre de colisões, mais conhecidas como funções *hash* (fig. \ref{fig:hash}).

\begin{figure}[htbp]
  \caption{\label{fig:hash}Exemplo de \emph{função hash}.}
  \begin{center}
    \includegraphics[width=0.5\textwidth]{imagens/hash.png}
  \end{center}
  \legend{Fonte: \citeonline{hashimage}.}
\end{figure}

A *função hash* garante que um arquivo de mesmo conteúdo, sempre gere um mesmo conjunto de caracteres (chamado de *hash do arquivo*, ou simplesmente *hash*) e que a probabilidade de dois ou mais arquivos diferentes produzirem o mesmo *hash* seja baixa o suficiente para ser desprezada. Com isso, arquivos gigantes podem ser reduzidos a poucos caracteres, facilmente armazenáveis e probabilisticamente únicos.

Qualquer adulteração de um documento gera um *hash* diferente, evidenciando uma tentativa de fraude do mesmo. Assim, se Alice pode registrar um documento *X* com Bob apenas aplicando uma *função hash F* conhecida no documento *X*, que geraria um *hash* *h* que deveria então ser armazenado por Bob.

Se Carlos, por exemplo, vier a suspeitar de que o arquivo *X* foi adulterado, bastaria ele usar a mesma *função hash f* no arquivo X e verificar se o *hash* produzido é o mesmo armazenado por Bob.

Porém, para garantir que a propriedade do documento X seja realmente de Alice, \citeauthoronline{timestamp} sugeriram o uso de assinaturas digitais.

Uma assinatura digital é equivalente a uma assinatura escrita, provendo uma maneira de produzir um documento digital cuja autenticidade pode ser verificada por qualquer um mas que não possa ser produzido por ninguém além do autor original.

A assinatura digital é possível através da utilização de um par de chaves *E* e *D* que possa ser utilizada em qualquer mensagem/documento *M*, possuindo as seguintes propriedades \cite{encdenc}:

1. *E* é uma função inversa de *D*;
2. Para cada mensagem *M*, *E(M)* e *D(M)* são fáceis de serem computados;
3. *E* é computacionalmente inviável de ser descoberto a partir de *D*;
4. *E* e *D* são computacionalmente fáceis de serem gerados a partir de uma chave *K*.

A propriedade 3 permite que a chave *D* possa ser exposta em meios públicos e acessíveis sem comprometer a chave *E*.

Através do uso do par de chaves *E* e *D*, \citeonline{encdenc} propôs que se Alice desejar enviar uma mensagem *M* para Carlos, ela deveria 'decriptar' a mensagem *M* usando a chave secreta *D\textsubscript{Alice}*, enviando para Carlos a mensagem *D\textsubscript{Alice}(M)*. Quando Carlos receber a mensagem *D\textsubscript{Alice}(M)*, ele poderá 'encriptá-la' utilizando a chave pública de Alice (*E\textsubscript{Alice}*) e ler o conteúdo original *M*.

A mensagem *D\textsubscript{A}(M)* deverá ser guardada para servir como prova de que Alice foi a autora da mensagem, já que qualquer pessoa que desconfie da autoria da mensagem apenas teria que usar a chave pública de Alice (*E\textsubscript{Alice}*) para produzir a mensagem *M*. Qualquer outra chave pública utilizada em *D\textsubscript{A}(M)* resultaria em um resultado completamente diferente de *M*.

Utilizando essa técnica se consegue averiguar a qualquer momento se um indivíduo assinou ou não um documento digital.

Além de identificar a autoria do documento também é importante armazenar a data e horário de criação ou modificação do documento, e \citeauthoronline{timestamp} para resolver esse problema sugeriram que o *hash* do arquivo deveria ser concatenado com o horário e data do registro e só então ser assinado com a chave *D* do autor do registro. Com isso, apenas com um *hash* pequeno poderia se registrar um documento com as informações de quando ele foi criado ou modificado e quem é o autor do documento.

Ainda assim, é necessário confiar em um agente central (Bob), que poderia facilmente ser corrompido por Carlos sem que Alice conseguisse provar a fraude. \citeauthoronline{timestamp} propuseram uma solução denominada *confiança distribuída*.

Nessa solução, haveria um gerador pseudoaleatório\footnote{\emph{gerador pseudoaleatório} é um algoritmo que usa \emph{bits} verdadeiramente aleatórios para gerar de forma determinística uma longa sequência de \emph{bits} \cite{pseudo}.} *G* disponível para todos os indivíduos que desejassem registrar documentos. Quando Alice desejasse registrar um documento, ela deveria gerar um *hash y* do documento, e usá-lo como *seed*\footnote{\emph{seed} (semente) é o nome que se dá a sequência de bits verdadeiramente aleatória utilizada no gerador pseudoaleatório.} para o gerador *G*, o que produzirá uma sequência de *bits* que podem ser agrupadas de maneira a forma um número *k* de *IDs*, conforme mostrado na equação \ref{eqn:g} \cite{timestamp}.

\begin{equation}
\label{eqn:g}
G(y) = (ID_{1}, ID_{2}, ..., ID_{k})
\end{equation}

Cada *ID* gerado corresponde a um identificador de um cliente (usuário desse sistema distribuído) e Alice deveria portanto enviar para cada um desses clientes uma requisição composta de seu próprio *ID* junto com o *hash y*. Cada cliente que recebesse essa requisição de Alice, deveria assinar a mensagem incluíndo o tempo *t* do início do processamento, conforme a equação \ref{eqn:s} e enviar o resultado de volta para Alice \cite{timestamp}.

\begin{equation}
\label{eqn:s}
s_{j} = \sigma_{j}(t, ID, y)
\end{equation}

O único requisito para essa arquitetura funcionar é haver uma lista pública de clientes disponíveis de maneira a ser possível interpretar o resultado de *G(y)* como um conjunto de *k* clientes prontos para serem requisitados.

Para resolver o possível problema de indisponibilidade de clientes \citeauthoronline{timestamp} afirmaram que bastaria a função *G* gerar um número suficientemente grande de *k* clientes de forma a garantir que haverá a disponibilidade de $k' < k$ clientes, sendo *k'* um número suficientemente grande de forma a garantir que seja improvável que a maioria dos clientes estejam ávidos por falsificar o *timestamp* do documento.

Com essa solução, \citeauthoronline{timestamp} elaboraram uma solução que embora tenha sido concebida para o registro de documentos digitais, poderia ser utilizada para criar um sistema de transações financeiras digitais livre de agentes centrais.

#### O ínicio do movimento dos Cypherpunks e das moedas digitais

Em 1992, Timothy May, um físico aposentado, temendo as ameaças e restrições que os governos ao redor do mundo poderiam impor sobre o acesso as informações, convidou um grupo de amigos à sua casa para discutir sobre privacidade e *internet* \cite{answertocash}.

Este grupo se auto nomeou *Cypherpunks* e em \citeyear{cyphermanifesto} lançou seu manifesto em que declara sua preocupação com a regulação da criptografia e cita sua intenção em criar uma moeda digital:

\begin{displayquote}[]

Nós, os \emph{Cypherpunks}, estamos dedicados a construir sistemas anônimos. Nós estamos defendendo nossa privacidade através da criptografia, com sistemas de encaminhamento de e-mails anônimos, com assinaturas digitais, e com dinheiro digital. \cite[tradução do autor]{cyphermanifesto}

\end{displayquote}

Em \citeyear{junkmail}, \citeauthoronline{junkmail} propuseram uma técnica que poderia ser utilizada por provedores de e-mail em que seria requerida a computação de uma função moderadamente difícil para quem decidisse enviar um e-mail, dificultando o envio de grandes quantidades de e-mails, o que tinha como intenção reduzir o número de *SPAMs* (e-mails indesejados).

\citeauthoronline{junkmail} chamaram essa função de *função de precificação*, e foi apresentada como uma alternativa as soluções que estavam sendo propostas na época, que incluíam a criação de uma lei que caracterizava o envio de e-mails não autorizados como contravenção penal; e a cobrança de impostos para cada e-mail enviado ou a partir de certo número de e-mails enviados por dia.

\citeonline{hashcash} propôs uma solução semelhante, e segundo o autor, sem ter o conhecimento do trabalho de \citeauthoronline{junkmail}. Essa solução foi denominada *Hashcash* e também foi idealizada para reduzir o número de *SPAMs*, além de ser uma forma de prevenir ataques DDoS (*Distributed Denial of Service* - Ataque Distribuído de Negação de Serviço).

Para \citeauthoronline{hashcash}, as funções de custo deveriam ser eficientemente verificáveis e não proverem vantagem para o servidor responsável por criar os desafios, já que caso contrário, o servidor teria um conflito de interesses e teria a possibilidade de utilizar essa vantagem para ganhos próprios.

Alguns dos diferenciais da função de custo *Hashcash* eram as alterações dos desafios a cada intervalo de tempo, o que evitaria a pré-computação de respostas; e o ajuste do custo computacional necessário para decifrar o desafio, o que permitiria a adaptação do nível do desafio de acordo com a demanda de requisições que o servidor enfrentava.

O *Hashcash* veio a ser conhecido como sendo um algoritmo *PoW* (*Proof-of-Work* - Prova de Trabalho) e foi aprimorado por \citeauthor{rpow} em \citeyear{rpow}.

O algoritmo de \citeauthoronline{rpow}, o RPOW (*Reusable Proof-of-Work* - Prova de Trabalho Reutilizável), recebia um *hashcash* e o trocava por um *token* *RPOW* que poderia então ser gasto para produzir um novo *token RPOW*. Cada *token RPOW* poderia ser utilizado apenas uma vez e gerava um novo *token*.

Como o *RPOW* garante o conceito de gasto único, é sempre criado inicialmente a partir de uma prova de trabalho, e dá origem a um novo *token* que pode ser novamente trocado, pode-se considerá-lo como o primeiro bem digital que utiliza algoritmos criptográficos com capacidade de servir como meio de troca, um grande passo para a criação de uma moeda digital.

\phantomsection
\label{bitgold}
Em \citeyear{bitgold}, \citeauthoronline{bitgold} expressou sua preocupação com o fato de o valor do dinheiro atualmente utilizado pela sociedade depender exclusivamente na confiança depositada em um agente centralizador e propôs a moeda *Bit Gold* que teria como características: uma dependência mínima em agentes centralizadores, armazenada de forma segura, transferível, e que pudessem ter sua autenticidade verificada \cite{bitgold}. \citeauthoronline{bitgold} se inspirou nas propriedades dos metais preciosos, principalmente o ouro para conceber a ideia do *Bit Gold*.

O *Bit Gold* funcionaria da seguinte forma:

1. Um *conjunto de bits*, denominado *desafio criptográfico* seria criado;
2. Alice, em seu computador, geraria uma *prova de trabalho* a partir do *desafio criptográfico* utilizando uma função criptográfica de referência;
3. A *prova de trabalho* contém uma *marcação temporal* de quando foi produzida. Essa *marcação temporal* seria registrada por qualquer ou mesmo vários serviços de *marcação temporal* que comprovariam a confiabilidade da data de criação da *prova de trabalho*.
4. Alice registraria a *prova de trabalho* junto com a *marcação temporal* em um serviço computacionalmente distribuído compatível com o *Bit Gold*. A partir de então, esse seria oficialmente um registro *Bit Gold*;
5. O último registro de *Bit Gold* provê o *desafio criptográfico* que servirá como insumo para a próxima *prova de trabalho*, que gerará o próximo registro de *Bit Gold*;
6. Para verificar que Alice é a proprietária de um registro de *Bit Gold*, Bob verificaria a cadeia de registros de *Bit Gold* em qualquer serviço de registro de *Bit Gold*;
7. Para averiguar o valor do registro de *Bit Gold*, Bob verificaria e verificaria o *desafio criptográfico*, a *prova de trabalho* e a *marcação temporal* do registro.

Como cada registro de *Bit Gold* está ligado ao próximo registro de *Bit Gold*, e esses registros estão registrados em diversos serviços distribuídos e independentes, entende-se que essa cadeia de registros, a *blockchain*, é inalterável.

\citeauthoronline{bitgold} destaca que todos os tipos de dinheiro já utilizados tem alguma forma de insegurança, desde falsificação à facilidade de roubo, mas que provavelmente a pior insegurança que um dinheiro possa ter é a inflação. E o *Bit Gold* seria uma solução de moeda que apresentaria em sua arquitetura essa segurança contra a inflação.

E em \citeyear{bitcoin}, \citeauthoronline{bitcoin}, um pseudônimo pertencente a um ou vários indivíduos até hoje desconhecidos, a partir das ideias e tecnologias já apresentadas, concebeu o *Bitcoin*.

Embora tenha sido inspirado na ideia de *blockchain* concebida por \citeauthoronline{timestamp} e nas moedas *b-cash*, *Hascash* e provavelmente na moeda *Bit Gold*, o *Bitcoin* apresentou com mais detalhes como uma *blockchain* poderia ser utilizada para criar um sistema eletrônico de registro de transações que nâo dependesse de nenhum agente central e que conseguisse garantir as características necessárias para tornar-se uma moeda *de facto*.

### Arquitetura do Bitcoin

\citeauthoronline{bitcoin} definiu o termo *moeda eletrônica* como sendo uma cadeia de assinaturas digitais \cite{bitcoin}, em que Alice transferiria uma quantia de dinheiro para Carlos assinando digitalmente o *hash* da última transação registrada junto com a chave pública de Carlos (fig. \ref{fig:transaction}).

\begin{figure}[htbp]
\caption{\label{fig:transaction}Registro de transação em uma cadeia de assinaturas digitais.}
\begin{center}
\includegraphics[width=1.0\textwidth]{imagens/transaction.png}
\end{center}
\legend{Fonte: \citeonline{bitcoin}.}
\end{figure}

Além do simples registro da transação, informando valor, pagador e recebedor, é necessário também que haja a garantia de que Alice ao ter transferido uma quantia de dinheiro para Carlos, não possa transferir essa mesma quantia para outra pessoa, ou seja, é necessário impedir o gasto duplo. Em um sistema tradicional essa verificação ficaria a cargo de um agente central que seria o responsável por verificar se uma transação pode ocorrer e de registrá-la em um livro-razão, que pode ser armazenada em bases de dados tanto físicas quanto digitais.

Mas a partir do momento que se dá a uma entidade ou indivíduo o poder de manipular transações, problemas de confiança surgem: será que o agente central não está usando esse poder para benefício próprio? Será que o agente central é capaz de garantir a segurança das informações que ele detém?

A criação de um livro-razão público resolveria o problema de gasto duplo sem a necessidade de um agente central, já que qualquer um poderia verificar se uma transação já foi feita antes de aceitar uma nova, porém a capacidade de qualquer agente poder registrar uma transação no livro-razão cria o *Problema dos Generais Bizantinos*.

#### O problema dos generais bizantinos

\citeauthoronline{byzantine} formalizaram em \citeyear{byzantine} o *Problema dos Generais Bizantinos*. Esse problema é apresentado por uma história fictícia de um exército bizantino acampado ao redor de uma cidade inimiga. O exército é composto por diversas divisões, cada uma comandada por um general, e a comunicação entre os generais só pode ocorrer por meio de troca de mensagens entre si.

O exército deve decidir por usar um plano de ação único, porém deve-se considerar que dentre os generais pode haver traidores. Assim, o problema é caracterizado por: \cite{byzantine}

i. Todos os generais leais devem adotar um mesmo plano de ação;
ii. Um grupo pequeno de traidores não pode conseguir que os generais leais adotem um plano de ação ruim.

Nesse problema teórico computacional, todos os generais leais farão o que o algoritmo implementado disser, porém, os traidores utilizarão qualquer outro algoritmo com o objetivo de chegar a uma ação considerada ruim para os interesses do exército.

Como \citeauthoronline{byzantine} explicitam, o algoritmo utilizado pelos generais leais devem garantir a condição (i) independente do que os traidores fizerem, e os generais leais não apenas devem chegar a um acordo sobre o que fazer, como também devem chegar a um acordo sobre um plano de ação razoável, ou em outras palavras, benéfico para o exército bizantino.

Para resolver o *Problema dos Generais Bizantinos* no contexto de registro de transações em um livro-razão público, é necessário considerar as seguintes características desse livro-razão:

1. O livro-razão pode ser escrito por qualquer um, ou seja, não existe um agente central que define quem pode escrever no livro-razão;
2. O livro-razão deve impedir o gasto duplo;
3. Todos os participantes não-fraudulentos devem concordar que o conteúdo do livro-razão é o correto e único aceito;

A terceira característica remete ao *Problema dos Generais Bizantinos*. A primeira característica se opõe a qualquer tipo de regulação centralizada, enquanto que a segunda característica garante que esse livro-razão possa ser utilizado como um sistema de transações financeiras confiável.

Para garantir a terceira característica, a simples votação entre os participantes, solução tradicional proposta por \citeauthoronline{byzantine}, não seria suficiente pois não há como impedir que novos participantes entrem no sistema, o que tornaria fácil a multiplicação artificial de agentes fraudulentos, que invariavelmente conseguiriam se tornar a maioria e consequentemente obteriam sucesso em fraudar o livro-razão.

Por isso \citeauthoronline{bitcoin} propôs a utilização de um algoritmo de prova de trabalho (*PoW - Proof of Work*) para registrar uma transação no livro-razão, inspirado pelo trabalho de \citeauthoronline{hashcash}. De forma simplificada, a prova de trabalho obriga que qualquer agente que queira escrever no livro-razão seja obrigado a calcular uma função *hash*, que é computacionalmente dispendiosa e cujo resultado é probabilisticamente difícil de ser o correto (apenas quem calcula um resultado correto consegue escrever no livro-razão).

Além do trabalho despendido para escrever uma transação no livro-razão, seja ela uma transação fraudulenta ou não, os agentes não-fraudulentos apenas confiarão no livro-razão mais extenso, ou seja, a única forma de enganar os participantes não-fraudulentos seria os fraudadores possuírem mais poder de processamento do que todos os participantes não-fraudulentos juntos. Quanto mais participantes não-fraudulentos entram neste processo de escrita concorrente, mais improvável de ocorrer torna-se uma fraude, e mais caro torna-se tentar fraudar o livro-razão.

Para que o livro-razão fosse público, distribuído, descentralizado e digital, \citeauthoronline{bitcoin} descreveu um sistema *peer-to-peer*\footnote{\emph{peer-to-peer} (p2p - ponto-a-ponto) é o nome que se dá a uma arquitetura de rede distribuída em que os participantes compartilham parte de seus recursos de \emph{hardware} (poder de processamento, capacidade de armazenamento, etc) para outros \emph{peers} (pontos) diretamente, sem passar por entidades intermediárias. Esses recursos compartilhados são necessários para prover o serviço e/ou conteúdo oferecido pela rede, e cada participante dessa rede é ao mesmo tempo provedor e consumidor de recursos \apud{kellerer}{p2p}.} em que as transações seriam registradas em blocos, e em que cada novo bloco dependeria do bloco anteriormente registrado (fig. \ref{fig:blockchain}), criando uma *blockchain*. Esse sistema teria as seguintes características:

\begin{figure}[htbp]
  \caption{\label{fig:blockchain}Arquitetura da \emph{blockchain}}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/blockchain.png}
  \end{center}
  \legend{Fonte: \citeonline{zheng2017overview}.}
\end{figure}

1. Novas transações deverão ser transmitidas para todos os nós (participantes) da rede;
2. Cado nó reúne as novas transações em um único bloco;
3. Cada nó tenta realizar uma prova de trabalho válida para o seu bloco;
4. Quando um nó encontra uma prova de trabalho válida ele transmite o bloco para todos os nós da rede;
5. Os nós da rede apenas aceitam o novo bloco se todas as transações contidas nesse bloco forem válidas e já não tiverem sido gastas;
6. Os nós expressam sua aceitação ao novo bloco trabalhando para criar o próximo bloco da *blockchain* usando o *hash* do bloco aceito como o *hash* anterior do bloco a qual estão trabalhando (fig. \ref{fig:prev-hash}).

\begin{figure}[htbp]
  \caption{\label{fig:prev-hash}O próximo bloco a ser criado deve conter o hash do último bloco aceito como válido.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/prev-hash.png}
  \end{center}
  \legend{Fonte: \citeonline{bitcoin}.}
\end{figure}

Se dois nós transmitirem versões diferentes do próximo bloco, ou seja, se forem criado dois blocos válidos ao mesmo tempo (um chamado de *U4* e outro de *B4*), os demais nós da rede sempre trabalharão em cima do primeiro bloco que receberem. Esse acontecimento causaria a criação de duas ramificações concorrentes da *blockchain*, uma contendo *U4* como último bloco, e outra contendo *B4* como último bloco (fig. \ref{fig:long-branch}). Porém, a partir do momento que uma dessas ramificações se tornar maior (em número de blocos registrados) do que a outra, todos os nós que estiverem trabalhando na ramificação menor automaticamente abandonarão essa ramificação em detrimento da ramificação maior \cite{bitcoin}.

\begin{figure}[htbp]
  \caption{\label{fig:long-branch}Disputa entre duas ramificações da \emph{blockchain}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/long-branch.png}
  \end{center}
  \legend{Fonte: \citeonline{zheng2017overview}.}
\end{figure}

Mesmo considerando um cenário probabilístico em que dezenas de ramificações concorrentes surjam simultaneamente, como é altamente improvável que haja sempre o mesmo número de nós trabalhando em cada ramificação, a *blockchain* sempre tenderá a longo prazo a se manter com apenas uma ramificação.

Como já discutido no *Problema dos Generais Bizantinos*, mesmo que um grupo de nós decida deliberadamente não obedecer esse algoritmo, eles apenas teriam sucesso em convencer os demais nós de que a sua ramificação fraudulenta da *blockchain* é a verdadeira, caso tivessem um poder de processamento maior do que a maioria dos nós não-fraudulentos.

Para que esse sistema seja viável é necessário que haja diversos nós, sendo que quanto maior for a quantidade de nós na rede, maior será a impossibilidade de fraudar a *blockchain*, por isso, \citeauthoronline{bitcoin} especificou que a primeira transação de cada bloco seria uma transação que cria unidades de *Bitcoin*\footnote{A primeira transação de cada bloco da \emph{blockchain} do \emph{Bitcoin} serve como uma recompensa para quem criou o bloco. Inicialmente a recompensa era de 50 unidades de \emph{Bitcoin} (BTC 50,00), e a cada 210 mil blocos gerados (o que leva aproximadamente 4 anos) a recompensa é reduzida pela metade. Até junho de 2019 essa recompensa era de 12.5 BTC \cite{dev-ref}.}, que passa a ser de propriedade do criador do bloco, sendo a única forma de criar unidades de *Bitcoin*. Isso remove completamente a figura de bancos centrais, que em moedas fiduciárias são responsáveis por emitir novas unidades de dinheiro.

#### Transações no protocolo Bitcoin

O *Bitcoin*, assim como o *Bit Gold* (ver p. \pageref{bitgold}) foi concebido com a ideia de imitar o padrão ouro, e por isso foi estipulado em seu protocolo que deverá ser emitido um máximo de 21 milhões de unidades de *Bitcoin*. E para que haja um incentivo para que participantes continuem adicionando blocos na *blockchain* mesmo quando o limite de 21 milhões de unidade for alcançado, também foi concebido em seu protocolo que cada transação processada paga uma taxa para o nó que registrou o novo bloco de transações na *blockchain* \cite{better}.

Para que seja permitido o registro de transações com frações de *Bitcoin*, cada transação (fig. \ref{fig:transaction-fraction}) é composta por entradas e saídas. Deve haver em cada transação uma ou mais entradas (isso permite que haja a junção de várias pequenas quantidades de *Bitcoins* para totalizar o valor a ser transferido para o recebedor) e uma ou duas saídas (uma para pagar o recebedor e outra para o troco, caso exista) \cite{transaction-guide}.

\begin{figure}[htbp]
  \caption{\label{fig:transaction-fraction}Composição de uma transação na \emph{blockchain}.}
  \begin{center}
  \includegraphics[width=0.85\textwidth]{imagens/transaction-fraction.png}
  \end{center}
  \legend{Fonte: \citeonline{bitcoin}.}
\end{figure}

\begin{figure}[htbp]
  \caption{\label{fig:transaction-ex}Exemplo de sequência de transações.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/transaction-ex.png}
  \end{center}
  \legend{Fonte: \citeonline{blockchain-guide}.}
\end{figure}

A figura \ref{fig:transaction-ex} mostra um exemplo de uma sequência de seis transações:

- Alice utiliza seus 10 mil *satoshis* na transação 0;
  - Bob recebe 40 mil *satoshis* de Alice;
  - 50 mil *satoshis* voltam para Alice como troco;
  - 10 mil *satoshis* ficam com o minerador\footnote{\emph{Minerador} é o dispositivo (nó) ou indivíduo que possuí esse dispositivo, que minera um novo bloco (cria um novo bloco na \emph{blockchain}) \cite{bitcoin-glossary}.} como taxa de transação\footnote{A taxa de transação é a diferença entre entrada e saída de uma transação, sendo um valor variável que depende do tamanho (em \emph{bits}) da transação.}.
- Bob gasta seus 40 mil *satoshis* na transação 1;
  - Carlos recebe 30 mil *satoshis* de Bob;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Carlos gasta seus 30 mil *satoshis* na transação 3;
  - Denis recebe 20 mil *satoshis* de Carlos e os mantém sem gastá-los;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Alice utiliza seus 50 mil *satoshis* na transação 2;
  - Eduardo recebe 20 mil *satoshis* de Alice;
  - 20 mil *satoshis* voltam para Alice como troco;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Eduardo gasta seus 20 mil *satoshis* na transação 4;
  - Fernando recebe 10 mil *satoshis* de Eduardo;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Alice gasta seus 20 mil *satoshis* na transação 5;
  - Gustavo recebe 10 mil *satoshis* de Alice;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Fernando e Gustavo gastam cada um 10 mil *satoshis* na transação 6;
  - Hélio recebe 10 mil *satoshis*, 5 mil oriundos de Fernando e 5 mil oriundos de Gustavo. Hélio não gasta os 10 mil *satoshis* que recebeu;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.

Cada *output* (saída) de uma transação é oriundo de um *input* (entrada) de uma transação anterior e só pode ser utilizado em uma única transação, o que garante que não haja gasto duplo. Um *output* que não vira *input* para outra transação é, portanto, um valor não gasto, sendo denominado neste cenário um *UTXO* (*Unspent Transaction Output* - Saída de Transação não Gasta).

\begin{figure}[htbp]
  \caption{\label{fig:publichash}Processo de Geração do \emph{Public Key Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/publichash.png}
  \end{center}
  \legend{Fonte: \citeonline{transaction-guide}.}
\end{figure}

Cada *UTXO* contém um valor em *satoshi* disponível para ser gasto e um *Public Key Hash*. O *Public Key Hash* de um *UTXO* também é conhecido como *Redeem Script Hash*, que é um *hash* produzido a partir da chave pública do proprietário do *UTXO* (fig. \ref{fig:publichash}). Quando o dono do *UTXO* desejar gastar seu *UTXO* ele deve utilizar sua chave privada junto com um *script* denominado *Full Redeem Script* que ao ser aplicado no *Public Key Hash* do *UTXO*, liberá-o para ser gasto em uma nova transação. O *Public Key Hash* é único para cada *UTXO* e apenas a chave privada que o originou é capaz de gastá-lo (fig. \ref{fig:output}) \cite{transaction-guide}.

\begin{figure}[htbp]
  \caption{\label{fig:output}Gasto de um \emph{Output}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/output.png}
  \end{center}
  \legend{Fonte: \citeonline{transaction-guide}.}
\end{figure}

\begin{figure}[htbp]
  \caption{\label{fig:block}Estrutura de um bloco da \emph{blockchain}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/block.png}
  \end{center}
  \legend{Fonte: \citeonline{zheng2017overview}.}
\end{figure}

O bloco (fig. \ref{fig:block}) armazenado na *blockchain* além de conter as transações nele registradas, contém \cite{dev-ref}:

- *Contador de Transações*: o número de transações registradas no bloco;
- *Versão do Bloco*: a versão das regras de validação ao qual o bloco obedece. Isso permite que o protocolo do *Bitcoin* evolua mantendo a compatibilidade com blocos antigos. A versão atualmente utilizada nos novos blocos é a versão 4;
  - Versão 1: introduzida no *Bloco Gênesis* da *blockchain*, em janeiro de 2009;
  - Versão 2: introduzida em setembro de 2012;
  - Versão 3: introduzida em fevereiro de 2012;
  - Versão 4: introduzida em novembro de 2015.
- *Time Stamp* (Marcação de Tempo): data e hora em que o bloco foi criado. Deve ser estritamente maior do que a média das marcações de tempo dos últimos 11 blocos da *blockchain*;
- *Hash do Último Bloco*: contém o *hash* do último bloco adicionado na *blockchain*. Isso permite que a partir de qualquer bloco consiga-se acessar o bloco anterior, característica comum de uma estrutura de dados simplesmente encadeada.
- *Merkle Tree Root Hash*: *hash* gerado a partir dos *hashes* de todas as transações registradas no bloco. Isso garante que qualquer alteração nas transações do bloco seja facilmente identificada e rejeitada por outros nós da rede, impedindo fraudes nas transações;
- *Nonce*: um número arbitrário utilizado para que seja possível realizar a prova de trabalho;
- *nBits*: é o valor limite a qual o resultado do algoritmo de prova de trabalho deve ser inferior para ser considerado válido.

O *Merkle Tree Root Hash* (fig. \ref{fig:hashtree}) é uma estrutura de dados em árvore em que os nós superiores são calculados a partir do valor dos nós inferiores. Isso garante que qualquer alteração no conteúdo dos nós inferiores seja facilmente identificada. Esse mecanismo permite que blocos antigos que já tiveram suas transações válidas por diversos nós possam ter suas transações descartadas pelos mineradores para reduzir espaço em disco mas sem comprometer o algoritmo de validação do bloco.

\begin{figure}[htbp]
  \caption{\label{fig:hashtree}Estrutura de um \emph{Merkle Tree Root Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/hashtree.png}
  \end{center}
  \legend{Fonte: \citeonline{bitcoin}.}
\end{figure}

No caso do protocolo do *Bitcoin*, o processo de formação do \emph{Merkle Tree Root Hash} segue os seguintes passos (fig. \ref{fig:merkle}) \cite{dev-ref}:

1. As transações são ordenadas seguindo algumas regras\footnote{a transação \emph{coinbase}, transação responsável por criar bitcoin e recompensar o minerador, é sempre a primeira transação, e as demais transações devem ser ordenadas de forma a garantir que as transações de saída (\emph{UTXO}), transações não gastas, sejam posicionadas antes de outras transações no mesmo bloco em que essa mesma transação seja gasta como entrada de uma transação.};
2. É gerado o *hash* de cada transação a partir do *id* da mesma e utilizando o algoritmo *SHA256*;
3. Os *hashes* são agrupadas em pares, caso sobre um *hash* sem um par, ele é duplicado;
4. Os *hashes* dos pares são concatenados e novamente é aplicado o algoritmo *SHA256* para gerar um novo *hash*;
5. Os passos 3 e 4 é repetido até que sobre apenas um *hash*, esse *hash* é denominado \emph{Merkle Tree Root Hash}, e é então guardado no cabeçalho do bloco.

\begin{figure}[htbp]
  \caption{\label{fig:merkle}Exemplo de Formação do \emph{Merkle Tree Root Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/merkle.png}
  \end{center}
  \legend{Fonte: \citeonline{dev-ref}.}
\end{figure}

Um bloco só pode ser inserido na *blockchain* caso o minerador conclua a prova de trabalho, que, no protocolo do *Bitcoin*, é realizada aplicando a função *hash SHA256* no *time stamp* e no *nonce* do bloco, porém, o *hash* resultante só será aceito caso ele tenha um valor estritamente inferior ao especificado no campo *nBits*. Caso o *hash* gerado seja igual ou superior ao *nBits*, ele deve ser descartado, como mostrado na figura \ref{fig:hashcalc}.

\begin{figure}[htbp]
  \caption{\label{fig:hashcalc}Cálculo da Prova de Trabalho.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/hashcalc.png}
  \end{center}
  \legend{Fonte: \citeonline{surveyblockchain}.}
\end{figure}

Como a *função hash* produz um resultado imprevisível, a única forma de achar um resultado que satisfaça essa condição é através de força bruta. Porém, é importante salientar que uma vez encontrado um *hash* que satisfaça a condição, qualquer outro nó pode facilmente verificar se a solução encontrada é verdadeira. Sendo assim, a prova de trabalho é, com o perdão da redundância, trabalhosa porém facilmente verificável.

Pelo fato de a função *hash* sempre produzir o mesmo resultado quando aplicada a um mesmo valor, o *nonce* deve ser incrementado sempre que a tentativa de produzir um *hash* válido falhar. Em último caso, caso todas as tentativas possíveis falhem em produzir um *hash* válido, o *time stamp* pode ser atualizado para que se continue fazendo novas tentativas \cite{surveyblockchain}.

O *nBits* foi especificado para ser um valor variável, permitindo equilibrar a dificuldade de se encontrar um resultado válido. Ou seja, quanto maior for o valor do *nBits*, probabilisticamente menos tentativas serão necessárias para que se encontre uma solução para a prova de trabalho, e quanto menor ele for, probabilisticamente mais tentativas serão necessárias para encontrar uma solução \cite{dev-ref}.

Sempre que 2016 blocos são adicionados à *blockchain*, a rede de nós calcula quanto tempo se passou entre a criação do primeiro e do último bloco desses 2016 blocos e então o *nBits* é recalculado. O tempo ideal estipulado pelo protocolo é que demore exatamente 1.209.600 segundos (duas semanas) para que 2016 blocos sejam gerados. Caso tenha se demorado mais do que duas semanas para produzir os 2016 blocos, o valor do *nBits* é diminuído, e caso tenha-se demorado menos do que duas semanas, o valor do *nBits* é aumentado.

Essa característica de alterar o *nBits* para garantir que a quantidade de blocos gerados em duas semanas seja, em média, sempre igual, permite que o protocolo possa ser utilizado mesmo com o aumento da capacidade de processamento da rede. Quanto mais poder computacional for inserido na rede, mais difícil se tornará de calcular a prova de trabalho, sendo o inverso também verdade.

### O bloco gênesis

O primeiro bloco de *Bitcoin*, o Bloco Gênesis, foi minerado em 2009 pelo próprio \citeauthoronline{bitcoin}, sendo incorporado na *transação coinbase*\footnote{\emph{transação coinbase} é o nome dado a primeira transação de cada bloco que, como já discutido no texto, serve como recompensa para quem minerou o bloco. A \emph{transação coinbase} possui um campo de 100 bytes denominado \emph{coinbase script} que pode ser utilizados arbitrariamente pelo minerador sem que o protocolo \emph{Bitcoin} seja violado.} do bloco, o texto **The Times 03/Jan/2009 Chancellor on brink of second bailout for banks** \cite{genesis} em referência a uma manchete do jornal londrino Times sobre a falha do governo britânico de estimular a economia. A figura \ref{fig:times} mostra uma foto da edição do jornal da qual a frase foi retirada.

\begin{figure}[htbp]
  \caption{\label{fig:times}Foto da Edição de 03 de janeiro de 2009 do Jornal \emph{The Times}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/times.png}
  \end{center}
  \legend{Fonte: \citeonline{timesimg}.}
\end{figure}

O *Bitcoin* foi criado para se tornar uma moeda descentralizada e livre do poder estatal, e o texto publicado no *Bloco Gênesis*, bem como o fato do *Bitcoin* ter sido lançado em meio a crise financeira que começou em 2008, demonstra o seu objetivo de ser uma moeda concorrente a todas as moedas fiduciárias atualmente em circulação.

O livre mercado só é plenamente possível em um ambiente livre de coerção, em que os indivíduos se sintam livres para realizar trocas voluntárias e que não possam ser ameaçados ou inibidos por forças centralizadoras. O uso de moedas fiduciárias em espécie permite que transações livre de interferências estatais ocorram, porém, na era da conectividade em tempo real é necessário que haja uma moeda digital que garanta ou ao menos melhore a privacidade dos indivíduos que desejem realizar trocas voluntárias.

\clearpage

## As tecnologias descentralizadas da atualidade

O \citeonline{coin360} informa que há 3368 criptomoedas em circulação, enquanto que o \citeonline{coinmarketcap} reporta 857. A grande maioria das criptomoedas não suportam a criação de aplicações descentralizadas, e, justamente pelo gigantesco número de criptomoedas em circulação, se tornou inviável, neste trabalho, analizar todas as tecnologias *blockchains* disponíveis e selecioná-las através de um método científico e objetivo que filtrasse as tecnologias capazes de prover infraestrutura na criação de *dApps* (*decentralized applications* - aplicações descentralizadas).

A plataforma de indexação de aplicações descentralizadas \citeauthoronline{dapp}, elaborou um relatório que reuniu importantes informações sobre *dApps* referentes ao ano de 2019. Segundo esse relatório, há 2217 *dApps* ativas ao final do ano de 2019, sendo que 1445 foram criadas no ano de 2019. Ao todo, essas aplicações possuem 3,11 milhão de usuários ativos e transacionaram um volume de 10,9 bilhões de dólares, o que mostra a forte demanda por tais aplicações (veja a tabela \ref{tab:dapps-report}). Porém, só em 2019, embora tenha sido criadas 1445 *dApps*, outras 1365 *dApps* foram abandonadas\footnote{as aplicações são consideradas abandonadas quando não ocorre nenhuma transação na aplicação em um período de 30 dias} \cite{dapp}, o que também mostra que o ambiente de aplicações descentralizadas ainda está em um estágio imaturo e instável.

\begin{table}[htbp]
\centering
\caption{\label{tab:dapps-report}Aplicativos Descentralizados por tecnologia \emph{Blockchain} - Resumo de 2019 por \citeauthoronline{dapp}.}
\begin{tabular}{@{}lccccccc@{}}
\toprule
\textbf{Categoria}       & \textbf{Total} & \textbf{Ethereum} & \textbf{EOS} & \textbf{Steem} & \textbf{Tron} & \textbf{IOST} & \textbf{NEO}   \\ \midrule
Número de dApps          & 2989           & 1822              & 493          & 92             & 520           & 38            & 24             \\
dApps ativos             & 2217           & 1129              & 479          & 80             & 482           & 32            & 15             \\
Novos dApps              & 1445           & 690               & 260          & 34             & 411           & 38            & 12             \\
Usuários ativos          & 3,11M          & 1,42M             & 518 mil      & 120 mil        & 967 mil       & 27 mil        & 55 mil         \\
Novos usuários           & 2,76M          & 1,28M             & 399 mil      & 60 mil         & 947 mil       & 27 mil        & 44 mil         \\
Transações               & 3,26B          & 24,52M            & 2,81B        & 85,72M         & 290,28M       & 47,10M        & 2,27M          \\
Volume (em token)        & --             & 12,64M            & 1,4B         & 84,83M         & 142,44B       & 12,53B        & 410 mil        \\
Volume (USD)             & 10,9B          & 2,37B             & 4,98B        & 29,02M         & 3,41B         & 114,34M       & 1,01M          \\ \bottomrule
\end{tabular}
\legend{Fonte: \citeonline{dapp}.}
\end{table}

E ao analisar os dados atuais da plataforma \citeauthoronline{dapp}, foi elaborado a tabela \ref{tab:dapp}, que mostra os números totais de *dApps* registradas na plataforma por tecnologia *Blockchain*. E ao analisar uma outra plataforma de indexação de *dApps*, a \citeauthoronline{appco}, foi elaborada a tabela \ref{tab:appco}, seguindo os mesmos critérios\footnote{ao consultar ambas plataformas, foram consideradas apenas tecnologias \emph{blockchain} com mais de 10 aplicações registradas na plataforma}.

Diante dos números apresentados, podemos notar que tanto o número de criptomoedas existentes quanto o número de *dApps* existentes, possuem divergências consideráveis de acordo com a fonte consultada, o que reduz a confiabilidade dos dados e prejudica uma análise mais metodológica.

Segundo a fonte \citeauthoronline{dapp}, a *Ethereum* é a tecnologia mais relevante para *dApps*, a EOS ainda se mantém relevante porém é uma tecnologia em declínio tendo perdido 30% em número de usuários ativos em comparação com o ano de 2019, e a Tron passou a ser a segunda plataforma mais relevante em 2019 \cite{dapp}.

Separando apenas essas três tecnologias, temos 1129 aplicações ativas feitas em *Ethereum*, 482 feitas em *Tron*, e 479 em 478 em *EOS*, sendo as únicas que ultrapassam o valor de 100 *dApps* ativas (tab. \ref{tab:dapp}).

Analisando essas mesmas tecnologias na \citeauthoronline{appco}, temos 421 aplicações ativas na *Blockstack*, 360 na *Ethereum*, 42 na *EOS* e 16 na *Tron* (tab. \ref{tab:appco}).

\begin{table}[htbp]
\centering
\caption{\label{tab:dapp}\emph{dApps} registradas na plataforma \citeauthoronline{appco} por tecnologia \emph{blockchain}.}
\begin{tabular}{cc}
\hline
\textbf{Blockchain} & \textbf{Número de dApps} \\ \hline
Ethereum            & 1580                      \\
Tron                & 492                       \\
EOS                 & 379                       \\
Blockstack          & 153                      \\
Steem               & 93                       \\
Klaytn              & 41                       \\
IOST                & 39                       \\
TomoChain           & 25                       \\ \hline
\end{tabular}
\legend{Fonte: \citeonline{appco}.}
\end{table}

<!--
View more: $('.view-more').click()
Pegar quantidade de items: document.getElementsByClassName('main-sec')[0].getElementsByClassName('item item').length
 -->

\begin{table}[htbp]
\centering
\caption{\label{tab:appco}\emph{dApps} registradas na plataforma \citeauthoronline{dapp} por tecnologia \emph{blockchain}.}
\begin{tabular}{cc}
\hline
\textbf{Blockchain} & \textbf{Número de dApps} \\ \hline
Blockstack          & 421                      \\
Ethereum            & 360                      \\
EOS                 & 42                       \\
Steem               & 30                       \\
Tron                & 16                       \\
0x relays           & 15                       \\
Mobius              & 12                       \\ \hline
\end{tabular}
\legend{Fonte: \citeonline{appco}.}
\end{table}

É importante salientar que ambas plataformas indexadoras usam um processo manual de cadastro de *dApps*, que possui os seguintes problemas:

1. \label{prob:1}falta de conhecimento dos criadores dos *dApps* sobre a existência de tais plataformas;
2. \label{prob:2}falta de avaliação qualitativa das aplicações enviadas;

O problema \ref{prob:1} pode resultar em uma subestimativa sobre a quantidade real de *dApps* existentes enquanto que o problema \ref{prob:2} pode resultar em uma superestimativa da quantidade de *dApps* que sejam minimamente usáveis, ou que de fato agregem valor ao usuário final, além de possibilitar duplicação de registros, submissão de aplicações que não estão prontas para uso, dentre outros casos possíveis.

Para a realização do estudo sobre tecnologias descentralizadas, foi determinado que seriam estudadas ao todo 3 tecnologias, sendo 2 delas proeminentes e 1 promissora que traga um diferencial tecnológico.

Para selecionar as 2 tecnologias proeminentes foram utilizados os dados extraídos das duas plataformas indexadoras (as únicas encontradas pelo autor), seguindo os seguintes critérios:

1. \label{criterio:1}Obter a média da quantidade de *dApps* registradas;
2. \label{criterio:2}Selecionar as duas tecnologias com maior valor médio de *dApps* registradas.

Seguindo o critério \ref{criterio:1}, foi obtido os resultados presentes na tabela \ref{tab:resultados-dapps}:

\begin{table}[htbp]
\centering
\caption{\label{tab:resultados-dapps}Média de \emph{dApps} registradas por tecnologia \emph{blockchain}.}
\begin{tabular}{lr}
\hline
\textbf{Tecnologia Blockchain} & \textbf{Média de dApps registrados} \\ \hline
Ethereum            & 985,5                      \\
Blockstack          & 287,0                      \\
Tron                & 254,0                       \\
EOS                 & 210,5                       \\
Steem               & 61,5                       \\
Klaytn              & 20,5                       \\
IOST                & 19,5                       \\
TomoChain           & 12,5                       \\
0x relays           & 7,5                       \\
Mobius              & 6,0                       \\ \hline
\end{tabular}
\legend{Fonte: \citeonline{appco} e \citeonline{dapp}.}
\end{table}

Seguindo os critérios estabelecidos, foram selecionadas as seguintes tecnolgias *blockchain* proeminentes com suporte a criação de *dApps*:

1. *Ethereum*;
2. *Blockstack*.

Por pesquisa e seleção informal, foi selecionada como terceira tecnologia a ser estudada, a *Holochain*, que apresenta características de plataforma para desenvolvimento de aplicações descentralizadas e que propõe uma tecnologia própria de mesmo nome que contrapõe as tecnologias baseadas em *blockchain*.

Com isso, foi definido o estudo e teste das seguintes tecnologias neste trabalho:

1. *Ethereum*;
2. *Blockstack*;
3. *Holochain*.

### Ethereum

A *Ethereum* é uma tecnologia *blockchain* lançada em 2015 que ao ser idealizada teve como objetivo eliminar quatro fraquezas do *Bitcoin* \cite{ethereum}:

1. Não ser *turing*-completo\footnote{\emph{Turing-completo} é a denominação dada a sistemas de regras capazes de simular um computador primitivo, ou seja, permitir teoricamente, sem levar em consideração capacidade de memória e de processamento, a resolução de qualquer problema computacional, o que no contexto de linguagens de programação, significa ter suporte a estruturas condicionais e de repetição \cite{ethereum}.}: a impossibilidade de criação de *loops* é uma considerável limitação para a criação de contratos que envolvem repetições e que precisam ser eficientes;
2. Valor-cego: não é possível criar uma transação que possa ser gasta de forma esporádica e com valores variados até a totalização do valor disponível ser exaurido. Em outras palabras, ou todo o valor da transação é gasto ou nada é gasto. Isso impede que haja formas sofisticadas de pagamento, como pagamento por prestação, ou envio fracionário do valor da transação para diferentes destinatários.
3. Falta de estado: uma transação não gasta (*UTXO*) só possui dois estados: gasto e não gasto. Não existe a possibilidade de haver estados internos dentro da transação *UTXO*, o que implica na criação de contratos simples e pontuais, ao invés de contratos com estado (e portanto, mais complexos), que permitiriam organizações descentralizadas, a implementação de metaprotocolos e o suporte a limites de retirada.
4. *Blockchain*-cego: a *UTXO* não tem visibilidade sobre os dados da *blockchain*, o que limita, por exemplo, a criação de jogos de azar, e perdendo características potencialmente valiosas de aleatoriedade.

Para eliminar essas fraquezas, a *Ethereum* implementou uma *blockchain* *turing complete* o que permite a criação de contratos inteligentes capazes de suportar sistemas de arquivos descentralizados, implementação de limites de saque, contratos financeiros, mercados de apostas, criação de *tokens*, etc.

E foi justamente o surgimento da *Ethereum* que culminou na adoção e propagação de aplicações descentralizadas e inspirou outras *blockchains* a implementarem soluções concorrentes com o mesmo propósito.

Além das propriedades já citadas, a *Ethereum* também possui uma moeda embutida em sua *blockchain* chamada de *ether* e que possui um sistema próprio de denominações que pode ser visto na tabela \ref{tab:ethgentle}.

\begin{table}[htbp]
\caption{\label{tab:ethgentle}Denominações da moeda \emph{Ether}.}
\begin{tabular}{@{}lrr@{}}
\toprule
\multicolumn{1}{c}{\textbf{Unidade}} & \multicolumn{1}{c}{\textbf{Número por ETH}} & \multicolumn{1}{c}{\textbf{Uso mais apropriado (atualmente)}} \\ \midrule
Ether (ETH)                          & 1                                           & transações  e recompensas de mineração                        \\
finney                               & 1.000                                       & NA                                                             \\
szabo                                & 1.000.000                                   & cuusto de trasação                                            \\
Gwei                                 & 1.000.000.000                               & \textit{preço de Gas}                                         \\
Mwei                                 & 1.000.000.000.000                           & NA                                                             \\
Kwei                                 & 1.000.000.000.000.000                       &  NA                                                             \\
wei                                  & 1.000.000.000.000.000.000                   & unidade base indivisível                                      \\ \bottomrule
\end{tabular}
\legend{Fonte: \citeonline{ethgentle}}
\end{table}

#### Arquitetura da Ethereum

Para que a rede *Ethereum* consiga executar contratos inteligentes (o que permite a criação de *dApps*), é utilizado o conceito de contas. Há dois tipos de contas \cite{ethwork}:

1. Contas de propriedade externa: são contas controladas a partir de chaves privadas e não possuem nenhum código associado a elas. Comparando com o *Bitcoin*, as carteiras de *Bitcoin* seriam consideradas contas de propriedade externa na rede *Ethereum*.
2. Contas de contrato: são contas controladas somente por um código de contrato associado a ela, sendo o que permite que o dinheiro fique retido para ser controlado de acordo com as regras do contrato.

Uma característica importante das contas de propriedade externa é que elas podem enviar mensagens tanto para outras contas de propriedade externa como para contas de contrato, sendo necessário para isso, a utilização da chave privada da conta, assim como ocorre com o *Bitcoin*. Quando uma mensagem é enviada para uma conta de contrato externo, isso caracteriza uma transferência de valor monetário, enquanto que uma mensagem para uma conta de contrato é caracterizada como um comando de execução do contrato ou de parte do contrato (fig. \ref{fig:ethcontract}).

\begin{figure}[!ht]
    \caption{\label{fig:ethcontract}Execução de contratos na rede \emph{Ethereum}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/ethcontract.png}
    \end{center}
    \legend{Fonte: \citeonline{ethwork}.}
\end{figure}

Desta forma, um contrato só pode ser inicializado por uma conta de propriedade externa, porém, após o ínicio de execução do contrato, a conta de execução do contrato pode começar a enviar comandos de transação interna, tendo vida própria de acordo com as regras do contrato a qual obedece.

Um outro importante conceito dentro da rede *Ethereum* é a utilização de *gas*, que é o termo utilizado para as taxas de operação da rede. Toda computação realizada na rede *Ethereum* exige o pagamento dessa taxa de *gas* para ser executada, sendo ela normalmente expressa em *gwei*. Em cada transação, o emissor estipula um *limite de gas* (a quantidade máxima de *gas* que se está disposto a pagar) e um *preço de gas* (o preço em *ether* de cada unidade de *gas* que se está disposto a pagar). Ao se multiplicar o *limite de gas* com o preço de *gas*, obtém-se o *taxa máxima da transação* que se está disposto a pagar (fig. \ref{fig:gas}).

\begin{figure}[!ht]
    \caption{\label{fig:gas}Cálculo da taxa máxima da transação.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/gas.png}
    \end{center}
    \legend{Fonte: \citeonline{ethwork}.}
\end{figure}

Sendo assim, é necessário antes de enviar uma transação para a rede *Ethereum*, que o usuário possua valor equivalente em sua carteira para pagar a *taxa máxima de transação*. Esse valor então é enviado para a *conta do contrato* e a cada operação do contrato, a taxa de gás é subtraída até que o contrato seja finalizado ou até que a *taxa máxima da transação* seja alcançada. Caso haja saldo remanescente na *conta do contrato* após o término da execução do contrato, o valor é devolvido ao emissor da transação, como exemplifica a figura \ref{fig:gasspent}.

\begin{figure}[!ht]
    \caption{\label{fig:gasspent}Processo de gasto de \emph{gas} em uma transação.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/gasspent.png}
    \end{center}
    \legend{Fonte: \citeonline{ethwork}.}
\end{figure}

Quando a *taxa máxima da transação* é alcançada antes da finalização do contrato, ou seja, quando o contrato fica sem *gas* para ser gasto das operações, todas as operações são revertidas, voltando ao estado inicial antes do ínicio do contrato (fig. \ref{fig:outofgas}). O contrato é marcado como inválido, porém todo o *gas* gasto no contrato não é devolvido, permanacendo com o executor do contrato, que no caso é o minerador responsável pelo bloco de transações no qual o contrato estava inserido.

\begin{figure}[!ht]
    \caption{\label{fig:outofgas}Processo quando o contrato fica sem \emph{gas} para continuar sua execução.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/outofgas.png}
    \end{center}
    \legend{Fonte: \citeonline{ethwork}.}
\end{figure}

Esse processo garante que todo poder computacional gasto é recompensado, o que garante a o bom funcionamento da rede e previne o uso indiscriminado da mesma.

### Blockstack

*Blockstack* é uma tecnologia com o foco em prover uma infraestrutura para o desenvolvimento de aplicações descentralizadas seguras e privadas em que a camada de *blockchain* lida com o gerencimaneto de estado e lógica de negócio mínimos, provendo ao usuário final dessas aplicações o controle total sobre suas identidades e dados digitais.

A *Blockstack* tem como objetivos: \cite[p. 3]{blockstack}

- Facilidade de uso: prover um sistema que seja fácil de utilizar por usuários finais de aplicações tradicionais e prover um ambiente de desenvolvimento tão fácil de desenvolver como são as aplicações da *web* atualmente;
- Escalabilidade: prover uma infraestrutura que suporte de centenas de milhares a bilhões de usuários, escalando a rede bem como a *blockchain* conforme o aumento no número de aplicações e usuários;
- Controle do usuário: prover ao usuário final o poder sobre seus dados por padrão, permitindo ao usuário decidir se deseja prover seus próprios recursos computacionais e de armazenamento.

Para alcançar esses objetivos, a *Blockstack* utiliza uma camada de *blockchain* que lida com uma quantidade mínima de lógica de negócio e controle de estado da aplicação, sendo que os dados das aplicações são sempre que possível atualizados apenas localmente ao invés de serem armazenados inteiramente na *blockchain*.

#### Arquitetura da Blockstack

A arquitetura da *Blockstack* é composta por três camadas principais (fig. \ref{fig:archblockstack}) e enquanto continua a utilizar os protocolos de comunicação tradicional da *internet* como o TCP/IP, substitui outros protocolos de mais alto nível, (por exemplo, o protocolo DNS\footnote{DNS (\emph{Domain Name System} - Sistema de Nomes de Domínio) é o protocolo de comunicação de redes utilizado para converter e localizar endereços de máquinas legíveis para humanos (www.nomedomeusite.com.br) para os endereços IPs das máquinas (216.58.194.164) utilizados na rede mundial de computadores}), e foi elaborado para garantir o controle e privacidade dos dados do usuário, integrar-se facilmente a arquiteturas atuais e prover segurança no gerenciamento dos dados.

\begin{figure}[!ht]
    \caption{\label{fig:archblockstack}Arquitetura da \emph{Blockstack}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/archblockstack.png}
    \end{center}
    \legend{Fonte: \citeonline{archblockstack}.}
\end{figure}

A primeira camada da *Blockstack* é construída em cima da *blockchain* do *Bitcoin*, garantindo segurança e robustez contra ataques que tentem fraudar os dados da *Blockstack*. Isso é feito através da utilização de uma *blockchain* virtual que tem seus metadados transformados em *hash* e registrados na *blockchain* do *Bitcoin*. Dessa forma, qualquer adição ou atualização na *Blockstack* deve ser validada por um bloco da *blockchain* do *Bitcoin*, enquanto que operações somente-leitura podem ser feitas diretamente da *blockchain* virtual da *Blockstack*, garantindo ao mesmo tempo rapidez e robustez.

Os blocos da *blockchain* virtual da *Blockstack* armazenam apenas o nome do domínio da aplicação\footnote{A \emph{Blockstack} implementa seu próprio sistema DNS denominado \emph{BNS}(\emph{Blockchain Naming Service} - Serviço de Nomes da \emph{Blockchain}) que serve para criar domínios de aplicação de forma similar aos domínios tradicionais (www.meudominio.com.br), tornando \emph{hashes} em nomes legíveis}, a sua respectiva chave pública e o *hash* do arquivo Zone\footnote{{\emph{Arquivos Zone} são arquivos utilizados por sistemas DNS para armazenarem os IPs das máquinas conectadas a rede de computadores que estão associados a determinado nome de domínio}}.

A segunda camada chamada de *Atlas*, é reponsável por gerenciar o mapeamento dos *hashes* de arquivos Zone com os arquivos Zone de fato, gerenciando a comunicação entre os domínios do BNS (presentes na camada inferior) e o local físico onde os arquivos estão localizados (responsabilidade da camada superior). Tanto a camada inferior como a segunda camada, são gerenciadas pelos nós da rede *Blockstack* e ao gerenciar apenas *hashes* de arquivos, a rede se torna especialmente leve, podendo mapear a *internet* inteira em menos de 100GB \cite{archblockstack}.

A camada superior da *Blockstack*, chamada de *Gaia* é reponsável por armazenar os arquivos de fato, porém, diferente de outras tecnologias *blockchain*, a *Blockstack* não armazena os arquivos na sua rede *blockchain*, optando por, em vez disso, utilizar a infraestrutura tradicional da *internet*, ou seja, os arquivos são armazenados em servidores da Amazon AWS, Dropbox, Microsoft Azure, FreeNAS Server, Google Drive, dentre outros. Porém, antes de serem armazenados, os arquivos são criptografados com a chave privada do dono do arquivo, é criado o *hash* desse arquivo, que é armazenado na *blockchain* da *Blockstack*, e só então ele é armazenado.

Esse sistema híbrido de armazenamento, que combina a infraestrutura atual da *internet* com o uso da criptografia e registro do *hash* do arquivo na *blockchain*, garante que o arquivo não possa ser acessado de forma indevida e tenha um custo de armazenagem similar ao que já existe. Ou seja, é um sistema que garante segurança, praticidade e conveniência.

É possível também que o usuário forneça a lista de provedores de armazenamento, podendo criar uma rede mais distribuída dos dados, já que o armazenamento de um arquivo em apenas um lugar não configura um sistema distribuído e portanto não possui os benefícios de tolerância a falha, múltiplas cópias de segurança, etc. Com isso, a responsabilidade de definir o nível de distribuição do arquivo fica a cargo da aplicação construída em cima da *Blockstack* \cite{blockstackgaia}.

A tabela \ref{tab:gaia} traz um comparativo entre o Gaia e os principais sistemas de armazenamento descentralizados da atualidade.

\begin{table}[htbp]
\centering
\caption{\label{tab:gaia}Comparativo entre provedores de armazenamento descentralizados.}
\begin{tabular}{m{0.42\linewidth}|c|c|c|c|c|c}
\hline

\centering \textbf{Funcionalidades} & \textbf{Gaia} & \textbf{\href{https://sia.tech/}{SIA}} & \textbf{\href{https://storj.io/}{STORJ}} & \textbf{\href{https://ipfs.io/}{IPFS}} & \textbf{\href{https://datproject.org/}{DAT}} & \textbf{\href{https://www.scuttlebutt.nz/}{SSB}} \\ \hline
Usuário controla onde o dado é armazenado & X &  &  &  &  &  \\ \hline
Dado pode ser visualizado em um navagador tradicional & X &  &  & X &  &  \\ \hline
Dado é lido/escrito & X &  &  &  & X & X \\ \hline
Dado pode ser deletado & X &  &  &  & X & X \\ \hline
Dado pode ser listado & X & X & X &  & X & X \\ \hline
O espaço do dado excluído é recuperado & X & X & X & X &  &  \\ \hline
As pesquisas de dados têm desempenho previsível & X &  & X &  &  &  \\ \hline
A permissão de gravação pode ser delegada & X &  &  &  &  &  \\ \hline
A permissão de listagem pode ser delegada & X &  &  &  &  &  \\ \hline
Suporta vários backends nativamente & X &  & X &  &  &  \\ \hline
Os dados são endereçáveis globalmente & X & X & X & X & X &  \\ \hline
Precisa de uma criptomoeda para funcionar &  & X & X &  &  &  \\ \hline
Os dados são endereçados ao conteúdo &  & X & X & X & X & X \\ \hline

\end{tabular}
\legend{Fonte: \citeonline{blockstackgaia}}
\end{table}

Por conta das características do sistema de armazenamento do Gaia (tab. \ref{tab:gaia}), ele se apresenta como sendo uma solução muito mais próxima das necessidades que uma aplicação *web* tradicional possui atualmente, sendo mais atrativo e familiar para desenvolvedores *web*.

A *Blockstack* além de prover toda essa infraestrutura também provê SDKs (*Software Development Kit* - Kit de Desenvolvimento de *Software* ) para as plataformas *iOS*, *Android*, *Web* e para *React Native* (aplicações híbridas), que facilitam todo esse processo de comunicação entre as três camadas da *Blockstack* e também faz por padrão procedimentos de criptografia, gerenciamento de *tokens* de acesso e chaves privadas.

Através dessa infraestrutura e sua filosofia, a *Blockstack* inaugurou um novo lema com os dizers: *Can't be evil* (Não consegue ser mau) (fig: \ref{fig:dontevil}), que serve como crítica a grandes corporações como a Google (que possuia o lema *Dont be evil* - Não seja mau) que embora tenham sido concebidas com filosofias que tinham como propósito criar um mundo melhor, acabaram tomando um rumo duvidoso em que é difícil negar que estão explorando de forma indevida os dados coletados de seus usuários.

\begin{figure}[htbp]
    \caption{\label{fig:dontevil}Placa publicitária da Blockstack com seu lema.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/dontevil.png}
    \end{center}
    \legend{Fonte: \citeonline{blockstackreview}.}
\end{figure}

As aplicações *Blockstack* precisam seguir um fluxo de autenticação semelhante ao ilustrado na figura \ref{fig:blockstacksignin}, em que o usuário clica em um botão de *sign in* que o redireciona para o *Blockstack Browser*\footnote{O \emph{Blockstack Browser} é um cliente \emph{web} que serve para usuários conseguirem utilizar os serviços providos pela infraestrutura da \emph{Blockstack} sem precisar executar um nó da rede. Ele é \emph{open source} e é usado principalmente para que usuários realizem o registro e \emph{sign in} na rede \emph{blockchain} da \emph{Blockstack}.} (fig. \ref{fig:blockstacksignin} - passos 1 e 2).

\begin{figure}[htbp]
    \caption{\label{fig:blockstacksignin}Processo de \emph{sign in} utilizando o SDK da \emph{Blockstack}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/blockstacksignin.png}
    \end{center}
    \legend{Fonte: \citeonline{blockstackauth}.}
\end{figure}

No \emph{Blockstack Browser} o usuário pode realizar o cadastro na *blockchain* da *Blockstack* ou então realizar o *sign in* caso já tenha cadastro, fornecendo seu nome de usuário e chave privada (a figura \ref{fig:blockstacksigninex} exemplifica como um usuário interage com uma aplicação que utiliza a \emph{Blockstack}). Após realizar o *sign in* na plataforma, o usuário precisa conceder permissão à aplicação (permissão de apenas leitura ou permissão de leitura e escrita).

\begin{figure}[htbp]
    \caption{\label{fig:blockstacksigninex}Exemplo do processo de \emph{sign in} dos aplicativos que usam \emph{Blockstack}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/blockstackauth.png}
    \end{center}
    \legend{Fonte: \citeonline{blockstackauth}.}
\end{figure}

Apenas após o usuário realizar o *sign in* e conceder as permissões que a aplicação requisitou, é que o *Blockstack Browser* retorna um *token JWT* para a aplicação (fig. \ref{fig:blockstacksignin} - passo 3), que então é verificado e tratado pela aplicação (fig. \ref{fig:blockstacksignin} - passo 4) e  pode então ser utilizado para recuperar as informações do usuário diretamente da *blockchain* da *Blockstack* (fig. \ref{fig:blockstacksignin} - passo 5).

A partir de então, a aplicação detém um *token* temporário que pode ser utilizado para realizar operações no Gaia em nome do usuário. Esse *token* pode ser revogado a qualquer momento pelo usuário e é justamente por conta desse processo que a *Blockstack* se propõe a ser uma infraestrutura que não permite que as aplicações "sejam más".

O usuário detém a propriedade das suas informações e pode a qualquer momento revogar o acesso da mesma aos seus dados e também migrar para outra aplicação que ele considere melhor (ou mesmo utilizar várias aplicações simultâneamente que façam a mesma coisa).

### Holochain

A *Holochain* é uma alternativa a *blockchain* que ao invés de compartilhar todos os dados de forma idêntica para todos os nós da rede, distribui os dados de uma aplicação de forma aleatória entre os nós criando um número de cópias suficientemente grande de forma a garantir que o dado esteja sempre disponível mesmo quando o detentor original do dado está indisponível na rede.

Por não ter que replicar os dados para todos os nós da rede, a *Holochain* possui uma maior escalabilidade em comparação a aplicações descentralizadas que se utilizam da *blockchain* \citeauthoronline{holo}.

A *Holochain* provê a garantia de integridade de dados para aplicações *peer-to-peer* sem utilizar algoritmos de consenso, o que economiza poder de processamento, sem abandonar a característica de imutabilidade, pois valida as transações sempre que um agente se comunica com outro. \citeonline{holo} denomina essa abordagem como *centrada no agente* e destaca que o custo computacional de gerenciamento de consenso requer uma quantidade desnecessária de processamento de dados que carrega limitações de escalabilidade inerentes a abordagem.

A *Holochain* foi pensada para ter um modo de operação similar ao *git*, em que cada nó não precisa estar sincronizado com outros nós, e que cada nó pode ter sua própria *blockchain* interna, independente das demais. Apenas quando os nós se comunicam, deve haver a validação das informações trocadas e a resolução de conflitos entre os nós \cite{holo2}. Nesse sentido, para \citeauthoronline{holo2} a *blockchain* possui uma estrutura *centrada no dado*, em contraste com a abordagem *centrada no agente*, adotada pela *Holochain*.

A abordagem *centrada no agente* abstrai muito mais o mundo real, ao reconhecer que cada nó tem uma perspectiva, interesse e tempo de interação diferente de outro nó da rede, não havendo uma memória única e idêntica compartilhada por todos os nós. Isso permite que haja o paralelismo no tratamento dos dados por cada nó, o que em última instância permite a escalabilidade da rede.

\begin{figure}[htbp]
  \caption{\label{fig:holoblock}Diferença entre arquitetura cliente/servidor, \emph{blockchain} e \emph{holochain}}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/holoblock.png}
  \end{center}
  \legend{Fonte: \citeauthor{holobasics}.}
\end{figure}

De forma resumida, uma aplicação *Holochain* consiste de uma rede de agentes que mantém uma *blockchain* própria que serve como fonte primária de suas transações, e que são pareadas e verificadas em um espaço compartilhado que implementa uma *DHT* (*Distributed Hash Table* - tabela *hash* distribuída) validadora, *sharded*\footnote{Um \emph{shard} (fragmento) de banco de dados é uma partição horizontal de dados que ocorre com a criação de diversas instâncias fisicamente separadas e distribuídas do banco de dados. Um particionamento horizontal é a separação das informações de um banco de dados em linhas, permitindo que cada instância tenha apenas um subconjunto de todos os elementos guardados na base de dados \cite{shard}.}(fragmentada), monotônica\footnote{\emph{dedução monotônica} é a propriedade que vários sistemas lógicos possuem de a partir de uma hipótese, poder ser livremente adicionadas novas suposições, sem que haja uma violação da hipótese original. De forma simplificada, significa dizer que a incorporação de um novo conhecimento não pode reduzir o conjunto do que é conhecido}, em que vários nós garantam que os dados armazenados na *DHT* obedeceram as regras de validação, além de fornecer a informação sobre a origem do dado \cite{holo2}.

Incluir um novo registro na *DHT* envolve encontrar um nó responsável por cuidar daquele registro, que ao receber o dado do estado de transição, informa aos seus nós vizinhos. Cada um dos nós vizinhos ao receber essa informação do nó responsável pelo dado, deve validá-lo utilizando a lógica da aplicação. Assim, há diversas cópias, igualmente validadas e como a rede é criada para ter os dados uniformemente distribuídos, há a garantia de que o dado seja rapidamente encontrado\footnote{A \meph{DHT} utilizada pela \emph{Holochain} é baseada na \emph{Kademlia}\cite{kademlia}, e o processo de encontrar um nó vizinho é exemplificado pela figura \ref{fig:kademlia}, em que cada nó armazena um subconjunto limitado de nós, chamados de nós vizinhos, e quando precisam encontrar um nó que não seja seu vizinho, é feito uma busca de vizinhos de vizinhos. A parte superior da figura mostra a quantidade de vizinhos que foram perguntados antes de se encontrar o nó desejado.}, mesmo quando o nó original do dado estiver indisponível \cite{holo2}.

\begin{figure}[htbp]
  \caption{\label{fig:kademlia}Processo de procura de um nó na \emph{DHT Kademlia}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/kademlia.png}
  \end{center}
  \legend{Fonte: \citeauthor{kademlia}.}
\end{figure}

Diferentemente da aplicações descentralizadas construídas utilizando tecnologia *blockchain*, a *Holochain* não sofre de problema de escalabilidade, se tornando cada vez mais eficiente a medida que o número de nós aumenta, já que a rede divide o trabalho entre os nós. Por conta dessas caracterísitcas, a *Holochain* se mostra uma excelente opção para aplicações descentralizadas que são utilizadas em grande escala e que não precisam estar com seus dados o tempo todo sincronizados.

A tabela \ref{tab:holo} traz uma breve comparação sobre algumas características da *Holochain* em relação a tecnologias *blockchain*.

\begin{table}[htbp]
\caption{\label{tab:holo}Comparativo entre \emph{blockchain} e \emph{Holochain}.}
\begin{tabular}{m{0.2\linewidth} | m{0.4\linewidth} | m{0.4\linewidth}}
\toprule
                                  & \textbf{Blockchain}                                                                                                                                            & \textbf{Holochain}                                                                                                                                                                                                   \\ \hline
\textbf{Abordagem}                & Centrado em dado, um único conjunto de dados global e uma realidade compartilhada por todos os nós                                                             & Centrado em agente, permite os nós atuarem independentemente ou em estreita colaboração, e então compartilhar realidades independentes e evolutivas sobre os dados e que chegam a um acordo ao longo do tempo       \\ \hline
\textbf{Consumo Energético}       & Bitcoin consome mais que 0,1\% de toda energia elétrica para prover menos de 0,0001\% do processamento financeiro mundial                                      & Como nenhuma mineração é necessária, não é necessário possuir uma CPU ou GPU especializada, tornando factível rodar os nós da rede em computadores com baixo poder de processamento, ou mesmo em celulares       \\ \hline
\textbf{Volume de Transações}     & Neo, uma \emph{blockchain} bastante performática, processa mais de 1000 transações por segundo. Bitcoin e Ethereum processam menos de uma centena por segundo         & Expectativa de ultrapasse o número de transações suportado pela rede VISA, que tem um máximo de 56000 transações por segundo}                                                                                      \\ \hline
\textbf{Escalabilidade}           & Mesmo desconsiderando a Prova de Trabalho, há sérios problemas de limite de escalabilidade pelo fato de requerer a sincronia entre muitos nós da rede        & Utilizando uma DHT compartilhada, o volume de transação carregada por nó se torna menor a medida que a rede cresce                                                                                                  \\ \hline
\textbf{Plataforma}               & Atualmente só pode funcionar de forma efetiva em computadores especializados para mineração                                                                    & Pode ser executado em Raspberry Pi ou em um smartphone                                                                                                                                                               \\ \hline
\textbf{Eficiência Computacional} & O(\(n \times m\)) para validar transações                                                                                                                      & \(O(\frac{n}{m \times log m})\) para validar transações                                                                                                                                                              \\ \hline
\textbf{Efeito de consenso}       & Algoritmos de consenso centralizam o poder e a Prova de Trabalho resulta em um crescimento computacional exorbitante para um conjunto de dados finito        & Não possui mineração nem consenso. Não possui vulnerabilidade ao ataque da maioria. Apenas é necessário confiar no código que roda em seu nó e validar o histórico dos nós com que se comunica
\\ \hline
\end{tabular}
\legend{Fonte: \citeonline{holo3}}
\end{table}

\clearpage

#### Arquitetura da Holochain

A *Holochain* possui conceitos que se relacionam as células dos seres vivos, em que cada aplicação *Holochain* (hApp) possui um DNA, que representa a regra de negócio da aplicação. O DNA é composto de vários *Zomes*, originário de *chromossome* (cromossomo), que seriam equivalentes a módulos da aplicação ou micro-serviços. Esses *Zomes* se comunicam entre si através de uma camada de comunicação externa onde pode ser criada interfaces de aplicação e interfaces gráficas e uma camada de comunicação entre as diferentes instâncias do *hApp*, denominada condutor (fig. \ref{fig:holoarchitecture}).

\begin{figure}[htbp]
    \caption{\label{fig:holoarchitecture}Arquitetura de uma aplicação Holochain (hApp).}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/holodna.png}
    \end{center}
    \legend{Fonte: \citeonline{holoarchitecture}.}
\end{figure}

O condutor possui a lógica responsável por fazer com que a instância da aplicação comporte-se como um nó da rede *Holochain* e se comunique com outras instâncias (nós) daquela mesma aplicação, sendo que cada *hApp* possui uma rede privada própria que possibilita que uma instância de um *hApp* se comunique com outra instância sem precisar interagir com nós da rede que não possuam aquela aplicação. Dessa forma, a *Holochain* é uma coleção de redes privadas, sendo cada rede responsável por coordenar as instâncias de um *hApp*.

Cada nó da rede possui uma instância da aplicação com seus próprios dados, e essa instância se comunica com as demais intâncias na rede (fig. \ref{fig:happnet}). Os dados de cada nó são responsabilidade do próprio nó, porém, são validados segundo o DNA da aplicação por outros nós, sempre verificando se os dados condizem com as regras especificadas no DNA. Caso seja identificado uma fraude na rede, o nó fraudulento é inserido numa lista de nó não confiável, tendo essa informação espalhada pela rede até o ponto em que ninguém na rede confia mais no nó fraudulento.

\begin{figure}[htbp]
    \caption{\label{fig:happnet}Aplicação \emph{Holochain} (\emph{hApp}) comunicando-se na rede \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=0.5\textwidth]{imagens/happnet.png}
    \end{center}
    \legend{Fonte: \citeonline{holoarchitecture}.}
\end{figure}

Essa arquitetura da *Holochain* é denominada arquitetura orientada a agentes, o que significa que é um sistema distribuído que dá ao agente (nó participante da rede) o controle sobre sua identidade e os dados criados por ele, utilizando um sistema de reconhecimento de agentes baseado em criptogragia de chaves públicas e privadas, o que pode ser comparado ao que ocorre com o sistema de controle de versionamento Git.

Para exemplificar a *Holochain*, podemos utilizar a metáfora de uma rosquinha, em que a massa da rosquinha representa a infraestrutura da *Holochain*, a cobertura representa a aplicação, podendo haver diversas aplicações implementadas com a *Holochain*, e em que o *agente* da rede que utiliza a aplicação está contido no interior da rosquinha, se comunicando com o resto da rede através das aplicações *Holochain*, como mostrado na  figura \ref{fig:holochainexplanned}. Cada outra rosquinha na imagem representa uma outra instância de uma mesma aplicação, que se comunicam uma com a outra.

\begin{figure}[htbp]
  \caption{\label{fig:holochainexplanned}\emph{Holochain}: rede centrada no agente.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/holochainexplanned.png}
  \end{center}
  \legend{Fonte: \citeonline{holobasics}.}
\end{figure}

O espaço de comunicação externa a rosquinha, representa a rede *Holochain* que implementa uma DHT, porém, o espaço interno a cada rosquinha representa o agente que possui informações e dados distintos sob seu controle e que são manipulados internamente através das regras implemenetadas na aplicação.

Para que a comunicação entre os nós seja possível, a *Holochain* utiliza uma rede DHT em que cada nó conhece um conjunto limitado e definido de outros nós vizinhos, e em que um nó pergunta ao outro e através do *hash* único do arquivo é possível determinar se o nó perguntado possui aquela informação, e caso não a tenha, consiga-se determinar qual nó possui a maior probabilidade de ter aquela informação ou conhecer o nó que possua aquela informação \ref{fig:dht}. Sendo assim, a *Holochain* possui uma rede de descoberta que se comporta de maneira logarítma, ou seja, a adição de novos dados não impacta de forma significativa o tempo que demora para um nó qualquer encontrar um dado qualquer.

\begin{figure}[htbp]
  \caption{\label{fig:dht}Exemplificação da descoberta de nós na rede DHT da \emph{Holochain}.}
  \begin{center}
  \includegraphics[width=0.5\textwidth]{imagens/dht.png}
  \end{center}
  \legend{Fonte: \citeonline{holobasics}.}
\end{figure}

Para garantir que o dado pertence ao nó correspondente e também para garantir que o dado não foi adulterado, sempre que uma instância do *hApp* cria um registro, ele assina eletrônicamente o registro público com sua chave privada, ele armazena-o internamente e também o compartilha com a rede, conforme mostrado na figura \ref{fig:regholo}.

\begin{figure}[!ht]
    \caption{\label{fig:regholo}Processo de registro de dados públicos na \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=0.8\textwidth]{imagens/regholo.png}
    \end{center}
    \legend{Fonte: \citeonline{holodht}.}
\end{figure}

Caso o registro seja privado, ele realiza a assinatura eletrônica do registro, mas ao invés de compartilhar todo o registro, ele apenas compartilha o cabeçalho do mesmo, guardando o registro internamente apenas, conforme a figura \ref{fig:regholopriv}. Esse processo permite que o dado fique indisponível para os outros nós, mas também permite que sempre que o nó precise compartilhar esse dado com um nó específico, esse nó consiga verificar que o dado compartilhado realmente existe, pertence ao nó que o compartilhou, e que não foi adulterado \cite{holodht}.

\begin{figure}[!ht]
    \caption{\label{fig:regholopriv}Processo de registro de dados privados na \emph{Holochain}.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/regholopriv.png}
    \end{center}
    \legend{Fonte: \citeonline{holodht}.}
\end{figure}

# Aplicação a um problema real

Neste capítulo é exposto um problema real que pode ser resolvido utilizando-se das tecnologias descentralizadas.

O problema escolhido foi o problema da construção de um sistema digital de compra e venda de produtos e serviços (conhecido como \emph{e-commerce} - Comércio Eletrônico) que viabilize um livre mercado.

Na primeira seção é abordado o que é um livre mercado e como aplicações centralizadas não conseguem atualmente implementarem um livre mercado. Na segunda seção é descrito as características da aplicação proposta que será implementada utilizando as tecnologias descentralizadas escolhidas, e na terceira seção é abordado uma solução concorrente que também utiliza-se de tecnologias descentralizadas.

## Livre mercado

Para entender o que é o livre mercado é preciso entender a natureza humana e um pouco sobre o estudo da economia. Ludwig von Mises usa da praxeologia, o estudo das ações humanas, para construir os princípios que regem a economia \cite[pp. 11--12]{mises}. Mises define a ação humana como o uso dos meios para se realizar um fim \cite[p 13]{mises}. Porém, é importante ressaltar que os motivos das ações humanas não pertencem ao campo da praxeologia e sim ao campo da psicologia e psicanálise sendo do interesse da praxeologia apenas as consequências práticos das ações.

Para que haja a ação humana é preciso haver um descontentamento, uma inquietude em relação ao estado atual do indivíduo, caso contrário nada precisaria ser feito, já que se estaria em um estado de perfeição que jamais precisaria ser alterado.

A inquietude com o estado atual acarreta um desejo por mudança, uma idealização de algo que possa ser feito para alterar o estado atual. Essa idealização, em outras palavras, nada mais é do que o pensamento, as ideias, o raciocínio, a cognição sendo utilizadas para construir um plano de ação.

Mas apenas a inquietude e o pensamento de mudança não seriam suficientes para gerar uma ação, afinal, para que se aja é necessário um terceiro ingrediente, a expectativa de que a ação traga um mínimo de alívio ou diminuição da inquietação do indivíduo. Apenas havendo esses três elementos, a ação humana se torna factível.

Embora a palavra ação possa ser entendida como uma atitude ativa é importante salientar que ela também pode ser uma atitude passiva, ou seja, a decisão de não agir. A ação passiva portanto ocorre quando o indivíduo, conscientemente e diante das informações que possui, decide que ao fazer nada obterá o resultado que lhe trará a maior satisfação dentre todos os resultados que ele considerou.

A partir da definição da ação humana entende-se que um indivíduo sempre buscará um estado de melhor satisfação ou menor inquietude, porém, isso não significa que suas ações se concretizarão da forma que foi esperada, já que pode haver informações desconhecidas ao indivíduo, fatores externos a seu controle, ou alterações significativas no ambiente que o faça avaliar as ações realizadas de forma diferente, o que pode lhe provocar arrependimento.

Caso não houvesse o desconhecido, ou a possibilidade de erro nas ações tomadas pelo índividuo, poderia se concluir que não haveria escolhas a serem feitas, já que uma escolha implica uma tomada de risco, em um balanceamento entre vantagens e desvantagens.

Todas as coisas que estão casualmente conectadas com a satisfação das necessidades humanas são definidas como *coisa útil*, e quando essas coisas são utilizadas para satisfazerem as necessidades humanas as chamamos de *bens* \cite[p 52]{menger}. Segundo \citeauthoronline{menger} para uma coisa adquirir as características de um bem deve-se ser preenchido simultaneamente os seguintes pré-requisitos:

1. Haver uma necessidade humana;
2. Haver propriedades que tornem a coisa capaz de ser empenhada em uma conexão causal com a satisfação dessa necessidade;
3. Haver o conhecimento humano dessa causalidade;
4. Haver controle suficiente sobre a coisa para usá-la para a satisfação dessa necessidade.

Os bens que podem ser utilizados para satisfazer diretamente as necessidades humanas, como, por exemplo, uma pizza pronta para ser devorada, são classificados de *bem de primeira ordem* ou *bens de consumo*, já os bens que apenas servirão para consumo em algum ponto do futuro são classificados como *bens de ordem superior*, *fatores de produção* ou *bens de produção* \cite[p. 8]{rothbard}.

Pelo fato de os bens de consumo serem escassos (se não o fossem, não seriam objetos da ação humana), é necessário que o indivíduo rearranje os elementos disponíveis em seu ambiente para produzir os bens de consumo que deseja. Esse processo de utilização de meios indiretos em cooperação com fatores de produção para gerar um bem de consumo que alcance o fim desejado pelo indivíduo é definido como *produção* \cite[p. 9]{rothbard}.

Todo o processo de produção necessita de tempo (um bem escasso) e fatores de produção que podem ser divididos em duas categorias

1. *fatores de produção originais*: bens prontamente disponíveis na natureza;
   - *trabalho*: o gasto de energia humana;
   - *terra*: elementos providos pela natureza.
2. *fatores de produção produzidos* ou *capital*.

Ao unir esses fatores de produção é possível produzir bens de maior ordem, ou seja, de maior valor agregado. E como
\citeauthoronline{bastiat} já havia observado, o homem, ao viver em sociedade, tem suas necessidades superadas pelas capacidades produtivas e suas necessidades elementares gradualmente dão lugar a desejos de ordem superior, levando sempre a um estado mais próximo da condição perfeita. Se isso não fosse verdade, ou seríamos criaturas retrógradas, ou seríamos irremediavelmente estáticos \cite[pp. 61--65]{bastiat}.

Pelo fato de toda ação humana ser uma tentativa de troca de um estado de menor satisfação para um estado de maior satisfação, fica evidente que as coisas são valorizadas como meios de acordo com a sua capacidade de contribuir para um fim desejado, sendo esse fim desejado, mais ou menos urgente de acordo com a preferência temporal do indivíduo.

Como o tempo é um bem escasso, sempre que um indivíduo escolher uma ação, ele necessariamente abrirá mão de qualquer outra ação que poderia ser executada naquele mesmo tempo. Devido a isso, pode-se concluir que cada unidade de um meio, seja ele direto ou indireto, e que é incorporado a ação humana é valorizado separadamente. \cite[p 21]{rothbard}.

Uma importante constatação é que o valor ou utilidade de um bem não pode ser medido, e portanto não pode ser aplicado as operações de soma, subtração, multiplicação ou divisão. Em outras palavras qualquer bem tem seu valor estimado de forma subjetiva por cada indivíduo.

As ações humanas usam meios escassos para satisfazerem a mais urgente das necessidades que ainda não foi satisfeita. \cite[p 24]{rothbard}. Como exemplo, se um indivíduo sucessivamente encontra um cavalo, e então um segundo e um terceiro, mesmo que os cavalos sejam idênticos e intercambiáveis entre si, o primeiro será utilizado para satisfazer a mais urgente das necessidades, o segundo será utilizado para a mais urgente das necessidades remanescentes, e assim sucessivamente.

Assim, o primeiro cavalo terá um valor maior que o segundo, que terá um valor maior que o terceiro. Ou seja, para todas as ações humanas, conforme a quantidade de suprimento de um mesmo bem aumenta, a utilidade (ou valor) de cada unidade adicionada diminui.

Por mais que seja impossível dizer o quão mais valorosa uma unidade de um mesmo bem é perante outra unidade do mesmo bem, ainda assim há uma relação ordinal entre cada unidade, o que pode ser ilustrado em um diagrama de escala de valores (fig \ref{fig:value-scale-diagram}), em que o eixo X representa um item de um mesmo bem, e o eixo Y mostra a ordem de importância de um fim ao qual esse bem é empregado.

Quando analisamos o estoque (definido com a quantidade de um mesmo bem quando um item pode ser intercambiável com outro item do mesmo bem) de um bem X com o estoque de um bem Y, podemos novamente criar uma escala de valores (fig. \ref{fig:value-scale-rank}), sendo que a regra se mantém: a necessidade mais urgente será satisfeita com determinada unidade de um bem, e sucessivamente as necessidade mais urgente remanescentes serão satisfeitas de acordo com as unidades recentes de cada bem, conforme eles satisfaçam essa necessidade.

\begin{figure}[h!]
  \centering
  \caption{\label{fig:value-scale-diagrams}Diagramas de escala de valores.}
  \begin{subfigure}[b]{0.4\linewidth}
    \centering
    \caption{\centering \label{fig:value-scale-diagram}Diagrama de escala de valores.}
    \includegraphics[height=\linewidth]{imagens/value-scale-diagram.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.4\linewidth}
    \centering
    \caption{\centering \label{fig:value-scale-rank}Escala de Valor aplicada a estoques dos bens X e Y.}
    \includegraphics[height=\linewidth]{imagens/value-scale-rank.png}
  \end{subfigure}
  \legend{Fonte: \citeonline[pp. 26 e 32]{rothbard}.}
\end{figure}

Em uma escala de valores, a unidade de bem que está na última posição da escala é denominada *unidade marginal*, e o fim a qual essa unidade é empenhada denomina-se de *utilidade da unidade marginal*. Em termos gerais, quanto maior for o suprimento de um bem, menor será a utilidade marginal e em contrapartida, quanto menor for o suprimento de um bem, maior será a utilidade marginal. Esse fato praxeológico é conhecido como *lei de utilidade marginal*.

A escala de valores pode ser aplicada a quantos bens forem necessários, sendo o item em última posição o bem a qual o usuário abrirá mão primeiro caso seja necessário. Porém é importante salientar que essa escala não é estática e representa apenas uma fotografia da preferência temporal de um indivíduo sobre determinadas condições.

Assim que as condições, as necessidades, os desejos, ou a percepção do indivíduo forem alterados, a escala também poderá será alterada. E é a partir desse entendimento que passamos a compreender como um indivíduo decide o que trocará em uma transação comercial.

E observando a lei da utilidade marginal chegamos a mesma conclusão que \citeauthoronline{condillac} \cite[p 85]{condillac} que disse que é falsa a afirmação de que em uma transação comercial um ator troca um bem por outro de igual valor, pelo contrário, cada um dos envolvidos na transação comercial troca um bem de menor valor por outro bem de maior valor. Se os bens possuíssem o mesmo valor, não haveria necessidade de realizar a troca, e uma troca de um bem de maior valor por um de menor valor é injustificável quando feita de forma voluntária.

Mesmo quando um bem é dado gratuitamente ocorre uma troca de valores em que o individuo que abre mão daquele bem se sente em uma situação de maior satisfação do que se tivesse mantido o bem para si. Isso novamente explicita o caráter subjetivo e individual do valor de cada bem. Os mesmos bens podem ser posicionados em ordens diferentes por dois atores, já que cada um dos atores empregará os bens conforme seus objetivos individuais.

Mas por que indivíduos se empenham em uma troca comercial?

Caso o ser humano vivesse isoladamente, ele estaria limitado a usufruir apenas dos bens naturais que ele encontrasse e dos bens que ele fosse capaz de produzir. Como o indivíduo sempre vai procurar satisfazer o máximo de fins possíveis no mínimo de tempo possível \cite[p 42]{rothbard}, torna-se fundamental que o indivíduo colabore com outros indivíduos que possam lhe oferecer bens que ele não teria ou que ele teria que empregar mais tempo, trabalho e fatores de produção para produzir.

E para que haja o interesse de realizar uma troca, cada um dos indivíduos deve possuir um bem ao qual o outro não possua e deseja. Segundo \citeonline[p. 95]{rothbard} há três diferentes razões para que um indivíduo possua bens diferentes de outro indivíduo:

1. Diferenças na adequação e rendimento dos fatores providos pela natureza;
2. Diferenças de capital e de bens de consumo duráveis;
3. Diferenças na habilidade e no desejo de realizar diferentes tipos de trabalho.

Essas diferenças colaboram para que seja criado uma *divisão do trabalho* em que cada indivíduo se especialize mais em um tipo de produção, empregando fatores de produção, capital e receitas (processos produtivos) diversos. Isso ocorre sobretudo por conta da individualidade de cada ser humano, que possui características e interesses únicos, bem como a diversidade da própria natureza e dos bens naturais que ela provê.

Se pelo contrário, a natureza fosse de tal forma que as condições para a produção fossem as mesmas para cada ponto da terra e que todo ser humano fosse igual a qualquer outro ser humano, então somente neste caso, a divisão do trabalho não ofereceria nenhuma vantagem para a ação humana \cite[p. 157]{mises}.

É essa especialização de produção que os indivíduos adquirem sejam por condições naturais, ou por preferências individuais, junto com o desejo de se adquirir bens que não possua, que criam o interesse de se envolver em uma troca comercial.

Porém, vale destacar que o desejo por se ter o que não tem pode resultar também no emprego da violência para se adquirir a força o bem de outrem. O roubo bem como a escravidão são as duas formas em que essa violência para obter o bem de outro pode ocorrer. O roubo é esporádico, enquanto que a escravidão é constante e trata o escravizado como um fator de produção.

O trabalho sob regime de coerção (escravidão) é denominado *trabalho compulsório* e é qualitativamente diferente do *trabalho voluntário*. Além das razões éticas que demonstram que o emprego da violência é errado existem ainda as consequências a longo prazo que superam os ganhos econômicos de curto prazo do emprego da violência para obter bens \cite[p. 81]{rothbard}.

Sendo assim, a troca é a única forma ética de se obter bens de outrem e além disso permite que um indivíduo obtenha um bem ao qual não tinha acesso ou ao qual não valia o seu esforço de produzi-lo. A troca potencializa as capacidades de cada indivíduo deixando-lhe concentrar suas ações no que lhe trará maior contentamento e ainda lhe dando a oportunidade de adquirir o que não consegue ou não deseja produzir.

As trocas comerciais podem ocorrer de forma direta, através do escambo, ou de forma indireta através do emprego de dinheiro e qualquer intrusão ou força física agressiva em trocas voluntárias é caracterizado com uma *intervenção* e causa a substituição de ações voluntárias por forças coercitivas, o que é contrário ao livre mercado \cite[p. 877]{rothbard}.
As transações econômicas que ocorrem sem intervenção, constituem portanto um *livre mercado*. Em outras palavras, *livre mercado* é a liberdade de transacionar com outros indivíduos de forma voluntária e pacífica, sem a interferência de terceiros que não sejam bem-vindos.

A intervenção usa da força para provocar uma ação que não ocorreria de outra forma, e é portanto uma ação que fere as liberdades individuais das pessoas, impedindo-as de empregar seus esforços no que elas consideram ter maior valor para elas.

Qualquer intervenção no livre mercado, portanto, é uma tirania e causa um estado de menor conforto aos indivíduos que sofrem a coerção, caso contrário, não seria necessária o emprego da força. Portanto, é importante garantir meios que impeçam a intervenção de terceiros e garantam que trocas comerciais ocorram somente através da livre associação e de forma voluntária. e que consequentemente beneficie os participantes.

### A dificuldade de se criar um livre mercado

Partindo da conclusão de que qualquer intervenção de terceiros em uma troca comercial desqualifica o mercado onde ocorre aquela troca como sendo um livre mercado, fica fácil entender que a mera obrigatoriedade de comunicação fiscal ou pagamento de imposto sem a anuência dos participantes também configura uma violação ao livre mercado.

Pode-se argumentar que os cidadãos, por estarem sobre território governado, aceitaram as leis naquele território vigente de forma tácita, como Locke escreve em sua obra \emph{Two Treatises on
Government} (Dois Tratados sobre o Governo):


\begin{displayquote}

A dificuldade é saber em que caso é preciso admitir a existência de um consentimento tácito e até que ponto ele obriga – i.e., em que medida se pode considerar que um indivíduo consentiu com um governo qualquer e assim está a ele submetido, se ele não prestou qualquer declaração nesse sentido. A isso eu respondo que qualquer homem que tenha alguma posse ou desfrute de qualquer parte dos domínios de qualquer governo manifesta assim o seu consentimento tácito; ele, enquanto permanecer nessa situação, está obrigado a obedecer às leis daquele governo como todos os outros que lhe estão submetidos; pouco importa se ele possui terras em plena propriedade, transmissíveis para sempre aos seus herdeiros; ou se ele ocupa somente um alojamento por uma semana; ou se ele desfruta simplesmente da liberdade de ir e vir nas estradas; e, na verdade, isso acontece ainda que ele seja apenas qualquer um dentro dos territórios daquele governo. \cite[seção 119, pp. 291--292]{locke}

\end{displayquote}

E que ao se aceitar um governo, não se pode dele abidicar, como \citeauthoronline{leviathan} escreveu em sua obra \emph{Leviathan} (Leviatã):

\begin{displayquote}

E, conseqüentemente, aqueles que já instituíram uma \emph{Common-wealth} [conceito que na modernidade pode ser entendido como república], estando assim vinculados por aliança, a possuir as ações e os julgamentos de um, não podem legalmente fazer uma nova aliança, entre si, para serem obedientes a qualquer outra, em qualquer coisa, sem a permissão dele [i.e., o governo]

[...]

não pode haver violação da aliança por parte do soberano; e, conseqüentemente, nenhum de seus súditos, por qualquer pretexto de confisco, pode ser libertado de sua subordinação. \cite[cap. 18, pp. 133--134 - tradução  do autor]{leviathan}

\end{displayquote}

Porém, essa noção de que a república ou qualquer outro governo é aceito tacitamente e que não se pode dele abdicar contradiz a lógica, como \citeauthoronline{mythstate} colocou em sua obra \emph{The Myth of the State} (O Mito do Estado):

\begin{displayquote}

Os mais influentes escritores políticos do século XVII rejeitaram as conclusões elaboradas
por Hobbes. Eles acusaram o grande lógico de efetuar uma contradição em termos. Se um homem pudesse renunciar à sua personalidade [i.e., ao seu direito de autopropriedade], ele deixaria de ser um ente moral. Ele se tornaria uma coisa morta {}--{} então, como uma coisa dessas poderia obrigar-se, fazer uma promessa ou assinar um contrato social? Esse direito fundamental, o direito de personalidade, inclui, nesse sentido, todos os outros. Manter e desenvolver a sua personalidade é um direito universal do homem. Tal direito não pode ser submetido às loucuras e às fantasias de determinados indivíduos e, portanto, não pode ser transferido de uma pessoa para outra. O contrato do governo {}--{} o qual é a base jurídica de todos os poderes civis {}--{}, assim, possui os seus inerentes limites. Não há nenhum \emph{pactum subjectionis} [do latim, acordo de submissão], nenhum ato de submissão pelo qual o homem pode renunciar à sua condição de agente livre e escravizar-se, pois através desse ato de renúncia ele abriria mão da própria característica que constitui a sua natureza e a sua essência: ele perderia a sua humanidade. \cite[p. 175 - tradução  do autor]{mythstate}

\end{displayquote}

Embora eu pudesse aqui discorrer outros pensadores, como Jean-Jacques Rousseau e Ayn Rand, que tratam de outras maneiras a legitimidade do governo, como o governo sendo aceito ou demandado por sua população, é possível resumir todos esses argumentos em uma busca por justificar que o estado, não importando a forma como veio a existir, tem o direito de ser como é, simplesmente por não ser contestado pela maioria.

Essa inclusive é a premissa da democracia, que define políticos de acordo com a proporcionalidade de sua população. Porém, não importando por qual ótica se olhe, é irrefutável que todas as explicações que legitimem o contrato social, e por consequência o governo e suas leis, colocam o direito da maioria acima do direito individual, sendo que a maioria não é senão, a junção das partes.

Parte-se do príncipio que o governo é condição \emph{sine qua non} (indispensável, essencial) para a existência da sociedade, e que o direito coletivo sobrepõe o individual, sendo todas essas visões incompatíveis com a teoria liberal dos direitos naturias a qual deriva os direitos das premissas factuais da inalienabilidade da vontade e, portanto, exclui desde o princípio a legítima auto-escravização \cite{critique}.

E como a teoria do livre mercado parte da premissa da vontade individual e consensual de seus participantes, não faz sentido analisá-lo sob a perspectiva de uma corrente de pensamento anti-liberal e que desligetima o direito natural do indivíduo.

Não obstante, o livre mercado, mesmo impedido de ocorrer em sua plenitude pelos governos, ainda assim prevalece em contextos onde os olhos do leviatã (como assim nomeou Hobbes, a organização social do estado) não conseguem alcançar, sendo denominado pelo governo como comércio informal. Ou seja, as leis naturais operam mesmo em ambientes altamente controláveis, justamente por ser natural aos indivíduos.

Porém, o comércio informal acontece em proporção pequenas, embora ao ser aglomerado atinge proporcões enormes, como apontou a pesquisa do IBOPE encomendada pela CNI (Confederação Nacional da Indústria) em 2015, em que 75% dos participantes respondentes afirmaram que compram de ambulantes ou lojas informais \cite{informal}.

Em ambientes virtuais ele existe principalmente na chamada \emph{deep web} (internet profunda), porém está indisponível para cidadãos comuns e é frequentemente combatido pelos governos sempre que cresce em tamanho, como aconteceu com o \emph{e-commerce} mais famoso da \emph{deep web}, o \emph{Silk Road}, que embora usasse diversos sistemas de segurança, como a rede anônima TOR (\emph{The Onion Route}) e criptomoedas como \emph{Bitcoin}, teve sua operação encerrada em 2011 depois que o FBI (\emph{Federal Bureau of Investigation} - Departamento Federal de Investigação) utilizou de meios questionáveis e extensivo poder estatal para encontrar seu criador e condená-lo a uma pena equivalente a duas vidas e 40 anos de prisão por crimes não violentos \cite{silk, ross}.

Porém, cidadãos comuns que desejem apenas realizar trocas comerciais comuns, sem ter de reportá-las ao governo ou sem ter que pagar os impostos relacionados, não possuem alternativas seguras ou convenientes de realizarem o comércio informal eletrônico, com exceção de fóruns específicos e aplicações que se limitam a produtos usados, e que mesmo assim, podem ser rastreados facilmente através de transações bancárias e pagamantos realizados através de operadoras de cartão de crédito.

Soluções como o \emph{Bitcoin} surgiram para prover alternativas que não passem pelo controle governamental ou qualquer outro controle central. Embora existam argumentos que tentem criminalizar o uso fim dessas tecnologias, todos esses argumentos se baseiam na ideia de que o provável criminoso deve ser condenado antes de cometer um crime, um claro desrespeito ao direito individual e um exercício de futorologia mesclado com ideias utilitarias.

O livre mercado é quase impraticável, pelo menos em proporções significativas, no ambiente virtual, mas com o advento de tecnologias descentralizadas, tornou-se possível conceber tais ambientes e independente das motivações e do juízo de valor sobre o emprego da tecnologia, o uso da criptogragia aliado a descentralização é uma resposta contra qualquer controle central. As ferramentas estão sendo criadas, principalmente por existir demanda e justificativas éticas, e o livre mercado, sendo uma atividade tão importante na sociedade, é um excelente caso a ser estudado e aplicado em conjunto com as tecnologias descentralizadas e, portanto, é o candidato ideal para o presente estudo.

### Arbitragem no livre mercado

Ao realizar trocas comercias, há sempre a possibilidade de surgir disputas e desacordos entre as partes envolvidas, mesmo quando as partes envolvidas não desejam iniciar o uso da força uma sobre a outra. Esse conflito pode ocorrer por questões envolvendo o cumprimento de um contrato ou acordo, ou da contestação sobre qualquer fator envolvido na transação, ou mesmo quando há a tentativa de uma parte enganar ou lesar a outra, agindo de má fé. As possibilidades para haver tal conflito entre as duas partes são inúmeras, e independete de quais sejam as razões, a disputa poderia chegar a um ponto em que se tornasse inviável de ser resolvida somente através da negociação direta entre as partes.

Se nenhum mecanismo para resolver esse tipo de problema dentro de uma sociedade existisse, tais disputas poderiam apenas ser resolvidas através do uso da força, havendo assim o abandono do uso da razão -- o único meio satisfatório de comunicação entre as pessoas. Nesse caso, essa sociedade desintegrar-se-ia em conflitos, e colapsaria à medida em que as relações humanas se tornassem perigosas demais para serem toleradas \cite[p. 65]{marketbook}.

Em um ambiente regulado por governos (e por consequência, em um mercado não-livre), essa disputa seria resolvida pela corte designada pelo governo, muitas vezes contrariando o desejo de uma ou de todas as partes envolvidas na disputa, o que embora seja efetivo na resolução da disputa, pode levar ao descontentamento da parte perdedora, e ser considerada injusta. Um juíz estatal é sempre impelido a ser parcial, a favor do próprio estado (e por vezes, do governo), através do qual ele recebe seu poder e seu pagamento. \cite[p. 66]{marketbook}

Em um livre mercado, a disputa pode ser resolvida por um árbitro escolhido por ambas as partes, antes da iniciação da transação ou do fechamento do contrato. Esse árbitro deve ser concordado por ambas as partes, exatamente como a própria transação não pode ocorrer sem o consentimento de ambas as partes, a escolha do árbitro também precisa ser concordada por ambas as partes, levando a uma negociação que pode chegar a conclusão de que não existe um árbitro que ambas as partes confiem (o que culminaria no não prosseguimento na negociação), ou na conclusão de que existe ao menos um árbitro que ambas as partes confiem e achem justo, concordando os dois a confiarem qualquer disputa posterior que venha a ocorrer a ser decidida pelo árbitro.

Um árbitro em um livre mercado, sabe que ele deve ser tão escrúpuloso, honesto, justo e imparcial quanto possível, caso contrário, ele mesmo terá sua reputação manchada e consequentemente não terá mais nenhum caso a julgar, sendo ostracizado pelo mercado. Um árbitro, portanto, teria todo o interesse em prover o melhor serviço possível, já que depende disso para sua própria sobrevivência, enquanto que o árbitro estatal depende de força política \cite[p. 67]{marketbook}.

Embora existam muitas particularidas sobre a utilização de arbitragem em um livre mercado, no meio digital, utilizando o conceito de contratos inteligentes (ver \ref{subsec:smartcontract}). Além de contratos inteligentes, também pode-se criar mecanismos que proporcionem que usuários antes de realizarem uma transação, possam escolher outro usuário da plataforma para ser o árbitro. O ideal é que os árbitros sejam pagos, para gerar incentivos financeiros para a execução de um bom trabalho de arbitragem, e também que haja uma forma de avaliar tais árbitros para gerar incentivos sociais que premiem os melhores árbitros e ostracizem mals árbitros.

A arbitragem também pode ser implementada de forma mais simplória em sistemas criptográficos através do uso de sistemas de assinatura eletrônica que utilizem-se de *threshold cryptography* (criptografia de limiar em tradução livre), como por exemplo, carteiras multi-assinadas.

*Threshold cryptography* é o ramo da criptografia que estuda a utilização de sistemas criptográficos em mensagens compartilhadas e distribuídas para *n* participantes, em que um número *t* $\leq$ *n*\footnote{\emph{threshold} (\emph{t}) é portanto o valor limite de chaves criptográficas necessárias para que a mensagem possa ser decifrada, sendo necessário \emph{t} + 1 chaves para decifrar a mensagem.} de participantes não conseguem decifrar a mensagem, mas que um número *t* + 1 de participantes conseguem decifrar a mensagem \cite{threshold}.

Utilizando esse conceito, pode-se criar uma carteira multi-assinada 2-de-3\footnote{uma carteira \emph{m}-de-\emph{n} é uma carteira multi-assinada que utiliza dos conceitos da \emph{threshold cryptography} (criptografia de limiar) para criar uma carteira que necessita de \emph{m} assinaturas de um total de \emph{n} assinaturas para ser movimentada. Sem preencher essa condição, nenhum valor da carteira pode ser movido.} que utiliza a chave pública dos três envolvidos (comprador, vendedor e árbitro), e que após a carteira ser criada, o comprador deve realizar o depósito do valor do produto ou serviço nessa carteira. A partir do momento que o depósito é feito na carteira, o processo de compra começa e o dinheiro só pode ser retirado da carteira multi-assinada quando pelo menos 2 dos envolvidos assinem a transação de transferência de dinheiro da carteira, ou seja, qualquer dinheiro depositado nessa carteira, só pode ser transferido para outro lugar se:

1. \label{multisig:1}o comprador e o vendedor concordarem em realizar a transferência de valores;
2. \label{multisig:2}o comprador e o árbitro concordarem em realizar a transferência de valores;
3. \label{multisig:3}o vendedor e o árbitro concordarem em realizar a transferência de valores.

No caso \ref{multisig:1}, a compra ocorreria de acordo com o combinado, e o dinheiro da carteira multi-assinada iria da carteira multi-assinada para uma carteira de propriedade exclusiva do vendedor. No caso \ref{multisig:2}, a compra precisaria de um árbitro para mediar a disputa, e o árbitro chegaria a conclusão de que o comprador tem razão na disputa e que portanto o dinheiro da carteira multi-assinada deve ser retornado para a carteira de posse exclusiva do comprador; no caso \ref{multisig:3}, o árbitro chegaria a conclusão de que o vendedor tem razão na disputa e que portanto o dinheiro deve ser transferido para uma carteira de posse exclusiva do vendedor.

Essa é a forma mais simples de arbitragem, sendo que os agentes poderiam concordar em medidas diferentes, como por exemplo, o vendedor e comprador concordarem que o dinheiro deve ser transferido para uma carteira em posse somente do comprador. O importante é que ninguém consegue mover o dinheiro sozinho, tendo que haver consenso entre pelo menos dois dos três atores.

## Definição da aplicação a ser desenvolvida

O projeto a ser desenvolvido, com o nome inicial de *Free the Market* (Liberte o Mercado) é uma aplicação *web* de comércio eletrônico construído utilizando tecnologias descentralizadas com o objetivo de verificar a viabilidade de utilização de tecnologias descentralizadas que consigam substituir de forma satisfatória tecnologias convencionais, removendo o problema de ponto único de falha, aumentando a privacidade dos usuários e a segurança dos dados manipulados pela aplicação.

É importante lembrar que o projeto é um protótipo e que embora pudesse ter uma extensa lista de funcionalidades, será abordado as funcionalidades básicas que consigam simular as dificuldades e particularidades do desenvolvimento de aplicações descentralizadas.

Portanto, os requísitos de alto nível do projeto *Free the Market* são:

- ser uma aplicação que possa ser acessada por qualquer navegador moderno, não sendo necessária a instalação de nenhum *software* adicional pelo usuário
- ser uma aplicação que utilize tecnologias descentralizadas baseadas em *blockchain* e redes *peer-to-peer*
- ser uma aplicação capaz de fornecer um ambiente mínimo que possibilite a comercialização de mercadorias por duas pessoas com o auxilio de arbitragem de uma terceira pessoa, denominado árbitro.

Por ser um projeto que envolve tecnologias emergentes, com baixa maturidade, foram identificados riscos técnicos na realização do projeto expressos na tabela \ref{tab:riscos}.

\begin{table}[htbp]
\centering
\caption{\label{tab:riscos}Riscos técnicos do projeto.}
\begin{tabular}{c|m{0.2\linewidth}|c|c|m{0.3\linewidth}}
\hline
\centering
\textbf{Risco} & \centering\textbf{Descrição} & \textbf{Probabilidade} & \textbf{Impacto} & \begin{center}\textbf{Ação}\end{center} \\ \hline

RN1 & tecnologias escolhidas possuem \emph{bugs} que impeçam a implementação & Alta & Muito alto & buscar suporte dos mantenedores; encontrar alternativas; corrigir ou contornar \emph{bug}. \\ \hline
RN2 & tecnologias escolhidas possuem pouca documentação  & Média & Médio & procurar aplicações de código aberto que utilizam a mesma tecnologia e estudá-las; buscar auxílio da comunidade; estudar código fonte da tecnologia. \\ \hline
RN3 & tecnologias escolhidas possuem comunidade pequena ou pouco ativa & Alta & Médio & buscar tecnologias alternativas; estudar código fonte da tecnologia. \\ \hline
RN4 & tecnologias escolhidas não são aderentes aos requisitos da aplicação & Baixa & Muito Alto & buscar tecnologias alternativas. \\ \hline
\end{tabular}
\end{table}

Como o escopo de uma plataforma de comércio eletrônico é demasiadamente grande para ser coberto neste trabalho, foi estabelecido um escopo menor que deverá ser implementado nas tecnologias descentralizadas que serão comparadas neste trabalho. Este escopo inclui a parte do comércio eletrônico que é considerado pelo autor a mais importante de ser implementada de forma descentralizada, a parte de transação comercial.

Foram definidos 3 casos de uso a serem implementados.

\phantomsection
\label{usecase}
**Caso de Uso 1**: compra efetuada com sucesso sem interferência do árbitro.

1. Comprador inicia a transação selecionando o árbitro da transação;
2. Carteira de pagamento multi-assinada é gerada com a chave pública do comprador, do vendedor e do árbitro;
3. Comprador transfere o valor do produto que está comprando para a carteira multi-assinada;
4. Após confirmação da transferência do valor para a carteira multi-assinada, o vendedor informa o envio do produto;
5. Ao receber o produto, o comprador informa o recebimento do mesmo;
6. O vendedor informa o endereço da carteira na qual deseja receber o pagamento pelo produto;
7. Dinheiro é depositado na carteira de pagamento informada pelo vendedor.

**Caso de Uso 2**: comprador não recebe produto.

1. Comprador inicia a transação selecionando o árbitro da transação;
2. Carteira de pagamento multi-assinada é gerada com a chave pública do comprador, do vendedor e do árbitro;
3. Comprador transfere o valor do produto que está comprando para a carteira multi-assinada;
4. Após confirmação da transferência do valor para a carteira multi-assinada, o vendedor informa o envio do produto;
5. Comprador não recebe o produto e entra requisita arbitragem a seu favor;
6. Árbitro confirma ganho de causa para o comprador;
7. Dinheiro é depositado na carteira de pagamento informada pelo comprador.

**Caso de Uso 3**: vendedor envia produto para comprador mas comprador não confirma o recebimento do produto.

1. Comprador inicia a transação selecionando o árbitro da transação;
2. Carteira de pagamento multi-assinada é gerada com a chave pública do comprador, do vendedor e do árbitro;
3. Comprador transfere o valor do produto que está comprando para a carteira multi-assinada;
4. Após confirmação da transferência do valor para a carteira multi-assinada, o vendedor informa o envio do produto;
5. Vendedor requisita arbitragem pois comprador não confirmou o recebimento do produto;
   1. Vendedor informa o endereço da carteira na qual deseja receber o pagamento pelo produto;
6. Árbitro confirma ganho de causa para o vendedor;
7. Dinheiro é depositado na carteira de pagamento informada pelo vendedor.

Se os casos de uso 1, 2 e 3 puderem ser implementados, deverá ser implementado também o seguinte caso de uso:

**Caso de Uso 4**: cadastro e listagem de produto

1. Comprador inicia registro de produto informando os dados do mesmo
   1. Nome
   2. Descrição
   3. Preço
   4. Estado de origem
   5. Categoria:
      1. Serviços;
      2. Veículos;
      3. Tecnologia;
      4. Casa e Eletrodomésticos;
      5. Acessórios para Veículos;
      6.  Esporte e Lazer;
      7.  Joias e Relógios;
      8.  Brinquedos e Bebês;
      9.  Ferramntas e Indústria;
      10. Beleza e Cuidado Pessoal;
      11. Moda;
      12. Imóveis;
      13. Supermecado;
      14. Livros, Revistas e Comics;
      15. Outros.
  1. Preço;
  2. Fotos do produto.
2. Comprador confirma informações do produto;
3. Produto é listado na plataforma de vendas.

### Arquitetura do projeto

A figura \ref{fig:arch} mostra a arquitetura da aplicação.

\begin{figure}[htbp]
    \caption{\label{fig:arch}Arquitetura da aplicação.}
    \begin{center}
    \includegraphics[width=1.0\textwidth]{imagens/arch.png}
    \end{center}
\end{figure}

No passo 1, o cliente, que pode ser acessado por qualquer navegador, se comunica com o *Blockstack Browser* para que o usuário consiga realizar o *sign in* utilizando sua chave privada. Depois de ter fornecido suas credenciais, o *Blockstack Broser* valida as credenciais na *Blockchain* (passo 2), e a *blockchain* recupera os endereços dos ambientes de armazenamento do usuário através do *Gaia* (passo 3). Essas informações são retornadas para o *Blockstack Browser* (que também é apenas um cliente acessível pelo navegador), e é informado que a aplicação deseja ter permissão de leitura/escrita do usuário.

Após o usuário conceder as permissões da aplicação, é gerado um *token* único para a aplicação e uma chave privada gerada a partir da chave inicial do usuário. Esse *token* junto com a *chave privada da aplicação* são retornados para o cliente que os armazena no banco de dados local do navegador do usuário\footnote{\emph{local storage} (armazenamento local) é o nome do banco de dados \emph{offline} que vem embutido nos navegadores modernos e que permite que informações sejam armazenas de forma desestruturada no navegador, sendo usado principalmente para armazenar pequenas informações que podem ser acessadas quando não há conexão com a \emph{internet} esse banco de dados é padrão dos navegadores e funciona de forma \emph{offline}}(passo 4).

Após esse processo o cliente está preparado para realizar operações e armazená-las na *blockchain da blockstack* e no gerenciador de armazenamento *Gaia* em nome do usuário. Isso já seria suficiente para que a aplicação funcionasse, no entanto, para permitir que nós (diferentes clientes) se comuniquem entre si é necessário que os nós se conheçam, o que requer a criação de um meio de indexação dos clientes da aplicação.

Isso é feito através do indexador *Radiks* que apresenta as seguintes características que o define como sendo um servidor de indexação descentralizado: \cite{radiks}

- Sem bloqueio de dados: o *Radiks* é apenas um indexador dos *hashes* dos documentos guardados através do *Gaia*. Mesmo que o indexador saia do ar, o usuário continua podendo ter o acesso aos seus dados, podendo copiá-lo ou movê-lo quando houver necessidade;
- Resistente a censura: como todo o dado é armazenado no *Gaia* e tem seus *hashes* registrados na *blockchain*, nenhum agente pode revogar o acesso ao dado de um usuário;
- Privacidade máxima: como os dados são ciptografados antes de serem enviados e armazenados tanto pelo *Radiks* quanto pelo *Gaia*, todas as informações privadas do usuário estão seguras.
- Criado utilizando autenticação descentralizada: o *Radiks* é fortemente atreleado ao sistema de autenticação da *Blockstack*, que utiliza *blockchain* e o sistema Gaia de forma a prover ao usuário controle total sobre a propriedade do dado e quem tem acesso a ele.

O sistema *Radiks* apenas armazena o *hashes* e *metadados* importantes das informações que necessitam ser armazenas pelo cliente na *blockchain* e permite que haja o armazenamento de dados que podem ser lidos e escritos em conjunto, o que permite que dois ou mais usuários possam, por exemplo, colaborativamente gerenciar um mesmo dado, uma característica importante em determinados contextos, como quando dois clientes precisam ser capazed de atualizar o *status* de uma compra.

Assim, o cliente se comunica com o *Radiks* (passo 5), que repassa os dados para a *blockchain* (passo 6), responsável por armazenar os dados no Gaia. Após a confirmação de que os dados foram armazenados, o *Radiks* indexa os dados e retorna a confirmação de sucesso para o cliente.

Um cliente pode utilizar diversos indexadores diferentes, o que permitira a criação de diversos servidores que poderiam servir como redes privadas ou secretas de clientes ou para que, por exemplo, um indexador Radiks fosse usado apenas por uma comunidade pequena no interior de São Paulo.

### Experiência de desenvolvimento

Durante o processo de desenvolvimento, diversos obstáculos foram encontrados. Inicialmente, a aplicação a ser desenvolvida foi elaborada para utilizar a tecnologia *Holochain*, devido a suas características promissoras de se apresentar como uma alternativa mais eficiente em relação a aplicações descentralizadas que utilizam-se de *Blockchain* para funcionarem.

Porém, após ser feito uma pequeno código exemplo\footnote{Código fonte do servidor holochain: \url{https://github.com/vital-edu/cc_tuts}.Código fonte do frontend: \url{https://github.com/vital-edu/cc_tuts_gui}} (\emph{listing} \ref{lst:holochain}) para verificar a viabilidade da aplicação, foi constatado que a aplicação possuia problemas de sincronização entre os nós e que também seria necessário a implementação de um indexador para conseguir fazer com que nós distintos se comunicassem sem se conhecerem previamente.

Além desse problema, um nó da aplicação *Holochain* só poderia ser inicializado através de um computador, o que removeria a praticidade de uso e penalizaria o usuário final, se tornando uma solução incoveniente. De acordo com o que foi elaborado para esses riscos, foi decidido que a melhor alternativa seria migrar para uma outra tecnologia.

Foi nesse processo que o *Blockstack* foi escolhido como sucessor, após uma nova pesquisa sobre uma tecnologia que conseguisse prover um ambiente similar de desenvolvimento a uma aplicação *web* tradicional.

Após a criação de uma aplicação de teste\footnote{Código fonte: \url{https://github.com/blockstack/animal-kingdom.git}}, foi constatado que a solução atendia os requisitos mínimos necessários.

A partir de então, foi elaborada a aplicação com o escopo mínimo definido. Houve vários problemas principalmente em relação a utilização dos algorítmos de criptografia necessários para permitir que fosse criado uma carteira de criptomoeda que precisasse da assinatura de dois dos três envolvidos para ser movimentada (\emph{listing}: \ref{lst:multisig}).

\begin{lstlisting}[caption={Parte do código responsável por criar carteira \emph{multisig}}\label{lst:multisig},language=Java]

// decrypt redeem script
const encodedPSBT = decryptECIES(
  User.currentUser().encryptionPrivateKey(),
  transaction!!.attrs.seller_redeem_script
)

// sign inputs
const psbt = bitcoin.Psbt.fromBase64(encodedPSBT as string)
psbt.signAllInputs(bitcoin.ECPair.fromPrivateKey(
  Buffer.from(User.currentUser().encryptionPrivateKey(), 'hex')
))
psbt.signAllInputs(transactionUtils.privateKeyFromId(transaction!!._id))

const transactionIsValid = psbt.validateSignaturesOfAllInputs()

// transfer money to withdraw wallet
psbt.finalizeAllInputs()
const tx = psbt.extractTransaction().toHex()

const response = await api.propagateTransaction(tx)

// update transaction status
transaction!!.update({
  seller_status: SellerStatus.withdrawn,
  status: TransactionStatus.inactive
})
await transaction!!.save()

\end{lstlisting}

Houve um outro problema ao se utilizar o indexador \emph{Radiks}, que apresentou problemas relacionados a utilização das chaves públicas e privadas, havendo a perca dessas chaves ou a impossibilidade de descriptografar arquivos. Para contornar esse problema foi necessário um amplo estudo do código fonte da biblioteca, e a alteração da mesma, sendo utilizado na versão final do projeto a versão modificada do Radiks, que pode ser acessada em: \url{https://github.com/vital-edu/radiks}.

A a estrutura de documentos do projeto pode ser visualizada na figura \ref{fig:structure}.

\begin{figure}[htbp]
    \caption{\label{fig:structure}Estrutura de código da aplicação.}
    \begin{center}
    \includegraphics[width=0.3\textwidth]{imagens/structure.png}
    \end{center}
\end{figure}

As figuras \ref{fig:newproduct}, \ref{fig:listproducts} e \ref{fig:payment} mostram algumas das telas da aplicação desenvolvida. O código completo pode ser visto em \url{https://github.com/vital-edu/serve-the-market}.

\begin{figure}[htbp]
    \caption{\label{fig:newproduct}Tela de criação de produto.}
    \begin{center}
    \includegraphics[width=0.8\textwidth]{imagens/newproduct.png}
    \end{center}
\end{figure}

\begin{figure}[htbp]
    \caption{\label{fig:listproducts}Tela de listagem de produto.}
    \begin{center}
    \includegraphics[width=0.6\textwidth]{imagens/listproducts.png}
    \end{center}
\end{figure}

\begin{figure}[htbp]
    \caption{\label{fig:payment}Tela de pagamento.}
    \begin{center}
    \includegraphics[width=0.75\textwidth]{imagens/payment.png}
    \end{center}
\end{figure}

\clearpage

## Soluções concorrentes

Durante o desenvolvimento da deste trabalho, particulamente perto de sua conclusão, foi encontrada uma ideia concorrente que possui os mesmos propósitos e que se utiliza de tecnologias muito similares às propostas neste trabalho, o *OpenBazaar*.

### O OpenBazaar

O *\href{https://openbazaar.org/}{OpenBazaar}* surgiu a partir de um *hackathon* (maratorna de programação) realizado em Toronto no ano de 2013 como um projeto chamado de *DarkMarket* que tinha como objetivo criar uma resposta a remoção do *Silk Road* pelo governo federal americando \cite{darkmarket}. Sendo uma evolução ao *Silk Road* o projeto visava eliminar a grande fraqueza que o *Silk Road* possuía e que permitiu sua derrubada, o ponto único de falha.

Ao criar um livre mercado baseado em tecnologias descentralizadas, o *DarkMarket* se propunha a ser uma rede de nós conectados em que cada usuário criaria sua própria página *html* e a disponiblizaria para os demais nós da rede. Assim, seria possível anunciar produtos e quando houvesse interesse seria enviado uma ordem de compra, ambos vendedor e comprador escolheriam um outro nó da rede como árbitro, e então seria criado uma carteira *Bitcoin* que necessitaria de duas de três assinaturas para o dinheiro na carteira ser movimentado. Uma proposta muito semelhante a que foi concebida para este trabalho.

Após vencer a maratona de programação e receber como prêmio o valor de 20 mil dólares o projeto foi reformulado, passando a ter o nome atual e a ser desenvolvido por uma equipe maior de desenvolvimento \cite{darkmarketrebranded}. O projeto desde o príncipio foi disponiblizado com o código aberto através do *GitHub* e mantém seu desenvolvimento até hoje.

A última versão do *OpenBazar* conta com uma aplicação móvel chamada *\href{https://openbazaar.org/}{Haven} que embora utilize a mesma rede do *OpenBazaar* e execute o servidor do *OpenBazaar*, possui um cliente diferente, que ao contrário da versão *desktop* do *OpenBazaar*, não é de código aberto.

O *OpenBazaar* possui como principais funcionalidades: \cite{openbazaar}

- Busca: o *OpenBazaar* funciona por um sistema de servidores que funcionam através da rede *TOR* e pode ser configurado para se conectar a qualquer servidor privado, porém existem um servidor padrão que já vem configurado. Dentro de cada servidor é possível realizar buscas de produtos e serviços;
- Transações via criptomoedas: suporte a várias criptomoedas, sendo a principal o *Bitcoin*. Cada vendedor escolhe as criptomoedas que deseja realizar a transação;
- Sistema de disputa e moderação: suporte a eleição de um árbitro em cada compra, o que permite que ele seja acionado caso seja necessário realizar uma arbitragem entre comprador e vendedor. Uma taxa é dada para o árbitro para recompensar o serviço prestado;
- Suporte a diferentes versões de um mesmo produto: é possível adicionar em um mesmo produto propriedades diversas, como cores diferentes, tamanhos diferentes, variações de modelo de um mesmo produto, conseguindo colocar em uma página só a opção de compra de diferentes variações do mesmo produto;
- Gerenciador de inventário: essa funcionalidade permite especificar a quantidade de estoque que cada produto e suas variações possuem, garantindo que seja vendido apenas o que está disponível em estoque e sendo possível acompanhar as alterações nos estoques do produto pelo vendedor;
- Opção de entrega: o vendedor consegue adicionar informações sobre a entrega do produto, especificando preços, prazos e transportadoras diferentes para cada produto ofertado;
- Bate-papo em tempo real: o vendedor e comprador conseguem se comunicar em tempo real através do sistema de bate-papo da aplicação;
- Gerencimento de ordem: o vendedor e comprador conseguem acompanhar todo o processo da transação, desde a venda, passando pelo transporte até a confirmação da entrega do produto.

Todas essas funcionalidades são providas através de tecnologias descentralizadas que garantem que o usuário está sobre controle de seus dados e que não há um ponto único de falha que faça com que o governo ou qualqeur outra organização central derrubem o serviço. O suporte a rede TOR e a configuração de diferentes servidores permite que sejam criados servidores privados, secretos e que operam sem o conhecimento do público geral ou dos próprios criadores do *OpenBazaar*, garantindo anonimato e segurança para que a rede nunca saia do ar enquanto houver utilizadores.

O *OpenBazaar* tem uma arquitetura com quatro componentes principais:

- Um protocolo de busca chamado OBIP: para garantir que produtos sejam encontrados na rede, é necessário haver a descoberta de nós e para que esse processo seja o mais descentralizado possível, o *OpenBazaar* criou um protocolo que garante que qualquer serviço que o implemente possa ser utilizado como um provedor de busca utilizável dentro da aplicação do *OpenBazaar*;
- Contrato inteligente utilizando a rede *Ethereum*: os contratos inteligentes são utilizados no *OpenBazaar* sempre que uma compra requer um moderador. Neste caso, é criado um contrato inteligente na rede *Ethereum* que determina a exata execução do que foi acordado, grantindo segurança nas operações;
- Rede de nós: a rede de nó utiliza o protocolo *Kademila*, que funciona de forma semelhante ao que já foi específicado na rede da *Holochain*.
- Armazenamento de dados: o banco de dados utilizado pelo *OpenBazaar* é o *IFPS*, e um comparativo sobre o mesmo em relação ao protocolo *Gaia* está presente na tabela \ref{tab:gaia}.

O *OpenBazaar* é uma solução completa, robusta e que já está em funcionamento a mais de 5 anos. Porém, isso não invalida a criação de concorrentes, mesmo que possuam a mesma motivação e utilizem de tecnologias semelhates. A descoberta do *OpenBazaar* foi uma grata surpresa, e comprova que o problema motivador deste trabalho é relevante e tem muito o que avançar. Embora ele tenha sido descoberto tarde demais, foi interessante ver que algumas das soluções encontradas neste trabalho, também foram utilizadas no *OpenBazaar*.

# Critérios de avaliação

Para que seja possível comparar as tecnologias descentralizadas escolhidas, é nencessário definir critérios de comparação. No entanto, como as tecnologias descentralizadas ganharam notoriedade recentemente, não foi encontrado na literatura, métodos de comparação entre diferentes tecnologias descentralizadas.

Por conta disso, este trabalho, utiliza-se de uma análise empírica e exploratória, que não pode ser generalizada para outros contextos ou servir como conclusão de que tecnologia X é melhor ou superior a tecnologia Y.

Esclarecido as limitações da metodologia de comparação, fica definido que as três tecnologias comparadas serão analisadas segundo os critérios descritos neste capítulo, em que cada critério terá especificado uma escala de valor que será utilizado durante a avaliação, sendo somado o valor de cada critério para se chegar a um resultado número final com valor máximo de 20 pontos, em que 20 é o melhor resultado possível e -10 é o pior resultado possível.

1. Facilidade de instalação e configuração

A facilidade de instalação e configuração de tecnologias descentralizadas é a primeira barreira para que desenvolvedores consigam desenvolver aplicações descentralizadas. Embora uma dificuldade maior em instalar uma tecnologia não seja preponderante no longo prazo, pode ser um fator que prejudique a penetração da tecnologia em um mercado tão competitivo e novo como o de desenvolvimento de aplicações descentralizads.

\begin{table}[htpb]
\centering
\caption{\label{tab:crit:1}Facilidade de instalação e configuração.}
{\rowcolors{2}{gray!25}{white}
\begin{tabular}{cm{0.6\linewidth}c}
\toprule
\textbf{Nível} & \centering\textbf{Descrição}                                                                                                        & \textbf{Valor numérico} \\ \midrule
Fácil          & não houve problemas no processo de intalação, ocorrendo conforme especificado na documentação da tecnologia               & 3                       \\
Médio          & houve pequenos problemas durante o processo de instalação que foram facilmente resolvidos após serem identificados        & 2                       \\
Difícil        & houveram problemas no processo de instalação que necessitaram de consultas a fontes externas a documentação de instalação & -1                       \\ \bottomrule
\end{tabular}
}
\end{table}

2. Utilização de tecnologias populares

Aplicações descentralizadas são um fenômeno recente e que por esse motivo possui uma comunidade de desenvolvedores limitada em número, por isso é relevante que as tecnologias descentralizadas utilizem linguagens de programação e padrões arquiteturais semelhantes ou familiares para desenvolvedores, caso contrário, não se poderá aproveitar os desenvolvedores atuais ou se tornará demasiadamente custoso capacitar novos desenvolvedores para utilizarem tais tecnologias.

\begin{table}[htpb]
\centering
\caption{\label{tab:crit:2}Utiliza tecnologia popular.}
\begin{tabular}{ccc}
\toprule
\multicolumn{1}{c}{\textbf{Resposta}} & \multicolumn{1}{c}{\textbf{Descrição}}                                                                                    & \textbf{Valor numérico} \\ \midrule
Sim                              & utiliza tecnologias populares               & 1                       \\
Não                              & não utiliza tecnologias populares           & -2                       \\ \bottomrule
\end{tabular}
\end{table}

Para definir se a tecnologia utilizada é popular, será considerado se a tecnologia tem suporte a uma das 10 linguagens de programação mais populares segundo o relatório de 2019 publicado pelo GitHub \cite{octoverse} e reproduzido na tabela \ref{tab:toplanguages}.

\begin{table}[htpb]
\centering
\caption{\label{tab:toplanguages}Linguagens mais populares.}
\begin{tabular}{ccc}
\toprule
\textbf{Posição} & \textbf{Linguagem} \\ \midrule
1              & JavaScript           \\
2              & Python               \\
3              & Java                 \\
4              & PHP                  \\
5              & C#                   \\
6              & C++                  \\
7              & TypeScript           \\
8              & Shell                \\
9              & C                    \\
10             & Ruby                 \\ \bottomrule
\end{tabular}
\legend{Fonte: \citeonline{octoverse}.}
\end{table}

1. Documentação abrangente

Mais importante do que ser uma tecnologia disruptiva, é ter uma documentação que proporcione aos desenvolvedores uma maneira fácil e compreensiva de entender todas as capacidades, limitações, e características da tecnologia, permitindo que desenvolvedores experientes mas que nunca tiveram contato com a tecnologia possam aprender e utilizar a tecnologia sem precisar desbravar o código fonte ou ter que entrar em contato direto com os mantenedores oficiais. Portanto, a documentação deve ser atualizada e abrangente.

\begin{table}[htpb]
\centering
\caption{\label{tab:crit:3}Possui documentação abrangente.}
\begin{tabular}{ccc}
\toprule
\textbf{Resposta} & \textbf{Descrição} & \textbf{Valor numérico} \\ \midrule
Sim                                    & a documentação é abrange e contém exemplos de uso               & 2                       \\
Não                                    & a documentção não é abrange ou não contém exemplos de uso            & -2                       \\ \bottomrule
\end{tabular}
\end{table}

4. Tamanho da comunidade

Quando a documentação não é suficiente, quando novas funcionalidades precisam ser implementas, quando *bugs* precisam ser consertados ou quando dúvidas precisam ser respondidas, é fundamental que haja uma comunidade receptiva e engajada, caso contrário, por melhor que seja a tecnologia, ela tenderá a ser abandonada ou substituída.

\begin{table}[H]
\centering
\caption{\label{tab:crit:4}Tamanho da comunidade.}
\begin{tabular}{ccc}
\toprule
\textbf{Nível} & \textbf{Descrição} & \textbf{Valor numérico} \\ \midrule
Grande                              & número de contribuídores no GitHub $\geq$ 3 mil           & 3 \\
Médio                               & 1 mil $\leq$ número de contribuídores no GitHub $<$ 3 mil & 2 \\
Pequeno                             & número de contribuídores no GitHub $<$ 1 mil              & 1 \\ \bottomrule
\end{tabular}
\end{table}

5. Produtividade

Embora a produtividade seja um aspecto difícil de ser mensurado por ser relativo ao desenvolvedor, ao ambiente e a outros fatores de díficil mensuração, é importante ter ao menos uma escala de comparação, mesmo que objetivamente imprecisa, entre diferentes tecnologias, para que se tenha uma noção aproximada da facilida de se implementar nobas funcionalidades à aplicação.

\begin{table}[H]
\centering
\caption{\label{tab:crit:5}Produtividade.}
\begin{tabular}{ccc}
\toprule
\textbf{Nível} & \textbf{Descrição} & \textbf{Valor numérico}   \\ \midrule
Suficiente     & implementação dos 3 casos de uso           & 5 \\
Parcial        & implementação parcial dos casos de uso     & 1 \\
Insuficiente   & impossibilidade de implementação dos casos de uso  & -5 \\ \bottomrule
\end{tabular}
\end{table}

Para avalização desse critério será utilizado o tempo de 20 horas de desenvolvimento na implementação dos casos de uso 1, 2 e 3 (seção \ref{usecase}).

<!-- 6. Facilidade em implementar testes automatizados

Testes automatizados são importantes para garantir que as funcionalidades implementadas funcionam como deveriam e principalmente para que não surjam novos defeitos em componentes já implementados quando novas funcionalidades são inseridas na aplicação. Uma tecnologia que não suporte testes automatizados se torna difícil de manter a médio e longo prazo e dificilmente poderá ser utilizada em contextos complexos ou em aplicações grandes. -->

6. Facilidade de utilização pelos usuários

Para que uma tecnologia descentralizada possa ser amplamente utilizada é necessário que ela seja fácil de usar pelos usuários finais e que exija o mínimo possível de conhecimento técnico, sendo o mais indistinguível possível de uma aplicação tradicional a qual o usuário já esteja acostumado.

\begin{table}[H]
\centering
\caption{\label{tab:crit:6}Facilidade de utilização pelos usuários.}
{\rowcolors{2}{gray!25}{white}
\begin{tabular}{cm{0.6\linewidth}c}
\toprule
\textbf{Nível} & \centering \textbf{Descrição} & \textbf{Valor numérico}   \\ \midrule
Fácil          & \centering usuário não precisa de conhecimento técnico ou treinamento para usar aplicação & 3 \\
Difícil        & \centering usuário precisa de conhecimento técnico ou treinamento para usar aplicação     & -2 \\ \bottomrule
\end{tabular}
}
\end{table}

7. Desenvolvimento multiplataforma

Uma aplicação deve ter o maior suporte possível a diferentes plataformas para conseguir se adaptar a diferentes contextos. Porém, com o aumento no desenvolvimento de aplicações móveis e online, será analisado especificamente se as tecnologias descentralizadas estudadas possuem suporte as plataformas:

- iOS
- Android
- Web

\begin{table}[htpb]
\centering
\caption{\label{tab:crit:7}Desenvolvimento multiplataforma.}
{\rowcolors{2}{gray!25}{white}
\begin{tabular}{cm{0.5\linewidth}c}
\toprule
\textbf{Nível} & \centering\textbf{Descrição} & \textbf{Valor numérico}   \\ \midrule

Máximol                       & \centering aplicação pode ser utilizada em todas as três plataformas analisadas & 3 \\
Parcialmente Limitado         & \centering suporta a navegadores web e uma das plataformas móveis               & 2 \\
Limitado a web                & \centering suporta apenas à navegadores web                                     & 1 \\
Limitado a \emph{smartphones} & \centering suporta apenas dispositivos móveis                                   & 1 \\ \bottomrule

\end{tabular}
}
\end{table}

# Resultados

## Holochain

1. Facilidade de instalação e configuração

Para instalar o *Holochain* foi necessário instalar e configurar o *NixOS*, um sistema operacional que utiliza o gerenciador de pacotes *Nix*\footnote{\emph{Nix} é um gerenciador de pacotes funcional para Linux e outros sistemas Unix, que é confiável e reproduzível. Ele provê atualizações, reversão de atualizações, instalação lado-a-lado de múltiplas versões de um mesmo pacote, gerenciamento de pacotes com suporte a múltiplos usuários e facilidade de configuração do ambiente. \cite{nix}} utilizando os comandos de terminal:

\begin{lstlisting}[language=Bash]
curl https://nixos.org/nix/install | sh
. ~/.nix-profile/etc/profile.d/nix.sh
\end{lstlisting}

Após a instalçao do NixOS, a *Holochain* é instalada com o seguinte comando:

\begin{lstlisting}[language=Bash]
nix-shell https://holochain.love
\end{lstlisting}

Após a *Holochain* estar instalada, basta inicializar um projeto vazio com o comando:

\begin{lstlisting}[language=Bash]
hc init nome_do_projeto
\end{lstlisting}

O processo de instalação e configuração foi simples embora tenha demorado para baixar o *NixOS*.

Resultado: 3/3.

1. Utilização de tecnologias populares

A *Holochain* embora tenha uma biblioteca *JavaScript* que auxilia na comunicação com a parte principal da aplicação, requer que toda a lógica da aplicação seja desenvolvida utilizando a linguagem *Rust* que não está na lista de linguagens mais populares (veja tabela \ref{tab:toplanguages}).

Resultado: 1/2.

### Documentação abrangente

### Tamanho da comunidade

### Produtividade

### Facilidade de utilização pelos usuários

### Desenvolvimento multiplataforma


## Blockstack

### Facilidade de instalação e configuração

### Utilização de tecnologias populares

### Documentação abrangente

### Tamanho da comunidade

### Produtividade

### Facilidade de utilização pelos usuários

### Desenvolvimento multiplataforma

## Ethereum

### Facilidade de instalação e configuração

### Utilização de tecnologias populares

### Documentação abrangente

### Tamanho da comunidade

### Produtividade

### Facilidade de utilização pelos usuários

### Desenvolvimento multiplataforma

# Discussões finais

O presente trabalho apresentou um estudo teórico sobre algumas tecnologias descentralizadas iminentes em conjunto com a aplicação de uma dessas tecnologias, a *Blockstack*, na resolução de um problema real, a criação de um livre mercado.

Durante o desenvolvimento do projeto, muitos problemas foram encontrados, havendo a necessidade de realizar a troca da tecnologia inicialmente escolhida (*Holochain*) pela tecnologia utilizada no protótipo final.

Todo o processo de aprendizado e experimentação nessas tecnologias descentralizadas mostrou-se desafiador, havendo pouquíssimo conteúdo disponível e pouco suporte da comunidade, justamente por serem tecnologias inovadoras e que se mostraram ainda em estado inicial de desenvolvimento.

Devido ao caráter experimental dessa pesquisa e o risco envolvido, não foi atingido o nível de maturidade de projeto esperado, nem mesmo foi possível realizar um comparativo detalhado sobre as diferentes tecnologias descentralizadas ou a diferença de performance e usabilidade de tais tecnologias em relação a tecnologias convencionais, sendo recomendações de pesquisas futuras neste campo do conhecimento.

Ainda assim, o potencial que tais tecnologias possuem em entregar segurança, privacidade e controle aos usuários é notavel e espera-se que esse novo paradigma da computação descentralizada alcance a grande masse de usuários e provoque mudanças significativas, e, que muitos dos conceitos apresentados neste trabalho, sejam de alguma forma absorvidos pelas aplicações atuais ou aprimorados para a criação de novos produtos e serviços digitais. Afinal, nota-se uma crescente preocupação na sociedade com questões de privacidade e abuso de poder, e tais ameaças a liberdade fazem valer os esforços despendidos no avanço da pesquisa e uso de tais tecnologias.
